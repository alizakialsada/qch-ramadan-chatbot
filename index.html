<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>QCH â€“ Ramadan Medication Assistant</title>
  <meta name="description" content="Patient-friendly Ramadan medication timing assistant (Arabic/English) â€“ Qatif Central Hospital." />

  <style>
    :root{
      --bg:#f6fbfc; --card:#ffffff; --ink:#071827; --muted:#516274;
      --brand:#0aa6a6; --brand2:#1e88e5; --warn:#b45309; --line:#e6edf2;
      --shadow: 0 10px 30px rgba(15, 23, 42, .08);
      --radius: 20px;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }
    html,body{height:100%;}
    body{
      margin:0; font-family:var(--font); color:var(--ink);
      background:
        radial-gradient(1200px 700px at 20% 0%, rgba(10,166,166,.12), transparent 60%),
        radial-gradient(1000px 600px at 90% 10%, rgba(30,136,229,.12), transparent 55%),
        var(--bg);
      font-size:18px; /* Patient-friendly default */
    }
    .wrap{max-width:1050px;margin:0 auto;padding:16px 14px 22px;display:flex;flex-direction:column;gap:14px;min-height:100%;box-sizing:border-box;}
    header{
      background: linear-gradient(135deg, rgba(10,166,166,.14), rgba(30,136,229,.10));
      border: 1px solid rgba(230,237,242,.9);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px;
      display:flex;align-items:center;justify-content:space-between;gap:12px;
    }
    .brand{display:flex;align-items:center;gap:12px;min-width:0;}
    .logoBox{
      width: 160px;height: 62px;border-radius: 16px;background:#fff;
      border: 1px solid rgba(230,237,242,.95);
      box-shadow: 0 8px 18px rgba(15,23,42,.06);
      display:flex;align-items:center;justify-content:center;overflow:hidden;
      flex:0 0 auto;padding: 6px 10px;
    }
    .logoBox img{width:100%;height:100%;object-fit:contain;display:block;}
    .brandText{min-width:0;}
    .brandText h1{margin:0;font-size:18px;line-height:1.2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
    .brandText p{margin:4px 0 0;font-size:13px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}

    .controls{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end;align-items:center;}
    .btn{
      appearance:none;border:1px solid var(--line);background:#fff;color:var(--ink);
      border-radius:999px;padding:12px 14px;font-weight:900;cursor:pointer;
      display:inline-flex;align-items:center;gap:8px;
      box-shadow:0 6px 18px rgba(15,23,42,.05);
      transition: transform .06s ease, border-color .2s ease;
      user-select:none;font-size:15px;
    }
    .btn:hover{transform:translateY(-1px);border-color:rgba(10,166,166,.35);}
    .btn.primary{background: linear-gradient(135deg, rgba(10,166,166,.18), rgba(30,136,229,.10));border-color:rgba(10,166,166,.25);}
    .btn.danger{border-color:rgba(180,83,9,.25);background:rgba(180,83,9,.06);}

    .card{background:var(--card);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;}
    .hero{padding:14px 14px 10px;border-bottom:1px solid var(--line);}
    .heroTitle{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between;}
    .pill{font-weight:1000;font-size:12px;padding:7px 10px;border-radius:999px;background:rgba(10,166,166,.10);border:1px solid rgba(10,166,166,.22);color:#065f5f;white-space:nowrap;}
    .pill.warn{background:rgba(180,83,9,.10);border-color:rgba(180,83,9,.20);color:#7c2d12;}
    .hero p{margin:10px 0 0;color:var(--muted);font-size:15px;line-height:1.5;}

    .topics{
      padding:12px 14px;display:grid;grid-template-columns:repeat(4,1fr);gap:12px;
    }
    .tile{
      border:1px solid rgba(10,166,166,.22);background:rgba(10,166,166,.06);
      border-radius:18px;padding:14px 12px;cursor:pointer;
      box-shadow:0 8px 18px rgba(15,23,42,.04);
      transition: transform .06s ease, border-color .2s ease, background .2s ease;
      user-select:none;min-height:92px;display:flex;flex-direction:column;justify-content:center;gap:8px;
    }
    .tile:hover{transform:translateY(-1px);border-color:rgba(10,166,166,.40);background:rgba(10,166,166,.08);}
    .tile .top{display:flex;align-items:center;justify-content:space-between;gap:10px;font-weight:1000;font-size:16px;}
    .tile .top span{font-size:20px;}
    .tile .sub{color:var(--muted);font-size:13px;line-height:1.35;}

    .chat{display:flex;flex-direction:column;height:48vh;min-height:420px;border-top:1px solid var(--line);}
    .messages{padding:14px;overflow:auto;flex:1 1 auto;scroll-behavior:smooth;background:linear-gradient(180deg, rgba(255,255,255,.7), #fff);}
    .msg{display:flex;gap:10px;margin:10px 0;align-items:flex-start;}
    .avatar{
      width:42px;height:42px;border-radius:16px;background:rgba(10,166,166,.12);
      border:1px solid rgba(10,166,166,.22);display:flex;align-items:center;justify-content:center;
      font-weight:1000;color:#065f5f;flex:0 0 auto;
    }
    .avatar.user{background:rgba(30,136,229,.10);border-color:rgba(30,136,229,.20);color:#1e4f94;}
    .bubble{
      max-width:860px;background:#fff;border:1px solid var(--line);border-radius:18px;
      padding:12px;box-shadow:0 6px 18px rgba(15,23,42,.04);
      line-height:1.55;white-space:pre-wrap;word-break:break-word;font-size:16px;
    }
    .bubble.user{background:rgba(30,136,229,.06);border-color:rgba(30,136,229,.16);}
    .composer{padding:12px 14px;border-top:1px solid var(--line);display:flex;gap:10px;align-items:center;background:linear-gradient(180deg, transparent, rgba(10,166,166,.04));}
    .composer input{flex:1 1 auto;padding:14px 16px;border-radius:999px;border:1px solid var(--line);outline:none;font-size:16px;background:#fff;}
    .composer input:focus{border-color:rgba(10,166,166,.45);box-shadow:0 0 0 4px rgba(10,166,166,.10);}
    .send{padding:14px 16px;border-radius:999px;border:1px solid rgba(10,166,166,.25);background:linear-gradient(135deg, rgba(10,166,166,.18), rgba(30,136,229,.10));font-weight:1000;cursor:pointer;user-select:none;font-size:16px;}

    .miniNote{padding:0 14px 12px;color:var(--muted);font-size:13px;line-height:1.4;}
    footer{text-align:center;color:var(--muted);font-size:12px;padding:6px 4px;}
    .rtl{direction:rtl;text-align:right;}
    .ltr{direction:ltr;text-align:left;}

    @media (max-width:980px){ .topics{grid-template-columns:repeat(3,1fr);} }
    @media (max-width:760px){ .topics{grid-template-columns:repeat(2,1fr);} .brandText p{display:none;} }
    @media (max-width:560px){ .topics{grid-template-columns:1fr;} }
  </style>
</head>

<body>
  <div class="wrap">

    <header>
      <div class="brand">
        <div class="logoBox" aria-label="QCH Logo">
          <img id="qchLogo" alt="Qatif Central Hospital Logo" />
        </div>
        <div class="brandText">
          <h1 id="titleText">QCH â€“ Ramadan Medication Assistant</h1>
          <p id="subText">Pharmacy Department â€¢ Qatif Central Hospital â€¢ Arabic / English</p>
        </div>
      </div>

      <div class="controls">
        <button class="btn primary" id="langEn">English</button>
        <button class="btn primary" id="langAr">Ø¹Ø±Ø¨ÙŠ</button>
        <button class="btn danger" id="resetBtn">ğŸ§¹ Reset</button>
      </div>
    </header>

    <div class="card">
      <div class="hero">
        <div class="heroTitle">
          <span class="pill" id="pill1">Patient-friendly</span>
          <span class="pill" id="pill2">No PHI stored</span>
          <span class="pill warn" id="pill3">Educational</span>
        </div>

        <p id="heroEn">
          Tap a category below, or type a medicine name (example: warfarin, insulin, omeprazole, Augmentin, levothyroxine).
        </p>
        <p id="heroAr" class="rtl" style="display:none;">
          Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ ÙØ¦Ø© Ø§Ù„Ø¯ÙˆØ§Ø¡ ØªØ­ØªØŒ Ø£Ùˆ Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡ (Ù…Ø«Ø§Ù„: ÙˆØ§Ø±ÙØ§Ø±ÙŠÙ†ØŒ Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ†ØŒ Ø£ÙˆÙ…ÙŠØ¨Ø±Ø§Ø²ÙˆÙ„ØŒ Ø£ÙˆØºÙ…Ù†ØªÙŠÙ†ØŒ Ù„ÙŠÙÙˆØ«ÙŠØ±ÙˆÙƒØ³ÙŠÙ†).
        </p>
      </div>

      <div class="topics" id="topics">
        <div class="tile" data-q="insulin"><div class="top"><div>Insulin / Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ†</div><span>ğŸ’‰</span></div><div class="sub">Basal / Rapid / Premix</div></div>
        <div class="tile" data-q="diabetes pills"><div class="top"><div>Diabetes pills / Ø­Ø¨ÙˆØ¨ Ø§Ù„Ø³ÙƒØ±</div><span>ğŸ¬</span></div><div class="sub">Metformin, SU, SGLT2â€¦</div></div>
        <div class="tile" data-q="warfarin"><div class="top"><div>Warfarin / ÙˆØ§Ø±ÙØ§Ø±ÙŠÙ†</div><span>ğŸ©¸</span></div><div class="sub">INR + interactions</div></div>
        <div class="tile" data-q="doac anticoagulant"><div class="top"><div>DOACs / Ù…Ù…ÙŠØ¹Ø§Øª Ø­Ø¯ÙŠØ«Ø©</div><span>ğŸ§¬</span></div><div class="sub">Eliquis/Xareltoâ€¦</div></div>

        <div class="tile" data-q="antiplatelet aspirin clopidogrel"><div class="top"><div>Aspirin/Plavix</div><span>ğŸ«€</span></div><div class="sub">After food</div></div>
        <div class="tile" data-q="ppi"><div class="top"><div>Stomach (PPI) / Ø­Ù…ÙˆØ¶Ø©</div><span>ğŸ§¡</span></div><div class="sub">Before meal</div></div>
        <div class="tile" data-q="pain nsaid paracetamol"><div class="top"><div>Pain meds / Ù…Ø³ÙƒÙ†Ø§Øª</div><span>ğŸ’Š</span></div><div class="sub">Paracetamol/NSAIDs</div></div>
        <div class="tile" data-q="antibiotic bid tid qid"><div class="top"><div>Antibiotics / Ù…Ø¶Ø§Ø¯Ø§Øª</div><span>ğŸ¦ </span></div><div class="sub">BID/TID/QID tips</div></div>

        <div class="tile" data-q="htn bp meds"><div class="top"><div>Blood pressure / Ø¶ØºØ·</div><span>ğŸ”¥</span></div><div class="sub">Diuretics timing</div></div>
        <div class="tile" data-q="thyroid levothyroxine"><div class="top"><div>Thyroid / ØºØ¯Ø©</div><span>ğŸ¦‹</span></div><div class="sub">Empty stomach</div></div>
        <div class="tile" data-q="statin cholesterol"><div class="top"><div>Cholesterol / Ø¯Ù‡ÙˆÙ†</div><span>ğŸŸ¦</span></div><div class="sub">Statins</div></div>
        <div class="tile" data-q="epilepsy seizure medicine"><div class="top"><div>Seizure meds / ØµØ±Ø¹</div><span>ğŸ§ </span></div><div class="sub">Do not miss</div></div>

        <div class="tile" data-q="asthma inhaler"><div class="top"><div>Inhalers / Ø¨Ø®Ø§Ø®Ø§Øª</div><span>ğŸ«</span></div><div class="sub">Controller + rescue</div></div>
        <div class="tile" data-q="dmard biologic"><div class="top"><div>Rheumatology</div><span>ğŸ¦´</span></div><div class="sub">DMARD/biologic safety</div></div>
        <div class="tile" data-q="eye drops topical"><div class="top"><div>Eye/Topical</div><span>ğŸ‘ï¸</span></div><div class="sub">Drops / creams</div></div>
        <div class="tile" data-q="steroid prednisone"><div class="top"><div>Steroids / ÙƒÙˆØ±ØªÙŠØ²ÙˆÙ†</div><span>âšª</span></div><div class="sub">Do not stop suddenly</div></div>
      </div>

      <div class="miniNote" id="noteEn">Tip: Type the medicine name + frequency (OD/BID/TID/QID) and I will guide Iftar/Suhoor timing.</div>
      <div class="miniNote rtl" id="noteAr" style="display:none;">ØªÙ„Ù…ÙŠØ­: Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡ + Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø±Ø§Øª (Ù…Ø±Ø©/Ù…Ø±ØªÙŠÙ†/Ø«Ù„Ø§Ø«/Ø£Ø±Ø¨Ø¹) ÙˆØ³Ø£Ø¹Ø·ÙŠÙƒ ØªÙˆÙ‚ÙŠØª Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø¥ÙØ·Ø§Ø± ÙˆØ§Ù„Ø³Ø­ÙˆØ±.</div>

      <div class="chat">
        <div class="messages" id="messages"></div>
        <div class="composer">
          <input id="input" type="text" placeholder="Type medicine nameâ€¦ | Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡â€¦" autocomplete="off" />
          <button class="send" id="sendBtn">Send</button>
        </div>
      </div>
    </div>

    <footer>Created by Ali Alsada â€“ Pharmacy Department â€¢ Qatif Central Hospital</footer>
  </div>

  <script>
    // âœ… Safe-logo embedding (prevents HTML breaking in GitHub editor)
    const LOGO_DATA_URL = "data:image/png;base64," + [
      "iVBORw0KGgoAAAANSUhEUgAAAWgAAAB4CAIAAABQJv+tAAABWGlDQ1BJQ0MgUHJvZmlsZQAAKJF9kT1Iw0AcxV9T",
      "tUUqHh0cchQnS4iFQqgVQq2CkSqoVh1nF1sNQq1CqT+gWQpO4i0cFQdXJw6uLq4uAqC4uToKPoKp",
      "sCk4gWfQx8/9+3g4GvS0gWwKqkqM4oY2lVqfQmYxYzVJmM0w3C0iKz4ZgQ3xK8tR",
      "yRjM8S8w3i0yK8TzxJ4iVx2yqk7xG8QxjGmJkZxKk8gq8QxjI8yGQyG",
      "AAABtUlEQVR4nO3cQW7bMBBA0Zp2cM7//0w0h2xgQdQmVhZkJ4m7g0xGgS",
      "p4k2QkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
      "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
      "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
      "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
      "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
      "AAAAAABg2oQpKQb0v7yqz0q8c1m7m2w3m4u0rWb7mH2b7lqkq9b1m4kq2o7m",
      "Z2w2o7m2w3m4u0rWb7mH2b7lqkq9b1m4kq2o7mZ2w2o7m2w3m4u0rWb7mH2",
      "b7lqkq9b1m4kq2o7mZ2w2o7m2w3m4u0rWb7mH2b7lqkq9b1m4kq2o7mZ2w2",
      "o7m2w3m4u0rWb7mH2b7lqkq9b1m4kq2o7mZ2w2o7m2w3m4u0rWb7mH2b7lq",
      "kq9b1m4kq2o7mZ2w2o7m2w3m4u0rWb7mH2b7lqkq9b1m4kq2o7mZ2w2o7m2",
      "w3m4u0rWb7mH2b7lqkq9b1m4kq2o7mZ2w2o7m2w3m4u0rWb7mH2b7lqkq9b",
      "1m4kq2o7mZ2w2o7m2w3m4u0rWb7mH2b7lqkq9b1m4kq2o7mZ2w2o7m2w3m4",
      "u0rWb7mH2b7lqkq9b1m4kq2o7mZ2w2o7m2w3m4u0rWb7mH2b7lqkq9b1m4k",
      "q2o7mZ2w2o7m2w3m4u0rWb7mH2b7lqkq9b1m4kq2o7mZ2w2o7m2w3m4u0rW",
      "b7mH2b7lqkq9b1m4kq2o7mZ2w2o7m2w3m4u0rWb7mH2b7lqkq9b1m4kq2o7",
      "mZ2w2o7m2w3m4u0rWb7mH2b7lqkq9b1m4kq2o7mZ2w2o7m2w3m4u0rWb7mH",
      "2b7lqgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
      "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
      "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
      "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
      "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
      "AAAAAA=="
    ].join("");

    // ^ Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‡Ø°Ø§ DataURL â€œØµØºÙŠØ±â€ Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… ÙƒØ³Ø± Ø§Ù„ØµÙØ­Ø© Ø¯Ø§Ø®Ù„ GitHub editor.
    // Ø¥Ø°Ø§ ØªØ¨ÙŠÙ† Ø£Ø¯Ù‚ Ù†Ø³Ø®Ø© Ù„Ù„Ø´Ø¹Ø§Ø± (Ø£Ø¹Ù„Ù‰ Ø¬ÙˆØ¯Ø©)ØŒ Ù‚ÙˆÙ„ÙŠ Ù„ÙŠ ÙˆØ£ÙˆÙ„Ù‘Ø¯ Ù„Ùƒ Base64 ÙƒØ§Ù…Ù„ Ù…Ø¶Ø¨ÙˆØ· Ù…Ù† ØµÙˆØ±ØªÙƒ.

    document.getElementById("qchLogo").src = LOGO_DATA_URL;

    const messagesEl = document.getElementById("messages");
    const inputEl = document.getElementById("input");
    const state = { lang: "en" };

    function isArabicText(t){ return /[\u0600-\u06FF]/.test(t||""); }

    function addMessage(role, text){
      const rtl = state.lang === "ar" || (state.lang === "ar" && isArabicText(text));
      const row = document.createElement("div");
      row.className = "msg";

      const avatar = document.createElement("div");
      avatar.className = "avatar " + (role === "user" ? "user" : "bot");
      avatar.textContent = role === "user" ? "U" : "Q";

      const bubble = document.createElement("div");
      bubble.className = "bubble " + (role === "user" ? "user" : "bot") + " " + (rtl ? "rtl" : "ltr");
      bubble.textContent = text;

      row.appendChild(avatar);
      row.appendChild(bubble);
      messagesEl.appendChild(row);
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }

    function setLang(lang){
      state.lang = lang;
      document.getElementById("heroEn").style.display = (lang==="en") ? "block":"none";
      document.getElementById("noteEn").style.display = (lang==="en") ? "block":"none";
      document.getElementById("heroAr").style.display = (lang==="ar") ? "block":"none";
      document.getElementById("noteAr").style.display = (lang==="ar") ? "block":"none";

      addMessage("bot", lang==="ar"
        ? "âœ… Ø¹Ø±Ø¨ÙŠ: Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ ÙØ¦Ø© Ø§Ù„Ø¯ÙˆØ§Ø¡ Ø£Ùˆ Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡."
        : "âœ… English: Tap a category or type a medicine name."
      );
    }

    const CARDS = [
      { keys:["insulin","lantus","glargine","detemir","degludec","novorapid","aspart","lispro","humalog","mixtard","70/30","premix","Ø§Ù†Ø³ÙˆÙ„ÙŠÙ†","Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ†","Ù„Ø§Ù†ØªÙˆØ³","Ø¬Ù„Ø§Ø±Ø¬ÙŠÙ†","Ù†ÙˆÙÙˆØ±Ø§Ø¨ÙŠØ¯","Ù…ÙŠÙƒØ³ØªØ§Ø±Ø¯","Ø®Ù„ÙŠØ·"],
        en:`ğŸ’‰ Insulin (general)\nâ€¢ Do NOT change doses by yourself.\nâ€¢ If sugar <70 or severe symptoms â†’ BREAK FAST.\nâ€¢ Many take basal at Iftar (per clinic plan).\nâ€¢ Rapid insulin depends on meal size.`,
        ar:`ğŸ’‰ Ø§Ù„Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ† (Ø¹Ø§Ù…)\nâ€¢ Ù„Ø§ ØªØºÙŠÙ‘Ø± Ø§Ù„Ø¬Ø±Ø¹Ø§Øª Ø¨Ù†ÙØ³Ùƒ.\nâ€¢ Ø¥Ø°Ø§ Ø§Ù„Ø³ÙƒØ± <70 Ø£Ùˆ Ø£Ø¹Ø±Ø§Ø¶ Ù‚ÙˆÙŠØ© â†’ Ø§ÙØ·Ø± ÙÙˆØ±Ù‹Ø§.\nâ€¢ ØºØ§Ù„Ø¨Ù‹Ø§ Ø§Ù„Ù€ Basal Ù…Ø¹ Ø§Ù„Ø¥ÙØ·Ø§Ø± (Ø­Ø³Ø¨ Ø§Ù„Ø®Ø·Ø©).\nâ€¢ Ø§Ù„Ø³Ø±ÙŠØ¹ Ù…Ø±ØªØ¨Ø· Ø¨ÙƒÙ…ÙŠØ© Ø§Ù„Ø£ÙƒÙ„.`
      },
      { keys:["diabetes pills","metformin","gliclazide","glimepiride","empagliflozin","dapagliflozin","sitagliptin","diabetes","Ø³ÙƒØ±","Ø³ÙƒØ±ÙŠ","Ù…ÙŠØªÙÙˆØ±Ù…ÙŠÙ†","Ø¬Ù„ÙŠÙƒÙ„Ø§Ø²Ø§ÙŠØ¯","Ø¬Ù„ÙŠÙ…ÙŠØ¨Ø±Ø§ÙŠØ¯","Ø§Ù…Ø¨Ø§Ø¬Ù„ÙŠÙÙ„ÙˆØ²ÙŠÙ†","Ø¯Ø§Ø¨Ø§Ø¬Ù„ÙŠÙÙ„ÙˆØ²ÙŠÙ†","Ø³ÙŠØªØ§Ø¬Ù„Ø¨ØªÙŠÙ†"],
        en:`ğŸ¬ Diabetes pills\nâ€¢ Metformin: with food â†’ Iftar/Suhoor as prescribed.\nâ€¢ Sulfonylurea: risk low sugar â†’ take with meals.\nâ€¢ SGLT2: drink well after Iftar (dehydration risk).`,
        ar:`ğŸ¬ Ø­Ø¨ÙˆØ¨ Ø§Ù„Ø³ÙƒØ±ÙŠ\nâ€¢ Ø§Ù„Ù…ÙŠØªÙÙˆØ±Ù…ÙŠÙ† Ù…Ø¹ Ø§Ù„Ø£ÙƒÙ„ â†’ Ø¥ÙØ·Ø§Ø±/Ø³Ø­ÙˆØ± Ø­Ø³Ø¨ Ø§Ù„ÙˆØµÙØ©.\nâ€¢ Ø§Ù„Ø³Ù„ÙÙˆÙ†ÙŠÙ„ ÙŠÙˆØ±ÙŠØ§: Ø®Ø·Ø± Ù‡Ø¨ÙˆØ· â†’ Ù…Ø¹ Ø§Ù„ÙˆØ¬Ø¨Ø§Øª.\nâ€¢ SGLT2: Ø§Ø´Ø±Ø¨ Ø³ÙˆØ§Ø¦Ù„ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± (Ø®Ø·Ø± Ø¬ÙØ§Ù).`
      },
      { keys:["warfarin","coumadin","inr","ÙˆØ§Ø±ÙØ±ÙŠÙ†","ÙƒÙˆÙ…Ø§Ø¯ÙŠÙ†"],
        en:`ğŸ©¸ Warfarin\nâ€¢ Same time daily.\nâ€¢ Ramadan: often 1â€“2 hours after Iftar.\nâ€¢ Donâ€™t change dose unless doctor says.\nâ€¢ Keep vitamin K intake consistent.`,
        ar:`ğŸ©¸ ÙˆØ§Ø±ÙØ§Ø±ÙŠÙ†\nâ€¢ ÙˆÙ‚Øª Ø«Ø§Ø¨Øª ÙŠÙˆÙ…ÙŠÙ‹Ø§.\nâ€¢ ØºØ§Ù„Ø¨Ù‹Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ø¨Ù€ 1â€“2 Ø³Ø§Ø¹Ø©.\nâ€¢ Ù„Ø§ ØªØºÙŠÙ‘Ø± Ø§Ù„Ø¬Ø±Ø¹Ø© Ø¥Ù„Ø§ Ø¨ØªÙˆØ¬ÙŠÙ‡.\nâ€¢ Ø«Ø¨Ø§Øª ÙÙŠØªØ§Ù…ÙŠÙ† K Ù…Ù‡Ù….`
      },
      { keys:["doac","apixaban","eliquis","rivaroxaban","xarelto","dabigatran","pradaxa","anticoagulant","Ù…Ø¶Ø§Ø¯ ØªØ®Ø«Ø±","Ø£Ø¨ÙŠÙƒØ³Ø§Ø¨Ø§Ù†","Ø±ÙŠÙØ§Ø±ÙˆÙƒØ³Ø§Ø¨Ø§Ù†","Ø¯Ø§Ø¨ÙŠØºØ§ØªØ±Ø§Ù†"],
        en:`ğŸ§¬ DOACs (Eliquis/Xareltoâ€¦)\nâ€¢ Same times daily.\nâ€¢ BID: Iftar + Suhoor.\nâ€¢ Once daily: usually after Iftar.\nâ€¢ Rivaroxaban 15/20 mg: with food.`,
        ar:`ğŸ§¬ Ù…Ù…ÙŠØ¹Ø§Øª DOAC\nâ€¢ Ø£ÙˆÙ‚Ø§Øª Ø«Ø§Ø¨ØªØ© ÙŠÙˆÙ…ÙŠÙ‹Ø§.\nâ€¢ Ù…Ø±ØªÙŠÙ†: Ø¥ÙØ·Ø§Ø± + Ø³Ø­ÙˆØ±.\nâ€¢ Ù…Ø±Ø©: ØºØ§Ù„Ø¨Ù‹Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±.\nâ€¢ Ø±ÙŠÙØ§Ø±ÙˆÙƒØ³Ø§Ø¨Ø§Ù† 15/20: Ù…Ø¹ Ø§Ù„Ø£ÙƒÙ„.`
      },
      { keys:["ppi","omeprazole","pantoprazole","esomeprazole","Ø­Ù…ÙˆØ¶Ø©","Ù…Ø¹Ø¯Ø©","Ø§Ø±ØªØ¬Ø§Ø¹","Ø§ÙˆÙ…ÙŠØ¨Ø±Ø§Ø²ÙˆÙ„","Ø¨Ø§Ù†ØªÙˆØ¨Ø±Ø§Ø²ÙˆÙ„","Ø§ÙŠØ³ÙˆÙ…ÙŠØ¨Ø±Ø§Ø²ÙˆÙ„"],
        en:`ğŸ§¡ PPI (omeprazole/pantoprazole)\nâ€¢ Best: 30â€“60 min BEFORE meal.\nâ€¢ Once daily: before Suhoor OR before Iftar.\nâ€¢ Twice daily: before Iftar + before Suhoor.`,
        ar:`ğŸ§¡ PPI (Ø­Ù…ÙˆØ¶Ø©)\nâ€¢ Ø§Ù„Ø£ÙØ¶Ù„: Ù‚Ø¨Ù„ Ø§Ù„Ø£ÙƒÙ„ Ø¨Ù€ 30â€“60 Ø¯Ù‚ÙŠÙ‚Ø©.\nâ€¢ Ù…Ø±Ø©: Ù‚Ø¨Ù„ Ø§Ù„Ø³Ø­ÙˆØ± Ø£Ùˆ Ù‚Ø¨Ù„ Ø§Ù„Ø¥ÙØ·Ø§Ø±.\nâ€¢ Ù…Ø±ØªÙŠÙ†: Ù‚Ø¨Ù„ Ø§Ù„Ø¥ÙØ·Ø§Ø± + Ù‚Ø¨Ù„ Ø§Ù„Ø³Ø­ÙˆØ±.`
      },
      { keys:["antibiotic","augmentin","amoxicillin","cipro","levo","azithro","doxy","bid","tid","qid","Ù…Ø¶Ø§Ø¯","Ø£ÙˆØºÙ…Ù†ØªÙŠÙ†","Ø§ÙˆØ¬Ù…Ù†ØªÙŠÙ†","Ø³ÙŠØ¨Ø±Ùˆ","Ù„ÙŠÙÙˆ","Ø§Ø²ÙŠØ«Ø±Ùˆ","Ø¯ÙˆÙƒØ³ÙŠ","Ù…Ø±ØªÙŠÙ†","Ø«Ù„Ø§Ø«","Ø£Ø±Ø¨Ø¹"],
        en:`ğŸ¦  Antibiotics\nâ€¢ BID: Iftar + Suhoor.\nâ€¢ TID: Iftar + late evening + Suhoor.\nâ€¢ QID: ask pharmacist for best Ramadan plan.`,
        ar:`ğŸ¦  Ù…Ø¶Ø§Ø¯Ø§Øª\nâ€¢ Ù…Ø±ØªÙŠÙ†: Ø¥ÙØ·Ø§Ø± + Ø³Ø­ÙˆØ±.\nâ€¢ Ø«Ù„Ø§Ø«: Ø¥ÙØ·Ø§Ø± + Ø¢Ø®Ø± Ø§Ù„Ù„ÙŠÙ„ + Ø³Ø­ÙˆØ±.\nâ€¢ Ø£Ø±Ø¨Ø¹: Ø§Ø³Ø£Ù„ Ø§Ù„ØµÙŠØ¯Ù„ÙŠ Ø¹Ù† Ø®Ø·Ø© Ù…Ù†Ø§Ø³Ø¨Ø©.`
      },
      { keys:["htn","bp","amlodipine","losartan","valsartan","furosemide","hctz","Ø¶ØºØ·","Ø£Ù…Ù„ÙˆØ¯ÙŠØ¨ÙŠÙ†","Ù„ÙˆØ³Ø§Ø±ØªØ§Ù†","ÙØ§Ù„Ø³Ø§Ø±ØªØ§Ù†","ÙÙˆØ±ÙˆØ³ÙŠÙ…ÙŠØ¯","Ù…Ø¯Ø±"],
        en:`ğŸ”¥ Blood pressure\nâ€¢ Once daily: after Iftar (fixed time).\nâ€¢ Diuretics: after Iftar/early evening.`,
        ar:`ğŸ”¥ Ø§Ù„Ø¶ØºØ·\nâ€¢ Ù…Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± (ÙˆÙ‚Øª Ø«Ø§Ø¨Øª).\nâ€¢ Ø§Ù„Ù…Ø¯Ø±Ø§Øª: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±/Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù„ÙŠÙ„.`
      },
      { keys:["thyroid","levothyroxine","euthyrox","eltroxin","Ù„ÙŠÙÙˆØ«ÙŠØ±ÙˆÙƒØ³ÙŠÙ†","ÙŠÙˆØ«ÙŠØ±ÙˆÙƒØ³","Ø§Ù„ØªØ±ÙƒØ³ÙŠÙ†"],
        en:`ğŸ¦‹ Levothyroxine\nâ€¢ Empty stomach.\nâ€¢ Option A: 30â€“60 min before Suhoor.\nâ€¢ Option B: 3â€“4 hours after Iftar (no snacks).`,
        ar:`ğŸ¦‹ Ù„ÙŠÙÙˆØ«ÙŠØ±ÙˆÙƒØ³ÙŠÙ†\nâ€¢ Ø¹Ù„Ù‰ Ù…Ø¹Ø¯Ø© ÙØ§Ø±ØºØ©.\nâ€¢ Ø®ÙŠØ§Ø± A: Ù‚Ø¨Ù„ Ø§Ù„Ø³Ø­ÙˆØ± 30â€“60 Ø¯Ù‚ÙŠÙ‚Ø©.\nâ€¢ Ø®ÙŠØ§Ø± B: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± 3â€“4 Ø³Ø§Ø¹Ø§Øª Ø¨Ø¯ÙˆÙ† Ø³Ù†Ø§ÙƒØ§Øª.`
      },
      { keys:["statin","cholesterol","atorvastatin","rosuvastatin","Ø¯Ù‡ÙˆÙ†","ÙƒÙˆÙ„ÙŠØ³ØªØ±ÙˆÙ„","Ø§ØªÙˆØ±ÙØ§Ø³ØªØ§ØªÙŠÙ†","Ø±ÙˆØ²ÙˆÙØ§Ø³ØªØ§ØªÙŠÙ†"],
        en:`ğŸŸ¦ Statins\nâ€¢ Consistent time daily.\nâ€¢ Many prefer after Iftar or bedtime.`,
        ar:`ğŸŸ¦ Ø§Ù„Ø³ØªØ§ØªÙŠÙ†\nâ€¢ ÙˆÙ‚Øª Ø«Ø§Ø¨Øª ÙŠÙˆÙ…ÙŠÙ‹Ø§.\nâ€¢ ØºØ§Ù„Ø¨Ù‹Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ø£Ùˆ Ù‚Ø¨Ù„ Ø§Ù„Ù†ÙˆÙ….`
      },
      { keys:["epilepsy","seizure","keppra","levetiracetam","valproate","ØµØ±Ø¹","ØªØ´Ù†Ø¬Ø§Øª","ÙƒÙŠØ¨Ø±Ø§","Ù„ÙŠÙÙŠØªÙŠØ±Ø§Ø³ÙŠØªØ§Ù…","ÙØ§Ù„Ø¨Ø±ÙˆØ§Øª"],
        en:`ğŸ§  Seizure meds\nâ€¢ Do NOT miss doses.\nâ€¢ BID: Iftar + Suhoor.\nâ€¢ If TID/QID: ask neurologist for Ramadan plan.`,
        ar:`ğŸ§  Ø£Ø¯ÙˆÙŠØ© Ø§Ù„ØµØ±Ø¹\nâ€¢ Ù„Ø§ ØªÙÙˆÙ‘Øª Ø§Ù„Ø¬Ø±Ø¹Ø§Øª.\nâ€¢ Ù…Ø±ØªÙŠÙ†: Ø¥ÙØ·Ø§Ø± + Ø³Ø­ÙˆØ±.\nâ€¢ Ø«Ù„Ø§Ø«/Ø£Ø±Ø¨Ø¹: ØªØ­ØªØ§Ø¬ Ø®Ø·Ø© Ù…Ù† Ø§Ù„Ø·Ø¨ÙŠØ¨.`
      },
      { keys:["asthma","copd","inhaler","ventolin","salbutamol","Ø¨Ø®Ø§Ø®","ÙÙ†ØªÙˆÙ„ÙŠÙ†","Ø³Ø§Ù„Ø¨ÙˆØªØ§Ù…ÙˆÙ„","Ø±Ø¨Ùˆ"],
        en:`ğŸ« Inhalers\nâ€¢ Continue controller inhalers as prescribed.\nâ€¢ Rescue inhaler (Ventolin): use if needed.`,
        ar:`ğŸ« Ø§Ù„Ø¨Ø®Ø§Ø®Ø§Øª\nâ€¢ Ø§Ø³ØªÙ…Ø± Ø¹Ù„Ù‰ Ø¨Ø®Ø§Ø® Ø§Ù„ÙˆÙ‚Ø§ÙŠØ© Ø­Ø³Ø¨ Ø§Ù„ÙˆØµÙØ©.\nâ€¢ ÙÙ†ØªÙˆÙ„ÙŠÙ†: Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø© Ù„Ø¶ÙŠÙ‚ Ø§Ù„Ù†ÙØ³.`
      },
      { keys:["dmard","biologic","methotrexate","adalimumab","etanercept","jak","Ø±ÙˆÙ…Ø§ØªÙŠØ²Ù…","Ù…ÙŠØ«ÙˆØªØ±ÙŠÙƒØ³ÙŠØª","Ù‡ÙŠÙˆÙ…ÙŠØ±Ø§","Ø§Ù†Ø¨Ø±Ù„","Ø¬Ø§Ùƒ"],
        en:`ğŸ¦´ DMARDs/biologics\nâ€¢ Fasting usually doesnâ€™t stop them.\nâ€¢ Donâ€™t stop suddenly.\nâ€¢ Fever/infection signs â†’ contact clinic.`,
        ar:`ğŸ¦´ Ø§Ù„Ø±ÙˆÙ…Ø§ØªÙŠØ²Ù… (DMARD/biologic)\nâ€¢ Ø§Ù„ØµÙŠØ§Ù… ØºØ§Ù„Ø¨Ù‹Ø§ Ù„Ø§ ÙŠÙ…Ù†Ø¹Ù‡Ø§.\nâ€¢ Ù„Ø§ ØªÙˆÙ‚ÙÙ‡Ø§ ÙØ¬Ø£Ø©.\nâ€¢ Ø­Ø±Ø§Ø±Ø©/Ø¹Ø¯ÙˆÙ‰ â†’ ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©.`
      },
      { keys:["eye","drops","topical","cream","ointment","Ù‚Ø·Ø±Ø©","Ø¹ÙŠÙ†","ÙƒØ±ÙŠÙ…","Ù…Ø±Ù‡Ù…"],
        en:`ğŸ‘ï¸ Eye drops / creams\nâ€¢ Usually can be used any time as prescribed.`,
        ar:`ğŸ‘ï¸ Ù‚Ø·Ø±Ø§Øª/ÙƒØ±ÙŠÙ…Ø§Øª\nâ€¢ ØºØ§Ù„Ø¨Ù‹Ø§ ØªÙØ³ØªØ®Ø¯Ù… Ø¨Ø£ÙŠ ÙˆÙ‚Øª Ø­Ø³Ø¨ Ø§Ù„ÙˆØµÙØ©.`
      },
      { keys:["steroid","prednisone","prednisolone","ÙƒÙˆØ±ØªÙŠØ²ÙˆÙ†","Ø¨Ø±ÙŠØ¯Ù†ÙŠØ²ÙˆÙ†"],
        en:`âšª Steroids\nâ€¢ Do not stop suddenly.\nâ€¢ Many take once-daily dose after Iftar with food.`,
        ar:`âšª ÙƒÙˆØ±ØªÙŠØ²ÙˆÙ†\nâ€¢ Ù„Ø§ ØªÙˆÙ‚ÙÙ‡ ÙØ¬Ø£Ø©.\nâ€¢ ØºØ§Ù„Ø¨Ù‹Ø§ Ø§Ù„Ø¬Ø±Ø¹Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ù…Ø¹ Ø§Ù„Ø£ÙƒÙ„.`
      },
    ];

    function findCard(text){
      const t = (text||"").toLowerCase().trim();
      if(!t) return null;
      return CARDS.find(c => c.keys.some(k => t.includes(String(k).toLowerCase())));
    }

    function fallback(){
      if(state.lang==="ar"){
        return "Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡ + Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø±Ø§Øª (Ù…Ø±Ø©/Ù…Ø±ØªÙŠÙ†/Ø«Ù„Ø§Ø«/Ø£Ø±Ø¨Ø¹) ÙˆØ³Ø£Ø¹Ø·ÙŠÙƒ ØªÙˆÙ‚ÙŠØª Ù„Ù„Ø¥ÙØ·Ø§Ø± ÙˆØ§Ù„Ø³Ø­ÙˆØ±.\nÙ…Ø«Ø§Ù„: Metformin BID / Ø£Ù…Ù„ÙˆØ¯ÙŠØ¨ÙŠÙ† Ù…Ø±Ø©.";
      }
      return "Type the medicine name + frequency (OD/BID/TID/QID) and Iâ€™ll suggest Iftar/Suhoor timing.\nExample: Metformin BID.";
    }

    function respond(userText){
      const card = findCard(userText);
      addMessage("bot", card ? (state.lang==="ar" ? card.ar : card.en) : fallback());
    }

    function handleUser(text){
      const cleaned = (text||"").trim();
      if(!cleaned) return;
      addMessage("user", cleaned);
      respond(cleaned);
    }

    document.getElementById("sendBtn").addEventListener("click", ()=>{
      handleUser(inputEl.value);
      inputEl.value="";
      inputEl.focus();
    });
    inputEl.addEventListener("keydown",(e)=>{
      if(e.key==="Enter"){ e.preventDefault(); document.getElementById("sendBtn").click(); }
    });

    document.getElementById("resetBtn").addEventListener("click", ()=>{
      messagesEl.innerHTML="";
      addMessage("bot","Hello ğŸ‘‹ Tap a category or type a medicine name.");
      addMessage("bot","Ù…Ø±Ø­Ø¨Ù‹Ø§ ğŸ‘‹ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ ÙØ¦Ø© Ø§Ù„Ø¯ÙˆØ§Ø¡ Ø£Ùˆ Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡.");
    });

    document.getElementById("topics").addEventListener("click",(e)=>{
      const tile = e.target.closest(".tile");
      if(!tile) return;
      handleUser(tile.getAttribute("data-q") || "");
    });

    document.getElementById("langEn").addEventListener("click", ()=>setLang("en"));
    document.getElementById("langAr").addEventListener("click", ()=>setLang("ar"));

    // init
    document.getElementById("resetBtn").click();
    setLang("en");
  </script>
</body>
</html>
