<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Qatif Central Hospital â€“ Smart Ramadan Medication Assistant</title>
  <meta name="description" content="Bilingual (Arabic/English) Ramadan medication timing assistant for patients. Pharmacy Department â€“ Qatif Central Hospital." />
  <style>
    :root{
      --bg:#071a2b;
      --text:#eaf3ff;
      --muted:rgba(234,243,255,.75);
      --line:rgba(255,255,255,.15);
      --accent:#2dd4bf;
      --accent2:#60a5fa;
      --shadow: 0 14px 40px rgba(0,0,0,.35);
      --radius:18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    body{
      margin:0;font-family:var(--sans);color:var(--text);min-height:100vh;
      background:
        radial-gradient(1200px 700px at 15% 20%, rgba(45,212,191,.22), transparent 65%),
        radial-gradient(900px 600px at 85% 10%, rgba(96,165,250,.18), transparent 60%),
        radial-gradient(900px 600px at 70% 90%, rgba(45,212,191,.12), transparent 60%),
        var(--bg);
    }
    .wrap{max-width:1100px;margin:0 auto;padding:24px 18px 48px}
    header{
      display:flex;gap:16px;align-items:center;justify-content:space-between;
      padding:18px;border:1px solid var(--line);border-radius:var(--radius);
      background:linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
      box-shadow:var(--shadow);
    }
    .brand{display:flex;gap:14px;align-items:center}
    .logo{
      width:54px;height:54px;border-radius:16px;
      background:linear-gradient(135deg,var(--accent),var(--accent2));
      display:grid;place-items:center;flex:0 0 auto;
      box-shadow: 0 10px 22px rgba(0,0,0,.25);
    }
    .title h1{margin:0;font-size:18px}
    .title p{margin:3px 0 0;font-size:12px;color:var(--muted)}
    .controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:flex-end}
    .pill{border:1px solid var(--line);background:rgba(255,255,255,.06);padding:10px 12px;border-radius:999px;display:flex;gap:10px;align-items:center}
    select, button, input{
      border:1px solid var(--line);background:rgba(255,255,255,.06);color:var(--text);
      border-radius:12px;padding:10px 12px;font-size:13px;outline:none
    }
    select{padding:10px 34px 10px 12px}
    button{cursor:pointer;transition:.15s transform ease,.15s background ease;background:linear-gradient(135deg, rgba(45,212,191,.22), rgba(96,165,250,.18))}
    button:hover{transform:translateY(-1px)}
    .grid{margin-top:18px;display:grid;grid-template-columns:1.2fr .8fr;gap:16px}
    @media (max-width: 960px){.grid{grid-template-columns:1fr} header{flex-direction:column;align-items:flex-start} .controls{width:100%;justify-content:flex-start}}
    .card{border:1px solid var(--line);background:rgba(255,255,255,.06);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
    .card .hd{padding:14px 16px;display:flex;justify-content:space-between;align-items:center;gap:10px;border-bottom:1px solid var(--line);background:linear-gradient(135deg, rgba(255,255,255,.08), rgba(255,255,255,.03))}
    .card .hd h2{margin:0;font-size:14px}
    .card .bd{padding:14px 16px}
    .badge{font-size:11px;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.07);border:1px solid var(--line);color:var(--muted);white-space:nowrap}
    .disclaimer{font-size:12px;line-height:1.5;color:var(--muted)}
    .chat{height:520px;display:flex;flex-direction:column}
    .chatlog{padding:14px 16px;overflow:auto;flex:1;scroll-behavior:smooth}
    .msg{margin:10px 0;display:flex}
    .msg.user{justify-content:flex-end}
    .bubble{max-width:86%;padding:12px;border-radius:16px;border:1px solid var(--line);background:rgba(255,255,255,.07);box-shadow:0 10px 18px rgba(0,0,0,.20);line-height:1.45;font-size:13px;white-space:pre-wrap}
    .msg.user .bubble{background:linear-gradient(135deg, rgba(45,212,191,.20), rgba(96,165,250,.18));border-color:rgba(255,255,255,.18)}
    .meta{margin-top:8px;display:flex;gap:8px;flex-wrap:wrap}
    .chip{font-size:11px;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:rgba(0,0,0,.10);color:var(--muted)}
    .chip.ok{border-color:rgba(52,211,153,.55);color:rgba(209,250,229,.95)}
    .chip.warn{border-color:rgba(251,191,36,.55);color:rgba(254,243,199,.95)}
    .chip.danger{border-color:rgba(251,113,133,.55);color:rgba(255,228,230,.95)}
    .composer{display:flex;gap:10px;align-items:center;padding:12px;border-top:1px solid var(--line);background:rgba(0,0,0,.10)}
    .composer input{flex:1;padding:12px;border-radius:14px}
    .quick{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .qbtn{font-size:12px;padding:8px 10px;border-radius:999px;border:1px solid var(--line);background:rgba(255,255,255,.06);color:var(--text);cursor:pointer;transition:.12s transform ease}
    .qbtn:hover{transform:translateY(-1px)}
    .small{font-size:12px;color:var(--muted)}
    .mono{font-family:var(--mono)}
    .divider{height:1px;background:var(--line);margin:12px 0}
    .qr{display:flex;gap:14px;align-items:center;flex-wrap:wrap;padding:12px;border:1px dashed rgba(255,255,255,.25);border-radius:16px;background:rgba(255,255,255,.04)}
    #qrcode{width:110px;height:110px;border-radius:12px;overflow:hidden;background:rgba(255,255,255,.06);display:grid;place-items:center;border:1px solid var(--line)}
    .foot{margin-top:14px;display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;color:var(--muted);font-size:12px}
  
    /* Mobile/touch reliability */
    .chatlog{ -webkit-overflow-scrolling: touch; }
    input, button, select{ -webkit-tap-highlight-color: transparent; touch-action: manipulation; }
    .composer{ position: sticky; bottom: 0; z-index: 20; }
    .composer input{ pointer-events: auto; }

  </style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="brand">
      <div class="logo" aria-label="QCH Logo Placeholder">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M14.8 4.2c-3.1 1.1-5.3 4.1-5.3 7.6s2.2 6.5 5.3 7.6c-1 .4-2.1.6-3.3.6-4.6 0-8.3-3.7-8.3-8.2S6.9 3 11.5 3c1.2 0 2.3.2 3.3.6z" fill="rgba(255,255,255,.92)"/>
          <path d="M19 9.5h-1.8V7.7h-1.4v1.8H14v1.4h1.8v1.8h1.4v-1.8H19V9.5z" fill="rgba(255,255,255,.92)"/>
        </svg>
      </div>
      <div class="title">
        <h1>Qatif Central Hospital â€“ Smart Ramadan Medication Assistant</h1>
        <p>Pharmacy Department â€¢ Patient-focused â€¢ Arabic / English</p>
      </div>
    </div>

    <div class="controls">
      <div class="pill">
        <span class="small">Language</span>
        <select id="lang">
          <option value="both" selected>Arabic + English</option>
          <option value="ar">Arabic only</option>
          <option value="en">English only</option>
        </select>
      </div>
      <div class="pill">
        <span class="small">Mode</span>
        <select id="mode">
          <option value="patient" selected>Patient</option>
          <option value="hcp">Healthcare staff</option>
        </select>
      </div>
      <button id="reset">Reset</button>
    </div>
  </header>

  <div class="grid">
    <section class="card chat" aria-label="Chatbot">
      <div class="hd">
        <h2>Chat</h2>
        <span class="badge">Ramadan 2026 â€¢ v1.0</span>
      </div>
      <div class="chatlog" id="chatlog" role="log" aria-live="polite"></div>

      <div class="bd">
        <div class="quick" id="quick"></div>
      </div>

      <div class="composer">
        <input id="input" type="text" inputmode="text" autocapitalize="off" autocorrect="off" placeholder="Type medication nameâ€¦ / Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡â€¦" autocomplete="off" />
        <button id="send">Send</button>
      </div>
    </section>

    <aside class="card" aria-label="Safety and QR">
      <div class="hd">
        <h2>Safety & Quick Access</h2>
        <span class="badge">No PHI stored</span>
      </div>
      <div class="bd">
        <div class="disclaimer">
          <b>Important:</b> This assistant provides general guidance and does not replace your doctor or pharmacist.
          If you have <b>pregnancy</b>, <b>kidney/liver disease</b>, <b>insulin use</b>, <b>warfarin</b>, <b>transplant</b>,
          or complex regimens, consult a healthcare professional before changing doses.
        </div>

        <div class="divider"></div>

        <div class="qr">
          <div id="qrcode" aria-label="QR Code">
            <span class="small">QR appears<br/>when hosted</span>
          </div>
          <div>
            <div style="font-weight:600;margin-bottom:6px;">QR Code</div>
            <div class="small">When hosted, QR auto-generates from the page URL.</div>
            <div class="small mono" id="urlbox" style="margin-top:6px;"></div>
          </div>
        </div>

        <div class="divider"></div>

        <div class="small">
          <b>Tip:</b> Type: <span class="mono">warfarin</span>, <span class="mono">omeprazole</span>, <span class="mono">metformin</span>,
          <span class="mono">augmentin</span>, <span class="mono">prednisolone</span>, <span class="mono">empagliflozin</span>.
        </div>

        <div class="foot">
          <span>Created by <b>Ali Alsada</b></span>
          <span>Pharmacy Department â€¢ QCH</span>
        </div>
      </div>
    </aside>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>

<script>
const ui = {
  chatlog: document.getElementById('chatlog'),
  input: document.getElementById('input'),
  send: document.getElementById('send'),
  reset: document.getElementById('reset'),
  lang: document.getElementById('lang'),
  mode: document.getElementById('mode'),
  quick: document.getElementById('quick'),
  qrcode: document.getElementById('qrcode'),
  urlbox: document.getElementById('urlbox'),
};

const T = {
  hello: {
    ar: "Ù…Ø±Ø­Ø¨Ù‹Ø§ ðŸ‘‹\nØ£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„ØµÙŠØ¯Ù„Ø§Ù†ÙŠ Ù„Ø±Ù…Ø¶Ø§Ù†.\nØ§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡ ÙˆØ³Ø£Ù‚ØªØ±Ø­ Ø£ÙØ¶Ù„ Ø·Ø±ÙŠÙ‚Ø© Ù„Ø¶Ø¨Ø· Ø§Ù„Ø¬Ø±Ø¹Ø§Øª Ø¨ÙŠÙ† Ø§Ù„Ø¥ÙØ·Ø§Ø± ÙˆØ§Ù„Ø³Ø­ÙˆØ±.\n\nðŸ“Œ Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡ (Ù…Ø«Ø§Ù„: ÙˆØ§Ø±ÙØ§Ø±ÙŠÙ† / Ø£ÙˆÙ…ÙŠØ¨Ø±Ø§Ø²ÙˆÙ„ / Ù…ÙŠØªÙÙˆØ±Ù…ÙŠÙ†).",
    en: "Hi ðŸ‘‹\nIâ€™m your Ramadan medication assistant.\nType your medication name and Iâ€™ll suggest safe dose timing between Iftar and Suhoor.\n\nðŸ“Œ Type a medication (e.g., warfarin / omeprazole / metformin)."
  },
  notFound: {
    ar: "Ù„Ù… Ø£Ø¬Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ø¯ÙˆØ§Ø¡ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©.\nâœ… Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¹Ù„Ù…ÙŠ (Generic) Ø£Ùˆ Ø§Ø³Ù… ØªØ¬Ø§Ø±ÙŠ Ù…Ø¹Ø±ÙˆÙ.\nðŸ“© Ø£Ùˆ Ø§ÙƒØªØ¨: (Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ§Ø¡) ÙˆØ³Ø£Ø¹Ø±Ø¶ Ù„Ùƒ Ù†Ù…ÙˆØ°Ø¬Ù‹Ø§ Ù„Ø¶Ù…Ù‘Ù‡.",
    en: "I couldnâ€™t find this medication in the current list.\nâœ… Try the generic name or a common brand.\nðŸ“© Or type: (add medication) and Iâ€™ll show a template to include it."
  },
  addTemplate: {
    ar: "ðŸ“Œ Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ§Ø¡ (Ø§Ù†Ø³Ø®Ù‡ ÙˆØ§Ù…Ù„Ø£Ù‡):\n\nØ§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡:\nØ§Ù„Ø¬Ø±Ø¹Ø©/Ø§Ù„Ù‚ÙˆØ©:\nØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø±Ø§Øª Ø¨Ø§Ù„ÙŠÙˆÙ… (1/2/3/4):\nÙ‡Ù„ ÙŠØ¬Ø¨ Ù…Ø¹ Ø§Ù„Ø·Ø¹Ø§Ù…ØŸ\nÙ‡Ù„ ÙŠØ³Ø¨Ø¨ Ù†Ø¹Ø§Ø³ØŸ\nØªØ­Ø°ÙŠØ±Ø§Øª Ù…Ù‡Ù…Ø© (Ø³ÙƒØ±/ÙˆØ§Ø±ÙØ§Ø±ÙŠÙ†/Ø¶ØºØ·/ÙƒÙ„Ù‰/Ø­Ù…Ù„):\nÙ…Ù„Ø§Ø­Ø¸Ø© Ù„Ø±Ù…Ø¶Ø§Ù† (ÙŠÙØ¶Ù„ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±/Ø§Ù„Ø³Ø­ÙˆØ±/Ø¨ÙŠÙ†Ù‡Ù…Ø§):",
    en: "ðŸ“Œ Add-medication template (copy & fill):\n\nMedication name:\nDose/strength:\nTimes per day (1/2/3/4):\nMust take with food?\nCauses drowsiness?\nKey warnings (diabetes/warfarin/BP/kidney/pregnancy):\nRamadan note (after Iftar / Suhoor / between):"
  }
};

const meds = [
  // =========================
  // ANTICOAGULANTS
  // =========================
  {
    keys: ["warfarin","coumadin","ÙˆØ§Ø±ÙØ§Ø±ÙŠÙ†","ÙƒÙˆÙ…Ø§Ø¯ÙŠÙ†"],
    category: {ar:"Ù…Ø¶Ø§Ø¯ ØªØ®Ø«Ø±", en:"Anticoagulant"},
    fastingBreak: {ar:"Ù„Ø§ ÙŠÙØ·Ø± Ø¹Ø§Ø¯Ø©Ù‹ (Ù‚Ø±Øµ ÙÙ…ÙˆÙŠ).", en:"Does not usually break the fast (oral tablet)."},
    timing: {
      ar: "âœ… Ù…Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø®Ø°Ù‡Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙˆÙ‚Øª ÙŠÙˆÙ…ÙŠÙ‹Ø§.\nâ›” Ù„Ø§ ØªØºÙŠÙ‘Ø± Ø§Ù„Ø¬Ø±Ø¹Ø© Ù…Ù† Ù†ÙØ³Ùƒ.\nðŸ“Œ Ø¥Ø°Ø§ Ù†Ø³ÙŠØª Ø§Ù„Ø¬Ø±Ø¹Ø©: Ø®Ø°Ù‡Ø§ Ø¹Ù†Ø¯ Ø§Ù„ØªØ°ÙƒØ± ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙŠÙˆÙ… Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ÙˆÙ‚Øª Ù…Ù†Ø§Ø³Ø¨Ù‹Ø§ØŒ ÙˆÙ„Ø§ ØªØ¶Ø§Ø¹Ù Ø§Ù„Ø¬Ø±Ø¹Ø©.",
      en: "âœ… Once daily: take after Iftar at the same time every day.\nâ›” Do not adjust the dose on your own.\nðŸ“Œ If missed: take it the same day when remembered if appropriate; do not double-dose."
    },
    alerts: [
      {level:"danger", ar:"ÙˆØ§Ø±ÙØ§Ø±ÙŠÙ† ÙŠØ­ØªØ§Ø¬ Ù…ØªØ§Ø¨Ø¹Ø© INR. Ø±Ø§Ø¬Ø¹ Ø¹ÙŠØ§Ø¯ØªÙƒ/Ù…Ø®ØªØ¨Ø±Ùƒ Ø­Ø³Ø¨ Ø§Ù„Ø®Ø·Ø©.", en:"Warfarin requires INR monitoring. Follow your clinic/lab plan."},
      {level:"warn", ar:"ØªØºÙŠÙ‘Ø± Ù…ÙØ§Ø¬Ø¦ ÙÙŠ Ø§Ù„Ø£ÙƒÙ„ (ÙÙŠØªØ§Ù…ÙŠÙ† K) Ù‚Ø¯ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ INR.", en:"Sudden dietary vitamin K changes can affect INR."},
      {level:"warn", ar:"Ø§Ø³ØªØ´Ø± Ø§Ù„ØµÙŠØ¯Ù„ÙŠ Ù‚Ø¨Ù„ Ø£ÙŠ Ù…Ø¶Ø§Ø¯ Ø­ÙŠÙˆÙŠ/Ù…Ø³ÙƒÙ† Ø¬Ø¯ÙŠØ¯.", en:"Ask your pharmacist before starting new antibiotics or pain meds."}
    ],
    hcp: { ar:"ðŸ§‘â€âš•ï¸ HCP: Ø«Ø¨Ù‘Øª ÙˆÙ‚Øª Ø§Ù„Ø¬Ø±Ø¹Ø© ÙˆØ±Ø§Ù‚Ø¨ INR Ù…Ø¹ Ø£ÙŠ ØªØºÙŠÙŠØ± ØºØ°Ø§Ø¦ÙŠ/Ø¯ÙˆØ§Ø¦ÙŠ.", en:"ðŸ§‘â€âš•ï¸ HCP: Keep dosing time consistent; monitor INR with any diet/drug changes." }
  },
  {
    keys: ["apixaban","eliquis","Ø£Ø¨ÙŠÙƒØ³Ø§Ø¨Ø§Ù†","Ø§Ù„ÙŠÙƒÙˆØ³"],
    category: {ar:"Ù…Ø¶Ø§Ø¯ ØªØ®Ø«Ø± (DOAC)", en:"Anticoagulant (DOAC)"},
    fastingBreak: {ar:"Ù„Ø§ ÙŠÙØ·Ø± (Ù‚Ø±Øµ).", en:"Does not break the fast (tablet)."},
    timing: {
      ar:"âœ… Ù…Ø±ØªÙŠÙ† ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± + Ø¨Ø¹Ø¯ Ø§Ù„Ø³Ø­ÙˆØ± (ÙƒÙ„ 12 Ø³Ø§Ø¹Ø© Ù‚Ø¯Ø± Ø§Ù„Ø¥Ù…ÙƒØ§Ù†).\nðŸ“Œ Ù„Ø§ ØªÙÙˆÙ‘Øª Ø§Ù„Ø¬Ø±Ø¹Ø©.\nâ›” Ù„Ø§ ØªØ¬Ù…Ø¹ Ø§Ù„Ø¬Ø±Ø¹Ø§Øª Ù„ØªØ¹ÙˆÙŠØ¶ Ø§Ù„Ù…Ù†Ø³ÙŠØ©.",
      en:"âœ… Twice daily: after Iftar + after Suhoor (as close to 12 hours apart as possible).\nðŸ“Œ Do not miss doses.\nâ›” Do not double up to make up a missed dose."
    },
    alerts:[{level:"warn", ar:"Ù†Ø²ÙŠÙ/ÙƒØ¯Ù…Ø§Øª ØºÙŠØ± Ù…Ø¹ØªØ§Ø¯Ø© â†’ Ø±Ø§Ø¬Ø¹ ÙÙˆØ±Ù‹Ø§.", en:"Unusual bleeding/bruising â†’ seek advice promptly."}],
    hcp:{ar:"ðŸ§‘â€âš•ï¸ HCP: Ø±Ø§Ø¬Ø¹ ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ÙƒÙ„Ù‰ ÙˆØ§Ù„ØªØ¯Ø§Ø®Ù„Ø§Øª (Ù…Ø«Ø¨Ø·Ø§Øª/Ù…Ø­ÙØ²Ø§Øª CYP/P-gp) Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„.", en:"ðŸ§‘â€âš•ï¸ HCP: Review renal function and interactions (CYP/P-gp) per protocol."}
  },
  {
    keys: ["rivaroxaban","xarelto","Ø±ÙŠÙØ§Ø±ÙˆÙƒØ³Ø§Ø¨Ø§Ù†","Ø²Ø§Ø±Ù„ØªÙˆ"],
    category: {ar:"Ù…Ø¶Ø§Ø¯ ØªØ®Ø«Ø± (DOAC)", en:"Anticoagulant (DOAC)"},
    fastingBreak: {ar:"Ù„Ø§ ÙŠÙØ·Ø± (Ù‚Ø±Øµ).", en:"Does not break the fast (tablet)."},
    timing: {
      ar:"âœ… Ù…Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±.\nðŸ½ï¸ Ø¨Ø¹Ø¶ Ø§Ù„Ø¬Ø±Ø¹Ø§Øª ÙŠØ¬Ø¨ Ø£Ù† ØªØ¤Ø®Ø° Ù…Ø¹ Ø§Ù„Ø·Ø¹Ø§Ù… (Ù…Ø«Ù„ 15/20mg) â€” Ø§ØªØ¨Ø¹ ÙˆØµÙÙƒ.\nðŸ“Œ Ù„Ø§ ØªØ¶Ø§Ø¹Ù Ø§Ù„Ø¬Ø±Ø¹Ø© Ø¥Ø°Ø§ Ù†Ø³ÙŠØª.",
      en:"âœ… Once daily: after Iftar.\nðŸ½ï¸ Some doses must be taken with food (e.g., 15/20 mg) â€” follow your prescription.\nðŸ“Œ Do not double-dose if missed."
    },
    alerts:[{level:"warn", ar:"Ù†Ø²ÙŠÙ/Ø¨Ø±Ø§Ø² Ø£Ø³ÙˆØ¯/Ù‚ÙŠØ¡ Ø¯Ù…ÙˆÙŠ â†’ Ø·ÙˆØ§Ø±Ø¦.", en:"Bleeding/black stools/vomiting blood â†’ emergency."}]
  },

  // =========================
  // ANTIPLATELETS
  // =========================
  {
    keys: ["aspirin","asa","Ø¨Ø±ÙˆÙÙŠÙ†ØŸ","Ø£Ø³Ø¨Ø±ÙŠÙ†","Ø§Ø³Ø¨Ø±ÙŠÙ†","ec aspirin"],
    category: {ar:"Ù…Ø¶Ø§Ø¯ ØµÙØ§Ø¦Ø­", en:"Antiplatelet"},
    fastingBreak: {ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing: { ar:"âœ… Ù…Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± (ÙŠÙØ¶Ù„ Ù…Ø¹ Ø§Ù„Ø·Ø¹Ø§Ù… Ø¥Ø°Ø§ Ø³Ø¨Ø¨ ØªÙ‡ÙŠÙ‘Ø¬ Ù…Ø¹Ø¯Ø©).", en:"âœ… Once daily: after Iftar (prefer with food if stomach irritation)." },
    alerts:[{level:"warn", ar:"ØªØ§Ø±ÙŠØ® Ù‚Ø±Ø­Ø©/Ù†Ø²ÙŠÙ Ù…Ø¹Ø¯Ø©: Ø§Ø³ØªØ´Ø± Ø§Ù„Ø·Ø¨ÙŠØ¨ ÙˆÙ‚Ø¯ ØªØ­ØªØ§Ø¬ ÙˆØ§Ù‚ÙŠ Ù…Ø¹Ø¯Ø©.", en:"History of ulcer/GI bleed: consult; you may need gastroprotection."}]
  },
  {
    keys: ["clopidogrel","plavix","ÙƒÙ„ÙˆØ¨ÙŠØ¯ÙˆÙ‚Ø±ÙŠÙ„","Ø¨Ù„Ø§ÙÙŠÙƒØ³"],
    category: {ar:"Ù…Ø¶Ø§Ø¯ ØµÙØ§Ø¦Ø­", en:"Antiplatelet"},
    fastingBreak: {ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing: { ar:"âœ… Ù…Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± (Ù†ÙØ³ Ø§Ù„ÙˆÙ‚Øª ÙŠÙˆÙ…ÙŠÙ‹Ø§).", en:"âœ… Once daily: after Iftar (same time daily)." },
    alerts:[{level:"warn", ar:"Ù„Ø§ ØªÙˆÙ‚ÙÙ‡ Ø¨Ø¯ÙˆÙ† Ø·Ø¨ÙŠØ¨ Ø®ØµÙˆØµÙ‹Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ù‚Ø³Ø·Ø±Ø©/Ø§Ù„Ø¯Ø¹Ø§Ù…Ø©.", en:"Do not stop without clinician advice, especially after stent/PCI."}]
  },

  // =========================
  // BLOOD PRESSURE / HEART
  // =========================
  {
    keys: ["amlodipine","norvasc","Ø£Ù…Ù„ÙˆØ¯ÙŠØ¨ÙŠÙ†","Ù†ÙˆØ±ÙØ§Ø³Ùƒ"],
    category: {ar:"Ø¶ØºØ·/Ù‚Ù„Ø¨ (CCB)", en:"BP/Heart (CCB)"},
    fastingBreak: {ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âœ… Ù…Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ø£Ùˆ Ø¨Ø¹Ø¯ Ø§Ù„Ø³Ø­ÙˆØ± (Ø§Ø®ØªØ± ÙˆÙ‚Øª Ø«Ø§Ø¨Øª).", en:"âœ… Once daily: after Iftar or after Suhoor (keep a consistent time)."},
    alerts:[{level:"warn", ar:"Ø¯ÙˆØ®Ø©/Ù‡Ø¨ÙˆØ· Ø¶ØºØ·: Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø·Ø¨ÙŠØ¨ Ù„Ø¶Ø¨Ø· Ø§Ù„Ø¬Ø±Ø¹Ø©.", en:"Dizziness/low BP: consult for dose adjustment."}]
  },
  {
    keys: ["enalapril","lisinopril","ramipril","perindopril","captopril","ace inhibitor","Ø§Ù†Ø§Ù„Ø§Ø¨Ø±ÙŠÙ„","Ù„ÙŠØ²ÙŠÙ†ÙˆØ¨Ø±ÙŠÙ„","Ø±Ø§Ù…ÙŠØ¨Ø±ÙŠÙ„","Ø¨ÙŠØ±ÙŠÙ†Ø¯ÙˆØ¨Ø±ÙŠÙ„","ÙƒØ§Ø¨ØªÙˆØ¨Ø±ÙŠÙ„"],
    category:{ar:"Ø¶ØºØ·/Ù‚Ù„Ø¨ (ACEi)", en:"BP/Heart (ACE inhibitor)"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âœ… Ù…Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±.\nØ¥Ø°Ø§ Ù…Ø±ØªÙŠÙ†: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± + Ø¨Ø¹Ø¯ Ø§Ù„Ø³Ø­ÙˆØ±.", en:"âœ… Once daily: after Iftar.\nIf twice daily: after Iftar + after Suhoor."},
    alerts:[
      {level:"warn", ar:"Ø±Ø§Ù‚Ø¨ Ø§Ù„Ø¯ÙˆØ®Ø©/Ø§Ù„ÙƒØ­Ø©/Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø¨ÙˆØªØ§Ø³ÙŠÙˆÙ… Ø®Ø§ØµØ© Ù…Ø¹ Ø§Ù„Ù‚ØµÙˆØ± Ø§Ù„ÙƒÙ„ÙˆÙŠ.", en:"Watch dizziness/cough/high potassium, especially with kidney disease."}
    ]
  },
  {
    keys: ["losartan","valsartan","candesartan","irbesartan","telmisartan","arb","Ù„ÙˆØ³Ø§Ø±ØªØ§Ù†","ÙØ§Ù„Ø³Ø§Ø±ØªØ§Ù†","ÙƒØ§Ù†Ø¯ÙŠØ³Ø§Ø±ØªØ§Ù†","Ø§ÙŠØ±Ø¨ÙŠØ³Ø§Ø±ØªØ§Ù†","ØªÙ„Ù…ÙŠØ³Ø§Ø±ØªØ§Ù†"],
    category:{ar:"Ø¶ØºØ·/Ù‚Ù„Ø¨ (ARB)", en:"BP/Heart (ARB)"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âœ… Ù…Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±.\nØ¥Ø°Ø§ Ù…Ø±ØªÙŠÙ†: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± + Ø¨Ø¹Ø¯ Ø§Ù„Ø³Ø­ÙˆØ±.", en:"âœ… Once daily: after Iftar.\nIf twice daily: after Iftar + after Suhoor."},
    alerts:[{level:"warn", ar:"Ø±Ø§Ù‚Ø¨ Ø§Ù„Ø¶ØºØ· ÙˆØ§Ù„Ø¨ÙˆØªØ§Ø³ÙŠÙˆÙ… Ø®ØµÙˆØµÙ‹Ø§ Ù…Ø¹ Ù…Ø¯Ø±Ø§Øª Ø§Ù„Ø¨ÙˆÙ„/Ù‚ØµÙˆØ± ÙƒÙ„ÙˆÙŠ.", en:"Monitor BP and potassium, especially with diuretics/renal impairment."}]
  },
  {
    keys: ["bisoprolol","metoprolol","carvedilol","atenolol","beta blocker","Ø¨ÙŠØ³ÙˆØ¨Ø±ÙˆÙ„ÙˆÙ„","Ù…ÙŠØªÙˆØ¨Ø±ÙˆÙ„ÙˆÙ„","ÙƒØ§Ø±ÙÙŠØ¯ÙŠÙ„ÙˆÙ„","Ø§ØªÙŠÙ†ÙˆÙ„ÙˆÙ„"],
    category:{ar:"Ù‚Ù„Ø¨ (Ø­Ø§ØµØ± Ø¨ÙŠØªØ§)", en:"Heart (Beta-blocker)"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âœ… Ù…Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±.\nØ¥Ø°Ø§ Ù…Ø±ØªÙŠÙ†: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± + Ø¨Ø¹Ø¯ Ø§Ù„Ø³Ø­ÙˆØ±.\nðŸ“Œ Ù„Ø§ ØªÙˆÙ‚ÙÙ‡ ÙØ¬Ø£Ø©.", en:"âœ… Once daily: after Iftar.\nIf twice daily: after Iftar + after Suhoor.\nðŸ“Œ Do not stop abruptly."},
    alerts:[{level:"warn", ar:"Ù‚Ø¯ ÙŠØ®ÙÙŠ Ø£Ø¹Ø±Ø§Ø¶ Ù‡Ø¨ÙˆØ· Ø§Ù„Ø³ÙƒØ± Ù„Ø¯Ù‰ Ù…Ø±Ø¶Ù‰ Ø§Ù„Ø³ÙƒØ±ÙŠ.", en:"May mask low-blood-sugar symptoms in diabetes."}]
  },
  {
    keys: ["furosemide","lasix","hydrochlorothiazide","hct","indapamide","spironolactone","eplerenone","diuretic","ÙØ±ÙˆØ³ÙŠÙ…Ø§ÙŠØ¯","Ù„Ø§Ø²ÙŠÙƒØ³","Ù‡ÙŠØ¯Ø±ÙˆÙƒÙ„ÙˆØ±ÙˆØ«ÙŠØ§Ø²Ø§ÙŠØ¯","Ø§ÙŠÙ†Ø¯Ø§Ø¨Ø§Ù…ÙŠØ¯","Ø³Ø¨ÙŠØ±ÙˆÙ†ÙˆÙ„Ø§ÙƒØªÙˆÙ†","Ù…Ø¯Ø± Ø¨ÙˆÙ„"],
    category:{ar:"Ù…Ø¯Ø±Ù‘Ø§Øª Ø¨ÙˆÙ„", en:"Diuretics"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{
      ar:"âœ… Ø§Ù„Ø£ÙØ¶Ù„: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ù…Ø¨ÙƒØ±Ù‹Ø§ (Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ØªØ¨ÙˆÙ„ Ù„ÙŠÙ„Ù‹Ø§).\nðŸ’§ Ø§Ù†ØªØ¨Ù‡ Ù„Ù„Ø¬ÙØ§Ù ÙˆØ§Ù„Ø¯ÙˆØ®Ø©.\nâ›” Ø¥Ø°Ø§ Ù„Ø¯ÙŠÙƒ ÙØ´Ù„ ÙƒÙ„ÙˆÙŠ/Ù‡Ø¨ÙˆØ· Ø¶ØºØ· Ù…ØªÙƒØ±Ø±: Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø·Ø¨ÙŠØ¨ Ù‚Ø¨Ù„ Ø§Ù„ØµÙŠØ§Ù….",
      en:"âœ… Best: early after Iftar (to reduce nighttime urination).\nðŸ’§ Watch for dehydration/dizziness.\nâ›” Kidney failure or recurrent low BP: consult before fasting."
    },
    alerts:[{level:"warn", ar:"Ø£Ø¹Ø±Ø§Ø¶ Ø¬ÙØ§Ù/Ù‡Ø¨ÙˆØ· Ø´Ø¯ÙŠØ¯ â†’ ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø·Ø¨ÙŠØ¨.", en:"Severe dehydration/low BP symptoms â†’ contact clinician."}]
  },

  // =========================
  // LIPIDS
  // =========================
  {
    keys:["atorvastatin","rosuvastatin","simvastatin","pravastatin","statin","Ø£ØªÙˆØ±ÙØ§Ø³ØªØ§ØªÙŠÙ†","Ø±ÙˆØ³ÙˆÙØ§Ø³ØªØ§ØªÙŠÙ†","Ø³ÙŠÙ…ÙØ§Ø³ØªØ§ØªÙŠÙ†","Ø³ØªØ§ØªÙŠÙ†"],
    category:{ar:"ÙƒÙˆÙ„ÙŠØ³ØªØ±ÙˆÙ„ (Ø³ØªØ§ØªÙŠÙ†)", en:"Cholesterol (Statin)"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âœ… Ù…Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± (Ù…Ø³Ø§Ø¡Ù‹).", en:"âœ… Once daily: after Iftar (evening)."},
    alerts:[{level:"warn", ar:"Ø£Ù„Ù… Ø¹Ø¶Ù„Ø§Øª Ø´Ø¯ÙŠØ¯/Ø¨ÙˆÙ„ ØºØ§Ù…Ù‚ â†’ Ø±Ø§Ø¬Ø¹ ÙÙˆØ±Ù‹Ø§.", en:"Severe muscle pain/dark urine â†’ seek advice."}]
  },

  // =========================
  // THYROID
  // =========================
  {
    keys:["levothyroxine","eltroxin","euthyrox","thyroxine","Ù„ÙŠÙÙˆØ«ÙŠØ±ÙˆÙƒØ³ÙŠÙ†","Ø§Ù„Ø«ÙŠØ±ÙˆÙƒØ³ÙŠÙ†","ÙŠÙˆØªÙŠØ±ÙˆÙƒØ³","Ø¥Ù„ØªØ±ÙˆÙƒØ³ÙŠÙ†"],
    category:{ar:"Ø§Ù„ØºØ¯Ø© Ø§Ù„Ø¯Ø±Ù‚ÙŠØ©", en:"Thyroid"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{
      ar:"âœ… Ø§Ù„Ø£ÙØ¶Ù„: Ù‚Ø¨Ù„ Ø§Ù„Ø³Ø­ÙˆØ± Ø¨Ù€ 30â€“60 Ø¯Ù‚ÙŠÙ‚Ø© Ø¹Ù„Ù‰ Ù…Ø¹Ø¯Ø© ÙØ§Ø±ØºØ© Ù…Ø¹ Ù…Ø§Ø¡ ÙÙ‚Ø·.\nðŸ“Œ Ø§ØªØ±Ùƒ ÙØ§ØµÙ„ 4 Ø³Ø§Ø¹Ø§Øª Ø¹Ù† Ø§Ù„Ø­Ø¯ÙŠØ¯/Ø§Ù„ÙƒØ§Ù„Ø³ÙŠÙˆÙ….",
      en:"âœ… Best: 30â€“60 minutes before Suhoor on an empty stomach with water only.\nðŸ“Œ Separate from iron/calcium by ~4 hours."
    },
    alerts:[{level:"warn", ar:"Ø«Ø¨Ù‘Øª Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§ Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø§Ù…ØªØµØ§Øµ.", en:"Keep the same routine daily to optimize absorption."}]
  },

  // =========================
  // GI
  // =========================
  {
    keys: ["omeprazole","pantoprazole","esomeprazole","lansoprazole","ppi","Ø£ÙˆÙ…ÙŠØ¨Ø±Ø§Ø²ÙˆÙ„","Ø¨Ø§Ù†ØªÙˆØ¨Ø±Ø§Ø²ÙˆÙ„","Ø¥ÙŠØ²ÙˆÙ…ÙŠØ¨Ø±Ø§Ø²ÙˆÙ„","Ù„Ø§Ù†Ø³ÙˆØ¨Ø±Ø§Ø²ÙˆÙ„","Ø­Ø¨Ø© Ø§Ù„Ù…Ø¹Ø¯Ø©"],
    category:{ar:"Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ù…Ø¹Ø¯Ø© (PPI)", en:"Gastric acid suppression (PPI)"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø± (Ù‚Ø±Øµ/ÙƒØ¨Ø³ÙˆÙ„Ø©).", en:"Does not break the fast (tablet/capsule)."},
    timing:{ar:"âœ… Ø§Ù„Ø£ÙØ¶Ù„: Ù‚Ø¨Ù„ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ø¨Ù€ 30â€“60 Ø¯Ù‚ÙŠÙ‚Ø©.\nØ¨Ø¯ÙŠÙ„: Ù‚Ø¨Ù„ Ø§Ù„Ø³Ø­ÙˆØ± Ø¨Ù€ 30â€“60 Ø¯Ù‚ÙŠÙ‚Ø©.\nðŸ“Œ Ø¥Ø°Ø§ Ù…Ø±ØªÙŠÙ† ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ù‚Ø¨Ù„ Ø§Ù„Ø¥ÙØ·Ø§Ø± ÙˆÙ‚Ø¨Ù„ Ø§Ù„Ø³Ø­ÙˆØ±.", en:"âœ… Best: 30â€“60 min before Iftar.\nAlternative: 30â€“60 min before Suhoor.\nðŸ“Œ If BID: before Iftar and before Suhoor."},
    alerts:[{level:"ok", ar:"Ù…ÙÙŠØ¯ Ù„Ù„Ø§Ø±ØªØ¬Ø§Ø¹ Ø®ØµÙˆØµÙ‹Ø§ Ù…Ø¹ Ø§Ù„ÙˆØ¬Ø¨Ø§Øª Ø§Ù„Ø«Ù‚ÙŠÙ„Ø©.", en:"Helpful for reflux, especially with heavy meals."}]
  },
  {
    keys:["famotidine","antacid","gaviscon","maalox","ÙØ§Ù…ÙˆØªÙŠØ¯ÙŠÙ†","Ù…Ø¶Ø§Ø¯ Ø­Ù…ÙˆØ¶Ø©","Ø¬Ø§ÙÙŠØ³ÙƒÙˆÙ†","Ù…Ø§Ù„ÙˆÙƒØ³","Ø­Ù…ÙˆØ¶Ø©"],
    category:{ar:"Ø­Ù…ÙˆØ¶Ø©/Ù…Ø¶Ø§Ø¯ Ù…Ø³ØªÙ‚Ø¨Ù„Ø§Øª H2 Ø£Ùˆ Ù…Ø¶Ø§Ø¯ Ø­Ù…ÙˆØ¶Ø©", en:"H2 blocker / Antacid"},
    fastingBreak:{ar:"Ø¹Ø§Ø¯Ø© Ù„Ø§ ÙŠÙØ·Ø±.", en:"Usually does not break the fast."},
    timing:{ar:"âœ… Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±.\nðŸ“Œ Ø§ØªØ±Ùƒ ÙØ§ØµÙ„ Ø³Ø§Ø¹ØªÙŠÙ† Ø¹Ù† Ø§Ù„Ø­Ø¯ÙŠØ¯/Ù„ÙŠÙÙˆØ«ÙŠØ±ÙˆÙƒØ³ÙŠÙ† Ø­Ø³Ø¨ Ø§Ù„Ø¥Ø±Ø´Ø§Ø¯.", en:"âœ… As needed after Iftar.\nðŸ“Œ Separate ~2 hours from iron/levothyroxine if advised."},
    alerts:[{level:"warn", ar:"Ø¥Ø°Ø§ Ø£Ø¹Ø±Ø§Ø¶ Ø¥Ù†Ø°Ø§Ø± (Ù‚ÙŠØ¡ Ø¯Ù…ÙˆÙŠ/Ø¨Ø±Ø§Ø² Ø£Ø³ÙˆØ¯) â†’ Ø·ÙˆØ§Ø±Ø¦.", en:"Alarm symptoms (vomiting blood/black stools) â†’ emergency."}]
  },
  {
    keys:["lactulose","movicol","macrogol","senna","bisacodyl","constipation","Ù„Ø§ÙƒØªÙˆÙ„ÙˆØ²","Ù…ÙˆÙÙŠÙƒÙˆÙ„","Ù…Ø§ÙƒØ±ÙˆØ¬ÙˆÙ„","Ø³ÙŠÙ†Ø§","Ø¨ÙŠØ³Ø§ÙƒÙˆØ¯ÙŠÙ„","Ø¥Ù…Ø³Ø§Ùƒ"],
    category:{ar:"Ø¥Ù…Ø³Ø§Ùƒ/Ù…Ù„ÙŠÙ†", en:"Constipation/Laxative"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø± Ø¹Ø§Ø¯Ø©Ù‹.", en:"Usually does not break the fast."},
    timing:{ar:"âœ… Ø£ÙØ¶Ù„ ÙˆÙ‚Øª: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± (Ù…Ø¹ Ø³ÙˆØ§Ø¦Ù„) Ø£Ùˆ Ù‚Ø¨Ù„ Ø§Ù„Ù†ÙˆÙ….\nðŸ’§ Ø²Ø¯ Ø§Ù„Ø³ÙˆØ§Ø¦Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø¥ÙØ·Ø§Ø± ÙˆØ§Ù„Ø³Ø­ÙˆØ±.", en:"âœ… Best: after Iftar (with fluids) or bedtime.\nðŸ’§ Increase fluids between Iftar and Suhoor."},
    alerts:[{level:"warn", ar:"Ø¥Ø³Ù‡Ø§Ù„ Ø´Ø¯ÙŠØ¯/Ø¬ÙØ§Ù â†’ Ø£ÙˆÙ‚Ù Ù…Ø¤Ù‚ØªÙ‹Ø§ ÙˆØ±Ø§Ø¬Ø¹.", en:"Severe diarrhea/dehydration â†’ hold and seek advice."}]
  },

  // =========================
  // DIABETES (ORAL + INJECTABLE)
  // =========================
  {
    keys:["metformin","glucophage","Ù…ÙŠØªÙÙˆØ±Ù…ÙŠÙ†","Ø¬Ù„ÙˆÙƒÙˆÙØ§Ø¬"],
    category:{ar:"Ø§Ù„Ø³ÙƒØ± â€“ Ù…ÙŠØªÙÙˆØ±Ù…ÙŠÙ†", en:"Diabetes â€“ Metformin"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{
      ar:"âœ… Ù…Ø±ØªÙŠÙ† ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± + Ø¨Ø¹Ø¯ Ø§Ù„Ø³Ø­ÙˆØ± (ÙŠÙØ¶Ù„ Ù…Ø¹ Ø§Ù„Ø·Ø¹Ø§Ù…).\nâœ… XR Ù…Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ù…Ø¹ Ø§Ù„ÙˆØ¬Ø¨Ø©.",
      en:"âœ… BID: after Iftar + after Suhoor (with food).\nâœ… XR once daily: after Iftar with meal."
    },
    alerts:[{level:"warn", ar:"Ù…Ø±Ø¶ ÙƒÙ„ÙˆÙŠ/Ø¬ÙØ§Ù: Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø·Ø¨ÙŠØ¨ Ø¥Ø°Ø§ Ù…Ø±Ø¶ Ø­Ø§Ø¯/Ù‚ÙŠØ¡/Ø¥Ø³Ù‡Ø§Ù„ Ø´Ø¯ÙŠØ¯.", en:"Kidney disease/dehydration: seek advice with acute illness or severe vomiting/diarrhea."}]
  },
  {
    keys:["sitagliptin","linagliptin","vildagliptin","dpp4","Ø³ÙŠØªØ§Ø¬Ù„ÙŠØ¨ØªÙŠÙ†","Ù„ÙŠÙ†Ø§Ø¬Ù„ÙŠØ¨ØªÙŠÙ†","ÙÙŠÙ„Ø¯Ø§Ø¬Ù„ÙŠØ¨ØªÙŠÙ†"],
    category:{ar:"Ø§Ù„Ø³ÙƒØ± â€“ DPP-4", en:"Diabetes â€“ DPP-4 inhibitor"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âœ… Ù…Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±.", en:"âœ… Once daily: after Iftar."},
    alerts:[{level:"ok", ar:"Ø®Ø·Ø± Ù‡Ø¨ÙˆØ· Ø§Ù„Ø³ÙƒØ± Ù…Ù†Ø®ÙØ¶ Ø¹Ø§Ø¯Ø©Ù‹ Ø¹Ù†Ø¯ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ ÙˆØ­Ø¯Ù‡.", en:"Low hypoglycemia risk when used alone."}]
  },
  {
    keys:["gliclazide","glimepiride","sulfonylurea","ØºÙ„ÙŠÙƒÙ„Ø§Ø²Ø§ÙŠØ¯","Ø¬Ù„ÙŠÙ…ÙŠØ¨Ø±Ø§ÙŠØ¯","Ø¯Ø§ÙŠÙ…ÙƒØ±ÙˆÙ†"],
    category:{ar:"Ø§Ù„Ø³ÙƒØ± â€“ Ø³Ù„ÙÙˆÙ†ÙŠÙ„ ÙŠÙˆØ±ÙŠØ§", en:"Diabetes â€“ Sulfonylurea"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âš  ØºØ§Ù„Ø¨Ù‹Ø§ Ù…Ø¹ ÙˆØ¬Ø¨Ø© Ø§Ù„Ø¥ÙØ·Ø§Ø± (Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±).\nâ›” Ù„Ø§ ØªØ¹Ø¯Ù‘Ù„ Ø§Ù„Ø¬Ø±Ø¹Ø© Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø·Ø¨ÙŠØ¨ Ø¨Ø³Ø¨Ø¨ Ø®Ø·Ø± Ù‡Ø¨ÙˆØ· Ø§Ù„Ø³ÙƒØ±.", en:"âš  Often with Iftar meal.\nâ›” Do not change dose without clinician due to hypoglycemia risk."},
    alerts:[{level:"danger", ar:"Ø®Ø·Ø± Ù‡Ø¨ÙˆØ· Ø³ÙƒØ± Ø£Ø¹Ù„Ù‰ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØµÙŠØ§Ù….", en:"Higher hypoglycemia risk during fasting."}]
  },
  {
    keys:["empagliflozin","dapagliflozin","canagliflozin","sglt2","Ø¥Ù…Ø¨Ø§ØºÙ„ÙŠÙÙ„ÙˆØ²ÙŠÙ†","Ø§Ù…Ø¨Ø§ØºÙ„ÙŠÙÙ„ÙˆØ²ÙŠÙ†","Ø¬Ø§Ø±Ø¯ÙŠÙ†Ø³","Ø¯Ø§Ø¨Ø§ØºÙ„ÙŠÙÙ„ÙˆØ²ÙŠÙ†"],
    category:{ar:"Ø§Ù„Ø³ÙƒØ± â€“ SGLT2", en:"Diabetes â€“ SGLT2 inhibitor"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âœ… Ù…Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±.\nðŸ’§ Ø§Ø´Ø±Ø¨ Ø³ÙˆØ§Ø¦Ù„ ÙƒØ§ÙÙŠØ© Ø¨ÙŠÙ† Ø§Ù„Ø¥ÙØ·Ø§Ø± ÙˆØ§Ù„Ø³Ø­ÙˆØ±.", en:"âœ… Once daily: after Iftar.\nðŸ’§ Maintain good hydration between Iftar and Suhoor."},
    alerts:[{level:"warn", ar:"Ø®Ø·Ø± Ø§Ù„Ø¬ÙØ§Ù/Ø§Ù„ØªÙ‡Ø§Ø¨ Ø¨ÙˆÙ„ÙŠ. Ø£ÙˆÙ‚Ù ÙˆØ±Ø§Ø¬Ø¹ Ø¹Ù†Ø¯ Ù…Ø±Ø¶ Ø­Ø§Ø¯.", en:"Dehydration/UTI risk. Hold and seek advice during acute illness."}]
  },
  {
    keys:["semaglutide","liraglutide","dulaglutide","glp-1","ozempic","victoza","trulicity","Ø³ÙŠÙ…Ø§Ø¬Ù„ÙˆØªØ§ÙŠØ¯","Ù„ÙŠØ±Ø§Ø¬Ù„ÙˆØªØ§ÙŠØ¯","Ø¯ÙˆÙ„Ø§Ø¬Ù„ÙˆØªØ§ÙŠØ¯","Ø£ÙˆØ²ÙŠÙ…Ø¨Ùƒ","ÙÙŠÙƒØªÙˆØ²Ø§","ØªØ±ÙˆÙ„ÙŠØ³ÙŠØªÙŠ"],
    category:{ar:"Ø§Ù„Ø³ÙƒØ± â€“ GLP-1 Ø­Ù‚Ù† Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©/ÙŠÙˆÙ…ÙŠØ©", en:"Diabetes â€“ GLP-1 (injectable)"},
    fastingBreak:{ar:"Ø§Ù„Ø­Ù‚Ù† Ù„Ø§ ØªÙØ·Ø± Ø¹Ø§Ø¯Ø©Ù‹ØŒ Ù„ÙƒÙ† Ø§ØªØ¨Ø¹ Ø§Ù„Ø¥Ø±Ø´Ø§Ø¯ Ø§Ù„Ù…Ø­Ù„ÙŠ/Ø§Ù„Ø¯ÙŠÙ†ÙŠ.", en:"Injections usually do not break the fast; follow local guidance."},
    timing:{ar:"âœ… Ø§Ø³ØªÙ…Ø± Ø­Ø³Ø¨ Ø§Ù„Ø¬Ø¯ÙˆÙ„ (ÙŠÙˆÙ…ÙŠ/Ø£Ø³Ø¨ÙˆØ¹ÙŠ).\nðŸ“Œ Ø¥Ø°Ø§ ØºØ«ÙŠØ§Ù† Ø´Ø¯ÙŠØ¯/Ù‚Ù„Ø© Ø³ÙˆØ§Ø¦Ù„: Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø·Ø¨ÙŠØ¨.", en:"âœ… Continue as scheduled (daily/weekly).\nðŸ“Œ If severe nausea/poor intake: consult clinician."},
    alerts:[{level:"warn", ar:"Ù‚Ø¯ ÙŠÙ‚Ù„Ù„ Ø§Ù„Ø´Ù‡ÙŠØ©â€”Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø³ÙˆØ§Ø¦Ù„ ÙƒØ§ÙÙŠØ©.", en:"May reduce appetiteâ€”maintain adequate hydration."}]
  },
  {
    keys:["insulin","lantus","glargine","detemir","degludec","novorapid","aspart","humalog","lispro","mixtard","70/30","Ø§Ù†Ø³ÙˆÙ„ÙŠÙ†","Ø¬Ù„Ø§Ø±Ø¬ÙŠÙ†","Ø¯ÙŠØªÙŠÙ…ÙŠØ±","Ø¯ÙŠØ¬Ù„ÙˆØ¯ÙŠÙƒ","Ù†ÙˆÙÙˆØ±Ø§Ø¨ÙŠØ¯","Ù‡ÙˆÙ…Ø§Ù„ÙˆØ¬","Ù…ÙŠÙƒØ³ØªØ§Ø±Ø¯"],
    category:{ar:"Ø§Ù„Ø³ÙƒØ± â€“ Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ†", en:"Diabetes â€“ Insulin"},
    fastingBreak:{ar:"Ø§Ù„Ø­Ù‚Ù† Ù„Ø§ ØªÙØ·Ø± Ø¹Ø§Ø¯Ø©Ù‹ØŒ Ù„ÙƒÙ† Ø§ØªØ¨Ø¹ Ø§Ù„Ø¥Ø±Ø´Ø§Ø¯ Ø§Ù„Ù…Ø­Ù„ÙŠ/Ø§Ù„Ø¯ÙŠÙ†ÙŠ.", en:"Injections usually do not break the fast; follow local guidance."},
    timing:{
      ar:"âš  Ø§Ù„Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ† ÙŠØ­ØªØ§Ø¬ Ø®Ø·Ø© ÙØ±Ø¯ÙŠØ©.\nâœ… Ø¨Ø´ÙƒÙ„ Ø¹Ø§Ù…: Ø¬Ø±Ø¹Ø§Øª Ø§Ù„ÙˆØ¬Ø¨Ø§Øª ØªÙØ¤Ø®Ø° Ù…Ø¹ Ø§Ù„Ø¥ÙØ·Ø§Ø±/Ø§Ù„Ø³Ø­ÙˆØ±ØŒ ÙˆØ§Ù„Ø¬Ø±Ø¹Ø© Ø§Ù„Ù‚Ø§Ø¹Ø¯ÙŠØ© ØºØ§Ù„Ø¨Ù‹Ø§ Ù…Ø³Ø§Ø¡Ù‹.\nâ›” Ù„Ø§ ØªØºÙŠÙ‘Ø± Ø§Ù„Ø¬Ø±Ø¹Ø© Ø¨Ø¯ÙˆÙ† Ø·Ø¨ÙŠØ¨/ØµÙŠØ¯Ù„ÙŠ.\nðŸ“Œ Ù‡Ø¨ÙˆØ· Ø³ÙƒØ±/ØªØ¹Ø±Ù‚/Ø±Ø¬ÙØ© â†’ Ø§ÙØ·Ø± ÙÙˆØ±Ù‹Ø§ ÙˆØ§ØªØ¨ÙØ¹ Ø®Ø·Ø© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦.",
      en:"âš  Insulin requires an individualized plan.\nâœ… In general: mealtime insulin with Iftar/Suhoor; basal insulin is often in the evening.\nâ›” Do not change doses without clinician/pharmacist.\nðŸ“Œ Hypoglycemia symptoms â†’ break the fast immediately and follow your emergency plan."
    },
    alerts:[{level:"danger", ar:"Ø®Ø·Ø± Ù‡Ø¨ÙˆØ· Ø§Ù„Ø³ÙƒØ± Ø£Ø¹Ù„Ù‰ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØµÙŠØ§Ù…â€”Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø¶Ø±ÙˆØ±ÙŠØ©.", en:"Higher hypoglycemia risk during fastingâ€”close monitoring is essential."}],
    hcp:{ar:"ðŸ§‘â€âš•ï¸ HCP: Ø·Ø¨Ù‘Ù‚ Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„Ø§Øª Ø±Ù…Ø¶Ø§Ù† (ØªØ¹Ø¯ÙŠÙ„ basal/bolusØŒ ØªØ¹Ù„ÙŠÙ… SMBG ÙˆÙ‚ÙˆØ§Ø¹Ø¯ ÙƒØ³Ø± Ø§Ù„ØµÙŠØ§Ù…).", en:"ðŸ§‘â€âš•ï¸ HCP: Apply Ramadan insulin protocols; educate on SMBG and breaking-fast rules."}
  },

  // =========================
  // ANTIBIOTICS
  // =========================
  {
    keys:["amoxicillin","augmentin","amoxiclav","co-amoxiclav","Ø£Ù…ÙˆÙƒØ³ÙŠØ³ÙŠÙ„ÙŠÙ†","Ø£ÙˆØ¬Ù…Ù†ØªÙŠÙ†","Ø§ÙˆØ¬Ù…Ù†ØªÙŠÙ†","Ø§Ù…ÙˆÙƒØ³ÙƒÙ„Ø§Ù","Ø£Ù…ÙˆÙƒØ³ÙŠÙƒÙ„Ø§Ù"],
    category:{ar:"Ù…Ø¶Ø§Ø¯ Ø­ÙŠÙˆÙŠ (BID)", en:"Antibiotic (BID)"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âœ… Ù…Ø±ØªÙŠÙ† ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± + Ø¨Ø¹Ø¯ Ø§Ù„Ø³Ø­ÙˆØ±.\nðŸ“Œ Ø£ÙƒÙ…Ù„ Ù…Ø¯Ø© Ø§Ù„Ø¹Ù„Ø§Ø¬ ÙƒØ§Ù…Ù„Ø©.", en:"âœ… BID: after Iftar + after Suhoor.\nðŸ“Œ Complete full course."},
    alerts:[{level:"warn", ar:"ÙˆØ§Ø±ÙØ§Ø±ÙŠÙ†: Ù‚Ø¯ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ INRâ€”Ø§Ø³ØªØ´Ø± Ø§Ù„ØµÙŠØ¯Ù„ÙŠ.", en:"Warfarin: may affect INRâ€”check with pharmacist."}]
  },
  {
    keys:["ciprofloxacin","levofloxacin","moxifloxacin","quinolone","Ø³ÙŠØ¨Ø±ÙˆÙÙ„ÙˆÙƒØ³Ø§Ø³ÙŠÙ†","Ù„ÙŠÙÙˆÙÙ„ÙˆÙƒØ³Ø§Ø³ÙŠÙ†","Ù…ÙˆÙƒØ³ÙŠÙÙ„ÙˆÙƒØ³Ø§Ø³ÙŠÙ†"],
    category:{ar:"Ù…Ø¶Ø§Ø¯ Ø­ÙŠÙˆÙŠ", en:"Antibiotic"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âœ… ØºØ§Ù„Ø¨Ù‹Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±.\nðŸ“Œ Ø§ØªØ±Ùƒ ÙØ§ØµÙ„ 2â€“4 Ø³Ø§Ø¹Ø§Øª Ø¹Ù† Ø§Ù„Ø­Ø¯ÙŠØ¯/Ø§Ù„ÙƒØ§Ù„Ø³ÙŠÙˆÙ…/Ù…Ø¶Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ù…ÙˆØ¶Ø© Ø­Ø³Ø¨ Ø§Ù„ÙˆØµÙØ©.", en:"âœ… Often after Iftar.\nðŸ“Œ Separate 2â€“4 hours from iron/calcium/antacids per label."},
    alerts:[{level:"warn", ar:"Ø£Ù„Ù… ÙˆØªØ±/ØªÙˆØ±Ù… Ù…ÙØ§Ø¬Ø¦ â†’ Ø£ÙˆÙ‚Ù ÙˆØ±Ø§Ø¬Ø¹.", en:"Tendon pain/swelling â†’ stop and seek advice."}]
  },
  {
    keys:["metronidazole","flagyl","Ù…ÙŠØªØ±ÙˆÙ†ÙŠØ¯Ø§Ø²ÙˆÙ„","ÙÙ„Ø§Ø¬ÙŠÙ„"],
    category:{ar:"Ù…Ø¶Ø§Ø¯ Ø­ÙŠÙˆÙŠ/Ø·ÙÙŠÙ„ÙŠØ§Øª", en:"Antibiotic/Antiprotozoal"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âœ… Ø¥Ø°Ø§ TID: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± + Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„ + Ø¨Ø¹Ø¯ Ø§Ù„Ø³Ø­ÙˆØ± (Ø¥Ø°Ø§ Ø£Ù…ÙƒÙ†).\nâš  Ø¥Ø°Ø§ ØµØ¹Ø¨ØŒ Ø§Ø·Ù„Ø¨ Ø¨Ø¯ÙŠÙ„ BID/OD Ù…Ù† Ø§Ù„Ø·Ø¨ÙŠØ¨.", en:"âœ… If TID: after Iftar + midnight + after Suhoor (if possible).\nâš  If difficult, ask clinician for BID/OD alternative when appropriate."},
    alerts:[{level:"danger", ar:"ØªØ¬Ù†Ø¨ Ø§Ù„ÙƒØ­ÙˆÙ„ ØªÙ…Ø§Ù…Ù‹Ø§ Ù…Ø¹ ÙÙ„Ø§Ø¬ÙŠÙ„.", en:"Avoid alcohol completely with metronidazole."}]
  },
  {
    keys:["add medication","Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ§Ø¡","Ø§Ø¶Ø§ÙØ© Ø¯ÙˆØ§Ø¡","Ø¥Ø¶Ø§ÙÙ‡ Ø¯ÙˆØ§Ø¡"],
    category:{ar:"Ø¥Ø¶Ø§ÙØ©", en:"Add"},
    fastingBreak:{ar:"", en:""},
    timing:{ar:"", en:""},
    alerts:[]
  },

  // =========================
  // RESPIRATORY / ALLERGY
  // =========================
  {
    keys:["salbutamol","albuterol","ventolin","budesonide","symbicort","seretide","inhaler","ÙÙ†ØªÙˆÙ„ÙŠÙ†","Ø³Ø§Ù„Ø¨ÙˆØªØ§Ù…ÙˆÙ„","Ø¨ÙˆØ¯ÙŠØ²ÙˆÙ†ÙŠØ¯","Ø³ÙŠÙ…Ø¨ÙŠÙƒÙˆØ±Øª","Ø³ÙŠØ±ÙŠØªØ§ÙŠØ¯","Ø¨Ø®Ø§Ø®"],
    category:{ar:"Ø§Ù„Ø±Ø¨Ùˆ/Ø¨Ø®Ø§Ø®", en:"Asthma/COPD inhaler"},
    fastingBreak:{ar:"Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨Ø®Ø§Ø® Ù„Ø§ ÙŠÙØ·Ø± Ø¹Ù†Ø¯ ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„ÙØªØ§ÙˆÙ‰ØŒ Ù„ÙƒÙ† Ø§ØªØ¨Ø¹ ØªÙˆØ¬ÙŠÙ‡Ùƒ Ø§Ù„Ù…Ø­Ù„ÙŠ/Ø§Ù„Ø¯ÙŠÙ†ÙŠ.", en:"Many religious opinions consider inhalers not to break the fast; follow local guidance."},
    timing:{ar:"âœ… Ø§Ø³ØªÙ…Ø± Ø¹Ù„Ù‰ Ø¨Ø®Ø§Ø® Ø§Ù„ØªØ­ÙƒÙ… ÙƒÙ…Ø§ ÙˆÙØµÙ.\nâœ… Ø¨Ø®Ø§Ø® Ø§Ù„Ø¥Ø³Ø¹Ø§Ù Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©.\nâš  Ø£Ø¹Ø±Ø§Ø¶ Ø´Ø¯ÙŠØ¯Ø©: Ø·ÙˆØ§Ø±Ø¦.", en:"âœ… Continue controller inhaler as prescribed.\nâœ… Use rescue inhaler as needed.\nâš  Severe symptoms: emergency."},
    alerts:[{level:"warn", ar:"Ù„Ø§ ØªØ¤Ø®Ø± Ø§Ù„Ø¹Ù„Ø§Ø¬ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶ Ø´Ø¯ÙŠØ¯Ø©.", en:"Do not delay treatment if symptoms are severe."}]
  },
  {
    keys:["loratadine","cetirizine","fexofenadine","antihistamine","Ù„ÙˆØ±Ø§ØªØ§Ø¯ÙŠÙ†","Ø³ÙŠØªØ±ÙŠØ²ÙŠÙ†","ÙÙŠÙƒØ³ÙˆÙÙŠÙ†Ø§Ø¯ÙŠÙ†","Ø­Ø³Ø§Ø³ÙŠØ©"],
    category:{ar:"Ø­Ø³Ø§Ø³ÙŠØ©", en:"Allergy"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âœ… Ù…Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±.\nðŸ“Œ Ø¥Ø°Ø§ ÙŠØ³Ø¨Ø¨ Ù†Ø¹Ø§Ø³: Ø®Ø°Ù‡ Ù‚Ø¨Ù„ Ø§Ù„Ù†ÙˆÙ….", en:"âœ… Once daily: after Iftar.\nðŸ“Œ If drowsy: take at bedtime."},
    alerts:[{level:"ok", ar:"Ø§Ø®ØªØ± Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ù‚Ù„ ØªØ³Ø¨Ø¨Ù‹Ø§ Ù„Ù„Ù†Ø¹Ø§Ø³ Ø¥Ø°Ø§ ÙƒÙ†Øª ØªÙ‚ÙˆØ¯.", en:"Choose non-drowsy options if you drive."}]
  },

  // =========================
  // PAIN / FEVER
  // =========================
  {
    keys:["paracetamol","acetaminophen","panadol","Ø¨Ù†Ø§Ø¯ÙˆÙ„","Ø¨Ø§Ø±Ø§Ø³ÙŠØªØ§Ù…ÙˆÙ„","Ø§Ø³ÙŠØªØ§Ù…ÙŠÙ†ÙˆÙÙŠÙ†"],
    category:{ar:"Ù…Ø³ÙƒÙ†/Ø®Ø§ÙØ¶ Ø­Ø±Ø§Ø±Ø©", en:"Analgesic/Antipyretic"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âœ… Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ø£Ùˆ Ø¨ÙŠÙ† Ø§Ù„Ø¥ÙØ·Ø§Ø± ÙˆØ§Ù„Ø³Ø­ÙˆØ±.\nðŸ“Œ Ù„Ø§ ØªØªØ¬Ø§ÙˆØ² 4 Ø¬Ù…/ÙŠÙˆÙ… Ù„Ù„Ø¨Ø§Ù„ØºÙŠÙ† Ø¥Ù„Ø§ Ø¨ØªÙˆØ¬ÙŠÙ‡.", en:"âœ… As needed after Iftar or between Iftar and Suhoor.\nðŸ“Œ Do not exceed 4 g/day in adults unless advised."},
    alerts:[{level:"warn", ar:"Ø§Ù†ØªØ¨Ù‡ Ù„Ù„Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ù…Ø±ÙƒØ¨Ø© Ø§Ù„ØªÙŠ ØªØ­ØªÙˆÙŠ Ø¨Ø§Ø±Ø§Ø³ÙŠØªØ§Ù…ÙˆÙ„.", en:"Watch combination products containing acetaminophen."}]
  },
  {
    keys:["ibuprofen","diclofenac","naproxen","celecoxib","nsaid","Ø§ÙŠØ¨ÙˆØ¨Ø±ÙˆÙÙŠÙ†","Ø¯ÙŠÙƒÙ„ÙˆÙÙŠÙ†Ø§Ùƒ","Ù†Ø§Ø¨Ø±ÙˆÙƒØ³ÙŠÙ†","Ø³ÙŠÙ„ÙŠÙƒÙˆÙƒØ³ÙŠØ¨","Ø¨Ø±ÙˆÙÙŠÙ†"],
    category:{ar:"Ù…Ø³ÙƒÙ† (NSAID)", en:"NSAID analgesic"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âœ… Ø§Ù„Ø£ÙØ¶Ù„ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ù…Ø¹ Ø§Ù„Ø·Ø¹Ø§Ù….\nâš  Ù‚Ø±Ø­Ø©/ÙƒÙ„Ù‰/ÙˆØ§Ø±ÙØ§Ø±ÙŠÙ†: Ø§Ø³ØªØ´Ø± Ù‚Ø¨Ù„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù….", en:"âœ… Best after Iftar with food.\nâš  Ulcer/kidney disease/warfarin: consult before use."},
    alerts:[{level:"danger", ar:"Ù…Ø¹ Ø§Ù„ÙˆØ§Ø±ÙØ§Ø±ÙŠÙ† ÙŠØ²ÙŠØ¯ Ø®Ø·Ø± Ø§Ù„Ù†Ø²ÙŠÙ.", en:"With warfarin increases bleeding risk."}]
  },

  // =========================
  // RHEUM / IMMUNO
  // =========================
  {
    keys:["hydroxychloroquine","plaquenil","Ù‡ÙŠØ¯Ø±ÙˆÙƒØ³ÙŠ ÙƒÙ„ÙˆØ±ÙˆÙƒÙˆÙŠÙ†","Ø¨Ù„Ø§ÙƒÙˆÙŠÙ†ÙŠÙ„"],
    category:{ar:"Ø±ÙˆÙ…Ø§ØªÙŠØ²Ù…/Ù…Ù†Ø§Ø¹Ø©", en:"Rheumatology/Immunology"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âœ… Ù…Ø±Ø© Ø£Ùˆ Ù…Ø±ØªÙŠÙ†: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± (ÙˆØ¥Ø°Ø§ Ù…Ø±ØªÙŠÙ†: Ø§Ù„Ø¥ÙØ·Ø§Ø± + Ø§Ù„Ø³Ø­ÙˆØ±).", en:"âœ… Once or twice daily: after Iftar (if BID: Iftar + Suhoor)."},
    alerts:[{level:"warn", ar:"Ø§Ù„ØªØ²Ù… Ø¨Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¹ÙŠÙ† Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„.", en:"Follow eye monitoring per protocol."}]
  },
  {
    keys:["methotrexate","mtx","Ù…ÙŠØ«ÙˆØªØ±ÙƒØ³Ø§Øª","Ù….Øª.Ø§ÙƒØ³"],
    category:{ar:"Ø±ÙˆÙ…Ø§ØªÙŠØ²Ù…/Ù…Ù†Ø§Ø¹Ø© (Ø£Ø³Ø¨ÙˆØ¹ÙŠ)", en:"Rheumatology/Immunology (Weekly)"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âœ… Ø£Ø³Ø¨ÙˆØ¹ÙŠÙ‹Ø§: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± ÙÙŠ ÙŠÙˆÙ… Ø«Ø§Ø¨Øª.\nâ›” Ù„Ø§ ÙŠØ¤Ø®Ø° ÙŠÙˆÙ…ÙŠÙ‹Ø§.\nðŸ“Œ Ø­Ù…Ø¶ Ø§Ù„ÙÙˆÙ„ÙŠÙƒ Ø­Ø³Ø¨ Ø§Ù„ÙˆØµÙØ©.", en:"âœ… Weekly: after Iftar on a fixed day.\nâ›” Not daily.\nðŸ“Œ Folic acid per prescription."},
    alerts:[{level:"danger", ar:"Ø¬Ø±Ø¹Ø§Øª Ø®Ø§Ø·Ø¦Ø© Ù‚Ø¯ ØªÙƒÙˆÙ† Ø®Ø·ÙŠØ±Ø©â€”ØªØ£ÙƒØ¯ Ù…Ù† (Ø£Ø³Ø¨ÙˆØ¹ÙŠ).", en:"Wrong dosing can be dangerousâ€”confirm WEEKLY schedule."}]
  },
  {
    keys:["prednisolone","prednisone","steroid","ÙƒÙˆØ±ØªÙŠØ²ÙˆÙ†","Ø¨Ø±ÙŠØ¯Ù†ÙŠØ²ÙˆÙ„ÙˆÙ†","Ø¨Ø±ÙŠØ¯Ù†ÙŠØ²ÙˆÙ†"],
    category:{ar:"Ø³ØªÙŠØ±ÙˆÙŠØ¯", en:"Steroid"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âœ… Ù…Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¨Ø¹Ø¯ Ø§Ù„Ø³Ø­ÙˆØ± Ù…Ø¹ Ø§Ù„Ø·Ø¹Ø§Ù….\nðŸ“Œ Ù„Ø§ ØªÙˆÙ‚ÙÙ‡ ÙØ¬Ø£Ø© Ø¥Ø°Ø§ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø·ÙˆÙŠÙ„.\nâš  Ù‚Ø¯ ÙŠØ±ÙØ¹ Ø§Ù„Ø³ÙƒØ±/Ø§Ù„Ø¶ØºØ·.", en:"âœ… Once daily: after Suhoor with food.\nðŸ“Œ Do not stop suddenly if long-term.\nâš  Can raise glucose/BP."},
    alerts:[{level:"warn", ar:"Ø±Ø§Ù‚Ø¨ Ø§Ù„Ø³ÙƒØ± Ø®ØµÙˆØµÙ‹Ø§ Ù„Ù…Ø±Ø¶Ù‰ Ø§Ù„Ø³ÙƒØ±ÙŠ.", en:"Monitor glucose, especially in diabetes."}]
  },

  // =========================
  // SUPPLEMENTS / OTHERS
  // =========================
  {
    keys:["iron","ferrous","fefol","Ø­Ø¯ÙŠØ¯","ÙÙŠØ±Ø±ÙˆØ³","Ø­Ø¯ÙŠØ¯ ÙÙˆÙ„ÙŠÙƒ"],
    category:{ar:"Ù…ÙƒÙ…Ù„Ø§Øª (Ø­Ø¯ÙŠØ¯)", en:"Supplements (Iron)"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âœ… Ø§Ù„Ø£ÙØ¶Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø¥ÙØ·Ø§Ø± ÙˆØ§Ù„Ø³Ø­ÙˆØ± Ø¨Ø¹ÙŠØ¯Ù‹Ø§ Ø¹Ù† Ø§Ù„Ø´Ø§ÙŠ/Ø§Ù„Ù‚Ù‡ÙˆØ©/Ø§Ù„ÙƒØ§Ù„Ø³ÙŠÙˆÙ….\nðŸ“Œ Ø§ØªØ±Ùƒ ÙØ§ØµÙ„ 4 Ø³Ø§Ø¹Ø§Øª Ø¹Ù† Ù„ÙŠÙÙˆØ«ÙŠØ±ÙˆÙƒØ³ÙŠÙ†.", en:"âœ… Best between Iftar and Suhoor away from tea/coffee/calcium.\nðŸ“Œ Separate ~4 hours from levothyroxine."},
    alerts:[{level:"ok", ar:"Ù‚Ø¯ ÙŠØ³Ø¨Ø¨ Ø¥Ù…Ø³Ø§Ùƒâ€”Ø§Ø´Ø±Ø¨ Ø³ÙˆØ§Ø¦Ù„ ÙƒØ§ÙÙŠØ©.", en:"May cause constipationâ€”maintain fluids."}]
  },
  {
    keys:["calcium","vitamin d","cholecalciferol","calcitriol","ÙƒØ§Ù„Ø³ÙŠÙˆÙ…","ÙÙŠØªØ§Ù…ÙŠÙ† Ø¯","ÙƒÙˆÙ„ÙŠÙƒØ§Ù„Ø³ÙŠÙÙŠØ±ÙˆÙ„","ÙƒØ§Ù„Ø³ÙŠØªØ±ÙŠÙˆÙ„"],
    category:{ar:"Ù…ÙƒÙ…Ù„Ø§Øª (ÙƒØ§Ù„Ø³ÙŠÙˆÙ…/ÙÙŠØªØ§Ù…ÙŠÙ† Ø¯)", en:"Supplements (Calcium/Vitamin D)"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âœ… Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±.\nðŸ“Œ Ø§ØªØ±Ùƒ ÙØ§ØµÙ„ 4 Ø³Ø§Ø¹Ø§Øª Ø¹Ù† Ù„ÙŠÙÙˆØ«ÙŠØ±ÙˆÙƒØ³ÙŠÙ†.", en:"âœ… After Iftar.\nðŸ“Œ Separate ~4 hours from levothyroxine."},
    alerts:[{level:"ok", ar:"Ø®Ø° Ù…Ø¹ Ø§Ù„Ø·Ø¹Ø§Ù… Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ­Ù…Ù„.", en:"Take with food for better tolerance."}]
  },
  {
    keys:["alendronate","bisphosphonate","ÙÙˆØ³Ø§Ù…ÙƒØ³","Ø£Ù„ÙŠÙ†Ø¯Ø±ÙˆÙ†ÙŠØª"],
    category:{ar:"Ù‡Ø´Ø§Ø´Ø© Ø§Ù„Ø¹Ø¸Ø§Ù…", en:"Osteoporosis"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âš  ÙŠÙØ¤Ø®Ø° ØµØ¨Ø§Ø­Ù‹Ø§ Ø¹Ù„Ù‰ Ù…Ø¹Ø¯Ø© ÙØ§Ø±ØºØ© Ù…Ø¹ Ù…Ø§Ø¡ ÙÙ‚Ø· ÙˆØ§Ù„Ø¬Ù„ÙˆØ³ 30 Ø¯Ù‚ÙŠÙ‚Ø©.\nðŸ“Œ ÙÙŠ Ø±Ù…Ø¶Ø§Ù†: ØºØ§Ù„Ø¨Ù‹Ø§ Ù„Ø§ ÙŠÙ†Ø§Ø³Ø¨ Ø¨Ø¯ÙˆÙ† Ø®Ø·Ø©â€”Ø§Ø³ØªØ´Ø± Ø§Ù„Ø·Ø¨ÙŠØ¨.", en:"âš  Taken in the morning fasting with water only and stay upright 30 minutes.\nðŸ“Œ In Ramadan: often needs a planâ€”consult your clinician."},
    alerts:[{level:"warn", ar:"Ù„Ø§ ØªØ£Ø®Ø°Ù‡ Ù‚Ø¨Ù„ Ø§Ù„Ù†ÙˆÙ….", en:"Do not take at bedtime."}]
  },

  // =========================
  // PSYCH / NEURO (GENERAL)
  // =========================
  {
    keys:["sertraline","fluoxetine","escitalopram","citalopram","venlafaxine","duloxetine","ssri","Ø³ÙŠØ±ØªØ±Ø§Ù„ÙŠÙ†","ÙÙ„ÙˆÙƒØ³ÙŠØªÙŠÙ†","Ø§Ø³ÙŠØªØ§Ù„ÙˆØ¨Ø±Ø§Ù…","Ø³ÙŠØªØ§Ù„ÙˆØ¨Ø±Ø§Ù…","ÙÙŠÙ†Ù„Ø§ÙØ§ÙƒØ³ÙŠÙ†","Ø¯ÙˆÙ„ÙˆÙƒØ³ÙŠØªÙŠÙ†"],
    category:{ar:"Ù†ÙØ³ÙŠØ© (Ù…Ø¶Ø§Ø¯Ø§Øª Ø§ÙƒØªØ¦Ø§Ø¨)", en:"Psych (Antidepressants)"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âœ… ØºØ§Ù„Ø¨Ù‹Ø§ Ù…Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±.\nðŸ“Œ Ø¥Ø°Ø§ Ø³Ø¨Ø¨ Ù†Ø¹Ø§Ø³/Ø£Ø±Ù‚: Ø¹Ø¯Ù‘Ù„ Ø§Ù„ÙˆÙ‚Øª Ø­Ø³Ø¨ Ø§Ù„ØªØ­Ù…Ù„ Ø¨Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ù…Ø¹ Ø§Ù„Ø·Ø¨ÙŠØ¨.", en:"âœ… Often once daily: after Iftar.\nðŸ“Œ If drowsy/insomnia: timing can be adjusted based on tolerance with clinician guidance."},
    alerts:[{level:"warn", ar:"Ù„Ø§ ØªÙˆÙ‚Ù Ø§Ù„Ø¯ÙˆØ§Ø¡ ÙØ¬Ø£Ø©.", en:"Do not stop abruptly."}]
  },
  {
    keys:["levetiracetam","keppra","valproate","carbamazepine","phenytoin","antiepileptic","Ù„ÙŠÙÙŠØªÙŠØ±Ø§Ø³ÙŠØªØ§Ù…","ÙƒÙŠØ¨Ø±Ø§","ÙØ§Ù„Ø¨Ø±ÙˆØ§Øª","ÙƒØ§Ø±Ø¨Ø§Ù…Ø§Ø²ÙŠØ¨ÙŠÙ†","ÙÙŠÙ†ÙŠØªÙˆÙŠÙ†"],
    category:{ar:"Ø¹ØµØ¨ÙŠØ© (ØµØ±Ø¹)", en:"Neuro (Epilepsy)"},
    fastingBreak:{ar:"Ù„Ø§ ÙŠÙØ·Ø±.", en:"Does not break the fast."},
    timing:{ar:"âš  Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ù…Ù‡Ù… Ø¬Ø¯Ù‹Ø§.\nâœ… OD: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±.\nâœ… BID: Ø§Ù„Ø¥ÙØ·Ø§Ø± + Ø§Ù„Ø³Ø­ÙˆØ±.\nâ›” Ù„Ø§ ØªØºÙŠÙ‘Ø± Ø§Ù„Ø¬Ø±Ø¹Ø© Ø¨Ø¯ÙˆÙ† Ø·Ø¨ÙŠØ¨.", en:"âš  Adherence is critical.\nâœ… OD: after Iftar.\nâœ… BID: Iftar + Suhoor.\nâ›” Do not change dose without clinician."},
    alerts:[{level:"danger", ar:"Ù†Ø³ÙŠØ§Ù† Ø§Ù„Ø¬Ø±Ø¹Ø§Øª Ù‚Ø¯ ÙŠØ²ÙŠØ¯ Ø§Ù„Ù†ÙˆØ¨Ø§Øªâ€”Ø§Ø³ØªØ´Ø± Ù„Ùˆ ØµØ¹Ø¨ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù….", en:"Missed doses can increase seizuresâ€”seek help if timing is difficult."}]
  }
];];

const quickList = [
  "Warfarin / ÙˆØ§Ø±ÙØ§Ø±ÙŠÙ†",
  "Omeprazole / Ø£ÙˆÙ…ÙŠØ¨Ø±Ø§Ø²ÙˆÙ„",
  "Metformin / Ù…ÙŠØªÙÙˆØ±Ù…ÙŠÙ†",
  "Augmentin / Ø§ÙˆØ¬Ù…Ù†ØªÙŠÙ†",
  "Prednisolone / Ø¨Ø±ÙŠØ¯Ù†ÙŠØ²ÙˆÙ„ÙˆÙ†",
  "Empagliflozin / Ø¥Ù…Ø¨Ø§ØºÙ„ÙŠÙÙ„ÙˆØ²ÙŠÙ†",
  "Add medication / Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ§Ø¡"
];

function currentLang(){ return ui.lang.value; }
function isHCP(){ return ui.mode.value === "hcp"; }

function packText(obj){
  const l = currentLang();
  if(l === "ar") return obj.ar;
  if(l === "en") return obj.en;
  return obj.ar + "\n\n" + obj.en;
}

function addMsg(role, text, chips=[]){
  const row = document.createElement('div');
  row.className = `msg ${role}`;
  const bubble = document.createElement('div');
  bubble.className = 'bubble';
  bubble.textContent = text;

  if(chips && chips.length){
    const meta = document.createElement('div');
    meta.className = 'meta';
    chips.forEach(c=>{
      const chip = document.createElement('span');
      chip.className = `chip ${c.level||""}`.trim();
      chip.textContent = packText({ar:c.ar, en:c.en});
      meta.appendChild(chip);
    });
    bubble.appendChild(meta);
  }

  row.appendChild(bubble);
  ui.chatlog.appendChild(row);
  ui.chatlog.scrollTop = ui.chatlog.scrollHeight;
}

function normalize(s){ return (s||"").toLowerCase().replace(/\s+/g," ").trim(); }

function findMed(query){
  const q = normalize(query);
  if(!q) return null;
  for(const m of meds){
    for(const k of m.keys){
      if(q === normalize(k)) return m;
    }
  }
  for(const m of meds){
    for(const k of m.keys){
      const nk = normalize(k);
      if(nk && (q.includes(nk) || nk.includes(q))) return m;
    }
  }
  return null;
}

function buildAnswer(m){
  const l = currentLang();
  let header = (l==="ar") ? `ðŸ“Œ Ø§Ù„ØªØµÙ†ÙŠÙ: ${m.category.ar}\n`
            : (l==="en") ? `ðŸ“Œ Category: ${m.category.en}\n`
            : `ðŸ“Œ Category: ${m.category.en}\nðŸ“Œ Ø§Ù„ØªØµÙ†ÙŠÙ: ${m.category.ar}\n`;
  let out = `${header}${packText(m.timing)}\n\nðŸ½ï¸ Fasting note:\n${packText(m.fastingBreak)}`;
  if(isHCP() && m.hcp){ out += "\n\n" + packText(m.hcp); }
  const chips = (m.alerts||[]).map(a=>({level:a.level, ar:a.ar, en:a.en}));
  return {out, chips};
}

function handleUser(text){
  addMsg("user", text);
  const q = normalize(text);
  if(q === "add medication" || q === "Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ§Ø¡" || q === "Ø§Ø¶Ø§ÙØ© Ø¯ÙˆØ§Ø¡" || q === "Ø¥Ø¶Ø§ÙÙ‡ Ø¯ÙˆØ§Ø¡"){
    addMsg("bot", packText(T.addTemplate)); return;
  }
  const med = findMed(text);
  if(!med){ addMsg("bot", packText(T.notFound)); return; }
  const ans = buildAnswer(med);
  addMsg("bot", ans.out, ans.chips);
}

function renderQuick(){
  ui.quick.innerHTML = "";
  quickList.forEach(label=>{
    const b = document.createElement('button');
    b.className = "qbtn"; b.type = "button"; b.textContent = label;
    b.onclick = ()=> handleUser(label.split("/")[0].trim());
    ui.quick.appendChild(b);
  });
}

function resetChat(){
  ui.chatlog.innerHTML = "";
  addMsg("bot", packText(T.hello));
  renderQuick();
}

function setupQR(){
  const url = window.location.href;
  ui.urlbox.textContent = url.startsWith("file:")
    ? "Host this page to generate a shareable QR / Ù‚Ù… Ø¨Ø§Ø³ØªØ¶Ø§ÙØ© Ø§Ù„ØµÙØ­Ø© Ù„Ø¥Ø¸Ù‡Ø§Ø± QR Ù‚Ø§Ø¨Ù„ Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ©"
    : url;

  if(url.startsWith("http")){
    ui.qrcode.innerHTML = "";
    QRCode.toCanvas(url, { margin: 1, width: 110 }, function (err, canvas) {
      if (err) { ui.qrcode.textContent = "QR error"; return; }
      ui.qrcode.appendChild(canvas);
    });
  }
}

ui.send.addEventListener('click', ()=>{ const v = ui.input.value.trim(); if(!v) return; ui.input.value=""; handleUser(v); });
ui.input.addEventListener('keydown', (e)=>{ if(e.key==="Enter"){ e.preventDefault(); ui.send.click(); }});
ui.reset.addEventListener('click', resetChat);
ui.lang.addEventListener('change', resetChat);
ui.mode.addEventListener('change', resetChat);

resetChat();
setupQR();
</script>
</body>
</html>
