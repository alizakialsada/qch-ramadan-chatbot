<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>QCH â€“ Smart Ramadan Medication Assistant</title>
  <meta name="description" content="Bilingual Ramadan medication timing assistant (Arabic/English) â€“ Qatif Central Hospital Pharmacy Department." />

  <style>
    :root{
      --bg:#f5fbfb;
      --card:#ffffff;
      --ink:#0b1b2a;
      --muted:#5b6b7b;
      --brand:#0aa6a6;     /* turquoise */
      --brand2:#1e88e5;    /* blue */
      --warn:#b45309;
      --good:#047857;
      --line:#e6edf2;
      --shadow: 0 10px 30px rgba(15, 23, 42, .08);
      --radius: 18px;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }

    html,body{height:100%;}
    body{
      margin:0;
      font-family:var(--font);
      color:var(--ink);
      background: radial-gradient(1200px 700px at 20% 0%, rgba(10,166,166,.12), transparent 60%),
                  radial-gradient(1000px 600px at 90% 10%, rgba(30,136,229,.12), transparent 55%),
                  var(--bg);
    }

    /* Patient-friendly mode */
    body.patient-mode{
      font-size: 18px;
    }
    body.patient-mode .detail{
      display:none !important;
    }
    body.patient-mode .chip{
      padding:10px 12px;
      font-size: 16px;
    }

    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 18px 16px 28px;
      display:flex;
      flex-direction:column;
      gap:14px;
      min-height:100%;
      box-sizing:border-box;
    }

    header{
      background: linear-gradient(135deg, rgba(10,166,166,.14), rgba(30,136,229,.10));
      border: 1px solid rgba(230,237,242,.9);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      min-width: 0;
    }

    .logo{
      width: 56px;
      height: 56px;
      border-radius: 16px;
      background: conic-gradient(from 220deg, var(--brand), var(--brand2));
      box-shadow: 0 10px 25px rgba(10,166,166,.18);
      display:flex;
      align-items:center;
      justify-content:center;
      color:#fff;
      font-weight:800;
      letter-spacing:.5px;
      flex: 0 0 auto;
      overflow:hidden;
    }

    /* If you have a real logo file, set <img> inside .logo and it will fill */
    .logo img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    .brand h1{
      margin:0;
      font-size: 18px;
      line-height: 1.2;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .brand p{
      margin:4px 0 0;
      font-size: 13px;
      color: var(--muted);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .controls{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      justify-content:flex-end;
      align-items:center;
    }

    .btn{
      appearance:none;
      border: 1px solid var(--line);
      background: #fff;
      color: var(--ink);
      border-radius: 999px;
      padding: 10px 12px;
      font-weight: 600;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:8px;
      box-shadow: 0 6px 18px rgba(15,23,42,.05);
      transition: transform .06s ease, border-color .2s ease, background .2s ease;
      user-select:none;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(10,166,166,.35); }
    .btn.primary{
      background: linear-gradient(135deg, rgba(10,166,166,.16), rgba(30,136,229,.10));
      border-color: rgba(10,166,166,.25);
    }
    .btn.danger{
      border-color: rgba(180,83,9,.25);
      background: rgba(180,83,9,.06);
    }

    .panel{
      display:grid;
      grid-template-columns: 1fr;
      gap: 14px;
      flex: 1 1 auto;
    }

    .card{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .card-head{
      padding: 14px 14px 10px;
      border-bottom: 1px solid var(--line);
      display:flex;
      flex-wrap:wrap;
      align-items:flex-start;
      gap:10px;
      justify-content:space-between;
    }
    .card-head .title{
      display:flex;
      align-items:center;
      gap:10px;
      min-width:0;
    }
    .badge{
      font-weight:800;
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(10,166,166,.12);
      border: 1px solid rgba(10,166,166,.20);
      color: #065f5f;
      white-space:nowrap;
    }
    .badge.blue{
      background: rgba(30,136,229,.10);
      border-color: rgba(30,136,229,.20);
      color: #1e4f94;
    }
    .badge.warn{
      background: rgba(180,83,9,.10);
      border-color: rgba(180,83,9,.20);
      color: #7c2d12;
    }

    .subtitle{
      margin:6px 0 0;
      font-size: 13px;
      color: var(--muted);
      max-width: 720px;
    }

    .chips{
      padding: 12px 14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      border-bottom: 1px solid var(--line);
      background: linear-gradient(180deg, rgba(10,166,166,.06), transparent);
    }
    .chip{
      border: 1px solid rgba(10,166,166,.22);
      background: rgba(10,166,166,.08);
      color: #064e4e;
      padding: 9px 11px;
      border-radius: 999px;
      cursor:pointer;
      font-weight:700;
      font-size: 14px;
      user-select:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
      transition: transform .06s ease, background .2s ease, border-color .2s ease;
    }
    .chip:hover{ transform: translateY(-1px); border-color: rgba(10,166,166,.35); background: rgba(10,166,166,.10); }
    .chip .emoji{ font-size: 16px; }

    .chat{
      display:flex;
      flex-direction:column;
      height: 52vh;
      min-height: 420px;
    }

    .messages{
      padding: 14px;
      overflow:auto;
      flex: 1 1 auto;
      scroll-behavior:smooth;
    }

    .msg{
      display:flex;
      gap:10px;
      margin: 10px 0;
      align-items:flex-start;
    }
    .avatar{
      width: 38px;
      height: 38px;
      border-radius: 14px;
      background: rgba(10,166,166,.12);
      border:1px solid rgba(10,166,166,.22);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:900;
      color:#065f5f;
      flex: 0 0 auto;
    }
    .avatar.user{
      background: rgba(30,136,229,.10);
      border-color: rgba(30,136,229,.20);
      color:#1e4f94;
    }

    .bubble{
      max-width: 760px;
      background: #fff;
      border:1px solid var(--line);
      border-radius: 18px;
      padding: 12px 12px;
      box-shadow: 0 6px 18px rgba(15,23,42,.04);
      line-height: 1.4;
      white-space: pre-wrap;
      word-break: break-word;
    }
    .bubble.user{
      background: rgba(30,136,229,.06);
      border-color: rgba(30,136,229,.16);
    }

    .meta{
      font-size: 12px;
      color: var(--muted);
      margin-top:6px;
    }

    .composer{
      padding: 12px 14px;
      border-top: 1px solid var(--line);
      display:flex;
      gap:10px;
      align-items:center;
      background: linear-gradient(180deg, transparent, rgba(10,166,166,.04));
    }
    .composer input{
      flex: 1 1 auto;
      padding: 12px 14px;
      border-radius: 999px;
      border: 1px solid var(--line);
      outline: none;
      font-size: 15px;
      background:#fff;
    }
    .composer input:focus{
      border-color: rgba(10,166,166,.45);
      box-shadow: 0 0 0 4px rgba(10,166,166,.10);
    }
    .send{
      padding: 12px 14px;
      border-radius: 999px;
      border: 1px solid rgba(10,166,166,.25);
      background: linear-gradient(135deg, rgba(10,166,166,.18), rgba(30,136,229,.10));
      font-weight: 900;
      cursor:pointer;
      user-select:none;
    }

    footer{
      text-align:center;
      color: var(--muted);
      font-size: 12px;
      margin-top: 4px;
      padding: 6px 4px;
    }
    .small{
      font-size: 12px;
      color: var(--muted);
    }
    .kicker{
      font-weight: 900;
      color: #0a3b55;
    }

    /* Arabic direction support per-message */
    .rtl{ direction: rtl; text-align: right; }
    .ltr{ direction: ltr; text-align: left; }

    /* Mobile tweaks */
    @media (max-width: 680px){
      .chat{ height: 56vh; min-height: 420px; }
      .brand h1{ font-size: 16px; }
      .controls{ justify-content:flex-start; }
    }
  </style>
</head>

<body>
  <div class="wrap">

    <header>
      <div class="brand">
        <div class="logo" aria-label="QCH Logo">
          <!-- Replace this with your real logo file if available:
               <img src="assets/qch-logo.png" alt="QCH Logo">
          -->
          QCH
        </div>
        <div style="min-width:0;">
          <h1>QCH â€“ Smart Ramadan Medication Assistant</h1>
          <p>Pharmacy Department â€¢ Qatif Central Hospital â€¢ Bilingual (AR/EN)</p>
        </div>
      </div>

      <div class="controls">
        <button class="btn primary" id="langToggle" title="Toggle Arabic/English UI">
          ğŸŒ Language: <span id="langLabel">Auto</span>
        </button>
        <button class="btn" id="modeToggle" title="Bigger text + simpler answers">
          ğŸ˜Š Patient-friendly: <span id="modeLabel">OFF</span>
        </button>
        <button class="btn danger" id="resetBtn" title="Clear chat">
          ğŸ§¹ Reset
        </button>
      </div>
    </header>

    <div class="panel">
      <div class="card">
        <div class="card-head">
          <div class="title">
            <span class="badge">Ramadan timing</span>
            <span class="badge blue">No PHI stored</span>
            <span class="badge warn">Educational</span>
          </div>
          <div class="subtitle">
            <span class="kicker">Type a drug name</span> (e.g., â€œwarfarinâ€, â€œomeprazoleâ€, â€œinsulinâ€, â€œAugmentinâ€) or choose a quick topic below.
          </div>
          <div class="subtitle rtl" style="width:100%;">
            <span class="kicker">Ø§ÙƒØªØ¨ÙŠ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡</span> (Ù…Ø«Ù„Ø§Ù‹: â€œÙˆØ§Ø±ÙØ±ÙŠÙ†â€ØŒ â€œØ§ÙˆÙ…ÙŠØ¨Ø±Ø§Ø²ÙˆÙ„â€ØŒ â€œØ§Ù†Ø³ÙˆÙ„ÙŠÙ†â€ØŒ â€œØ£ÙˆØºÙ…Ù†ØªÙŠÙ†â€) Ø£Ùˆ Ø§Ø®ØªØ§Ø±ÙŠ Ù…ÙˆØ¶ÙˆØ¹ Ø³Ø±ÙŠØ¹ ØªØ­Øª.
          </div>
        </div>

        <div class="chips" id="chips">
          <div class="chip" data-q="insulin">
            <span class="emoji">ğŸ’‰</span> Insulin / Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ†
          </div>
          <div class="chip" data-q="warfarin">
            <span class="emoji">ğŸ©¸</span> Warfarin / ÙˆØ§Ø±ÙØ§Ø±ÙŠÙ†
          </div>
          <div class="chip" data-q="ppi">
            <span class="emoji">ğŸ§¡</span> PPI / Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø­Ù…ÙˆØ¶Ø©
          </div>
          <div class="chip" data-q="antibiotic bid">
            <span class="emoji">ğŸ¦ </span> Antibiotic BID / Ù…Ø¶Ø§Ø¯ Ù…Ø±ØªÙŠÙ†
          </div>
          <div class="chip" data-q="htn meds">
            <span class="emoji">ğŸ”¥</span> HTN / Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø¶ØºØ·
          </div>
          <div class="chip" data-q="dmard biologic">
            <span class="emoji">ğŸ¦´</span> DMARDs & Biologics / Ø§Ù„Ø±ÙˆÙ…Ø§ØªÙŠØ²Ù…
          </div>
        </div>

        <div class="chat">
          <div class="messages" id="messages" role="log" aria-live="polite"></div>

          <div class="composer">
            <input id="input" type="text" placeholder="Type hereâ€¦ | Ø§ÙƒØªØ¨ÙŠ Ù‡Ù†Ø§â€¦" autocomplete="off" />
            <button class="send" id="sendBtn">Send âœ</button>
          </div>
        </div>
      </div>

      <div class="small">
        âš ï¸ This assistant provides general education only. For individualized dosing (especially insulin, warfarin, biologics), follow your prescriber/pharmacist plan.
        <br>
        âš ï¸ Ù‡Ø°Ø§ Ø§Ù„Ø´Ø§Øª Ù„Ù„ØªØ«Ù‚ÙŠÙ Ø§Ù„Ø¹Ø§Ù… ÙÙ‚Ø·. Ù„Ù„Ø¬Ø±Ø¹Ø§Øª Ø§Ù„ÙØ±Ø¯ÙŠØ© (Ø®ØµÙˆØµÙ‹Ø§ Ø§Ù„Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ†/Ø§Ù„ÙˆØ§Ø±ÙØ±ÙŠÙ†/Ø§Ù„Ø¨ÙŠÙˆÙ„ÙˆØ¬ÙŠØ§Øª) Ø§ØªÙ‘Ø¨Ø¹ Ø®Ø·Ø© Ø·Ø¨ÙŠØ¨Ùƒ/ØµÙŠØ¯Ù„ÙŠÙƒ.
      </div>
    </div>

    <footer>
      Created by Ali Alsada â€“ Pharmacy Department â€¢ Qatif Central Hospital
    </footer>
  </div>

  <script>
    // ===== Utilities =====
    const $ = (id) => document.getElementById(id);
    const messagesEl = $("messages");
    const inputEl = $("input");

    const state = {
      patientMode: false,
      langMode: "auto", // auto | en | ar
    };

    function isArabicText(text){
      return /[\u0600-\u06FF]/.test(text);
    }

    function pickLang(text){
      if(state.langMode === "en") return "en";
      if(state.langMode === "ar") return "ar";
      // auto
      return isArabicText(text) ? "ar" : "en";
    }

    function addMessage(role, text, opts = {}){
      const lang = opts.lang || pickLang(text);
      const rtl = (lang === "ar");

      const row = document.createElement("div");
      row.className = "msg";

      const avatar = document.createElement("div");
      avatar.className = "avatar " + (role === "user" ? "user" : "bot");
      avatar.textContent = role === "user" ? "U" : "Q";

      const bubble = document.createElement("div");
      bubble.className = "bubble " + (role === "user" ? "user" : "bot") + " " + (rtl ? "rtl" : "ltr");
      bubble.textContent = text;

      row.appendChild(avatar);
      row.appendChild(bubble);
      messagesEl.appendChild(row);

      // Auto scroll
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }

    function resetChat(){
      messagesEl.innerHTML = "";
      seedWelcome();
    }

    function seedWelcome(){
      addMessage("bot",
`Hello ğŸ‘‹
I can help with Ramadan medication timing in Arabic & English.
Try: insulin, warfarin, PPI (omeprazole/pantoprazole), antibiotics BID, BP meds, DMARDs/biologics.

âš ï¸ Educational only. For individual dose changes (especially insulin/warfarin), follow your clinician plan.`,
      {lang:"en"});

      addMessage("bot",
`Ù…Ø±Ø­Ø¨Ù‹Ø§ ğŸ‘‹
Ø£Ù‚Ø¯Ø± Ø£Ø³Ø§Ø¹Ø¯Ùƒ Ø¨ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø£Ø¯ÙˆÙŠØ© ÙÙŠ Ø±Ù…Ø¶Ø§Ù† (Ø¹Ø±Ø¨ÙŠ/Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ).
Ø¬Ø±Ù‘Ø¨ÙŠ: Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ†ØŒ ÙˆØ§Ø±ÙØ§Ø±ÙŠÙ†ØŒ PPI (Ø§ÙˆÙ…ÙŠØ¨Ø±Ø§Ø²ÙˆÙ„/Ø¨Ø§Ù†ØªÙˆØ¨Ø±Ø§Ø²ÙˆÙ„)ØŒ Ù…Ø¶Ø§Ø¯ Ø­ÙŠÙˆÙŠ Ù…Ø±ØªÙŠÙ†ØŒ Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø¶ØºØ·ØŒ Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø±ÙˆÙ…Ø§ØªÙŠØ²Ù… (DMARD/biologics).

âš ï¸ Ù„Ù„ØªØ«Ù‚ÙŠÙ ÙÙ‚Ø·. ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ø¬Ø±Ø¹Ø© Ø®ØµÙˆØµÙ‹Ø§ Ø§Ù„Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ†/Ø§Ù„ÙˆØ§Ø±ÙØ±ÙŠÙ† ØªÙƒÙˆÙ† Ø­Ø³Ø¨ Ø®Ø·Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨/Ø§Ù„ØµÙŠØ¯Ù„ÙŠ.`,
      {lang:"ar"});
    }

    // ===== Knowledge Cards (Ramadan) =====
    const CARDS = [
      {
        keys: ["insulin","lantus","glargine","detemir","degludec","novorapid","aspart","lispro","humalog","regular","mixtard","70/30","premix","insulatard",
               "Ø§Ù†Ø³ÙˆÙ„ÙŠÙ†","Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ†","Ù„Ø§Ù†ØªÙˆØ³","Ø¬Ù„Ø§Ø±Ø¬ÙŠÙ†","Ø¯ÙŠØªÙŠÙ…ÙŠØ±","Ø¯ÙŠØ¬Ù„ÙˆØ¯ÙŠÙƒ","Ù†ÙˆÙÙˆØ±Ø§Ø¨ÙŠØ¯","Ø£Ø³Ø¨Ø§Ø±Øª","Ù„ÙŠØ³Ø¨Ø±Ùˆ","Ù‡ÙŠÙˆÙ…Ø§Ù„ÙˆØ¬","Ø±ÙŠØ¬ÙŠÙˆÙ„Ø§Ø±","Ù…ÙŠÙƒØ³ØªØ§Ø±Ø¯","70/30","Ø®Ù„ÙŠØ·","Ù…ÙƒØ³"],
        title_en: "ğŸ’‰ Insulin in Ramadan",
        title_ar: "ğŸ’‰ Ø§Ù„Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ† ÙÙŠ Ø±Ù…Ø¶Ø§Ù†",
        patient_en: [
          "Golden rule: Do not adjust insulin doses on your own if you have frequent hypos, pregnancy, or advanced kidney/heart diseaseâ€”contact your clinic.",
          "If glucose <70 mg/dL (or severe symptoms): break the fast immediately and treat the hypo.",
          "Common general patterns (non-individualized): basal insulin often moved to Iftar with modest reduction; Suhoor rapid-acting dose is often lower to reduce late-day hypoglycemia; premix often higher at Iftar and lower at Suhoor.",
          "Stop fasting and seek advice if recurrent hypos, glucose >300 with symptoms, vomiting, severe dizziness, or dehydration."
        ],
        patient_ar: [
          "Ù‚Ø§Ø¹Ø¯Ø© Ø°Ù‡Ø¨ÙŠØ©: Ù„Ø§ ØªØºÙŠÙ‘Ø± Ø¬Ø±Ø¹Ø§Øª Ø§Ù„Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ† Ø¨Ù†ÙØ³Ùƒ Ø¥Ø°Ø§ Ø¹Ù†Ø¯Ùƒ Ù‡Ø¨ÙˆØ· Ù…ØªÙƒØ±Ø± Ø£Ùˆ Ø­Ù…Ù„ Ø£Ùˆ Ù…Ø±Ø¶ ÙƒÙ„ÙˆÙŠ/Ù‚Ù„Ø¨ÙŠ Ù…ØªÙ‚Ø¯Ù…â€”ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©.",
          "Ø¥Ø°Ø§ Ø§Ù„Ø³ÙƒØ± Ø£Ù‚Ù„ Ù…Ù† 70 Ø£Ùˆ Ø£Ø¹Ø±Ø§Ø¶ Ù‚ÙˆÙŠØ©: Ø§ÙØ·Ø± ÙÙˆØ±Ù‹Ø§ ÙˆØ®Ø° Ø¹Ù„Ø§Ø¬ Ø§Ù„Ù‡Ø¨ÙˆØ·.",
          "Ø£Ù†Ù…Ø§Ø· Ø¹Ø§Ù…Ø© Ø´Ø§Ø¦Ø¹Ø© (ØºÙŠØ± ÙØ±Ø¯ÙŠØ©): ØºØ§Ù„Ø¨Ù‹Ø§ ÙŠØªÙ… Ù†Ù‚Ù„ Ø§Ù„Ù€ Basal Ù„Ù„Ø¥ÙØ·Ø§Ø± Ù…Ø¹ ØªÙ‚Ù„ÙŠÙ„ Ø¨Ø³ÙŠØ·Ø› Ø¬Ø±Ø¹Ø© Ø§Ù„Ø³Ø­ÙˆØ± Ù…Ù† Ø§Ù„Ø³Ø±ÙŠØ¹ ØºØ§Ù„Ø¨Ù‹Ø§ Ø£Ù‚Ù„ Ù„ØªÙ‚Ù„ÙŠÙ„ Ù‡Ø¨ÙˆØ· Ø¢Ø®Ø± Ø§Ù„Ù†Ù‡Ø§Ø±Ø› Ø§Ù„Ø®Ù„Ø·Ø§Øª (Premix) ØºØ§Ù„Ø¨Ù‹Ø§ Ø£Ø¹Ù„Ù‰ ÙÙŠ Ø§Ù„Ø¥ÙØ·Ø§Ø± ÙˆØ£Ù‚Ù„ ÙÙŠ Ø§Ù„Ø³Ø­ÙˆØ±.",
          "Ø£ÙˆÙ‚Ù Ø§Ù„ØµÙŠØ§Ù… ÙˆØ±Ø§Ø¬Ø¹ Ø¥Ø°Ø§ ØªÙƒØ±Ø± Ø§Ù„Ù‡Ø¨ÙˆØ·ØŒ Ø£Ùˆ Ø³ÙƒØ± >300 Ù…Ø¹ Ø£Ø¹Ø±Ø§Ø¶ØŒ Ø£Ùˆ Ù‚ÙŠØ¡/Ø¯ÙˆØ®Ø© Ø´Ø¯ÙŠØ¯Ø©/Ø¬ÙØ§Ù."
        ],
        detail_en: [
          "Reminder: measuring glucose does NOT break the fast.",
          "If you use sulfonylureas with insulin, ask your clinician about fasting plan."
        ],
        detail_ar: [
          "ØªÙ†Ø¨ÙŠÙ‡: Ù‚ÙŠØ§Ø³ Ø§Ù„Ø³ÙƒØ± Ù„Ø§ ÙŠÙØ·Ø±.",
          "Ø¥Ø°Ø§ ØªØ³ØªØ®Ø¯Ù… Ø³Ù„ÙÙˆÙ†ÙŠÙ„ ÙŠÙˆØ±ÙŠØ§ Ù…Ø¹ Ø§Ù„Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ†ØŒ Ø§Ø³Ø£Ù„ Ø¹Ù† Ø®Ø·Ø© Ø§Ù„ØµÙŠØ§Ù… Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ù‡Ø¨ÙˆØ·."
        ],
        safety_en: ["High risk of harm if self-adjusting insulin â†’ follow clinician plan."],
        safety_ar: ["Ø®Ø·Ø± Ø¹Ø§Ù„ÙŠ Ø¥Ø°Ø§ Ø¹Ø¯Ù„Øª Ø§Ù„Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ† Ø¨Ù†ÙØ³Ùƒ â†’ Ø§ØªØ¨Ø¹ Ø®Ø·Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨/Ø§Ù„ØµÙŠØ¯Ù„ÙŠ."]
      },

      {
        keys: ["warfarin","coumadin","inr","ÙˆØ§Ø±ÙØ±ÙŠÙ†","ÙˆØ§Ø±ÙØ§Ø±ÙŠÙ†","ÙƒÙˆÙ…Ø§Ø¯ÙŠÙ†","INR","wafarin"],
        title_en: "ğŸ©¸ Warfarin timing",
        title_ar: "ğŸ©¸ ØªÙˆÙ‚ÙŠØª Ø§Ù„ÙˆØ§Ø±ÙØ§Ø±ÙŠÙ†",
        patient_en: [
          "Take warfarin at the same time every day. During Ramadan, many patients take it 1â€“2 hours after Iftar (choose a consistent time).",
          "Do NOT change the dose because of fasting unless instructed.",
          "Keep vitamin K intake consistent (leafy greens). Consistency matters more than avoidance.",
          "Watch interactions: antibiotics/antifungals/NSAIDs may increase INR and bleeding risk."
        ],
        patient_ar: [
          "Ø®Ø° Ø§Ù„ÙˆØ§Ø±ÙØ§Ø±ÙŠÙ† ÙƒÙ„ ÙŠÙˆÙ… Ù†ÙØ³ Ø§Ù„ÙˆÙ‚Øª. ÙÙŠ Ø±Ù…Ø¶Ø§Ù† ØºØ§Ù„Ø¨Ù‹Ø§ ÙŠÙƒÙˆÙ† Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ø¨Ù€ 1â€“2 Ø³Ø§Ø¹Ø© (Ø§Ø®ØªØ± ÙˆÙ‚Øª Ø«Ø§Ø¨Øª).",
          "Ù„Ø§ ØªØºÙŠÙ‘Ø± Ø§Ù„Ø¬Ø±Ø¹Ø© Ø¨Ø³Ø¨Ø¨ Ø§Ù„ØµÙŠØ§Ù… Ø¥Ù„Ø§ Ø¨ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø·Ø¨ÙŠØ¨.",
          "Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø«Ø¨Ø§Øª Ø§Ù„Ø£ÙƒÙ„ Ø§Ù„ØºÙ†ÙŠ Ø¨ÙÙŠØªØ§Ù…ÙŠÙ† K (Ø§Ù„Ø®Ø¶Ø§Ø± Ø§Ù„ÙˆØ±Ù‚ÙŠØ©). Ø§Ù„Ø«Ø¨Ø§Øª Ø£Ù‡Ù… Ù…Ù† Ø§Ù„Ù…Ù†Ø¹.",
          "Ø§Ù†ØªØ¨Ù‡ Ù„Ù„ØªØ¯Ø§Ø®Ù„Ø§Øª: Ù…Ø¶Ø§Ø¯Ø§Øª Ø­ÙŠÙˆÙŠØ©/ÙØ·Ø±ÙŠØ§Øª/Ù…Ø³ÙƒÙ†Ø§Øª Ù‚Ø¯ ØªØ±ÙØ¹ INR ÙˆØªØ²ÙŠØ¯ Ø§Ù„Ù†Ø²Ù."
        ],
        detail_en: [
          "Urgent signs: black stools, vomiting blood, severe unexplained bruising/bleeding â†’ urgent care.",
          "INR monitoring should follow your clinic schedule, especially after starting/stopping interacting drugs."
        ],
        detail_ar: [
          "Ø¹Ù„Ø§Ù…Ø§Øª Ø·Ø§Ø±Ø¦Ø©: Ø¨Ø±Ø§Ø² Ø£Ø³ÙˆØ¯ØŒ ØªÙ‚ÙŠØ¤ Ø¯Ù…ØŒ ÙƒØ¯Ù…Ø§Øª/Ù†Ø²Ù Ø´Ø¯ÙŠØ¯ ØºÙŠØ± Ù…Ø¨Ø±Ø± â†’ Ø·ÙˆØ§Ø±Ø¦.",
          "ÙØ­Øµ INR Ø­Ø³Ø¨ Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©ØŒ Ø®ØµÙˆØµÙ‹Ø§ Ø¨Ø¹Ø¯ Ø¨Ø¯Ø¡/Ø¥ÙŠÙ‚Ø§Ù Ø£Ø¯ÙˆÙŠØ© Ù…ØªØ¯Ø§Ø®Ù„Ø©."
        ],
        safety_en: ["Warfarin is high-riskâ€”dose changes only by clinician."],
        safety_ar: ["Ø§Ù„ÙˆØ§Ø±ÙØ±ÙŠÙ† Ø¯ÙˆØ§Ø¡ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø®Ø·ÙˆØ±Ø©â€”ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¬Ø±Ø¹Ø© ÙÙ‚Ø· Ø¹Ø¨Ø± Ø§Ù„Ø·Ø¨ÙŠØ¨."]
      },

      {
        keys: ["ppi","omeprazole","pantoprazole","esomeprazole","lansoprazole","rabeprazole","dexlansoprazole",
               "Ø­Ù…ÙˆØ¶Ø©","Ù…Ø¹Ø¯Ø©","Ø§Ø±ØªØ¬Ø§Ø¹","panto","omep","Ø§ÙˆÙ…ÙŠØ¨Ø±Ø§Ø²ÙˆÙ„","Ø¨Ø§Ù†ØªÙˆØ¨Ø±Ø§Ø²ÙˆÙ„","Ø§ÙŠØ³ÙˆÙ…ÙŠØ¨Ø±Ø§Ø²ÙˆÙ„","Ù„Ø§Ù†Ø²ÙˆØ¨Ø±Ø§Ø²ÙˆÙ„","Ø±Ø§Ø¨ÙŠØ¨Ø±Ø§Ø²ÙˆÙ„","Ù…Ø«Ø¨Ø· Ù…Ø¶Ø®Ø© Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†"],
        title_en: "ğŸ§¡ PPI timing (before Suhoor/Iftar)",
        title_ar: "ğŸ§¡ ØªÙˆÙ‚ÙŠØª PPI (Ù‚Ø¨Ù„ Ø§Ù„Ø³Ø­ÙˆØ±/Ø§Ù„Ø¥ÙØ·Ø§Ø±)",
        patient_en: [
          "Best timing: 30â€“60 minutes before a meal.",
          "Once daily: before Suhoor if symptoms during fasting; before Iftar if symptoms mainly at night.",
          "Twice daily: before Iftar + before Suhoor (30â€“60 minutes)."
        ],
        patient_ar: [
          "Ø£ÙØ¶Ù„ ÙˆÙ‚Øª: Ù‚Ø¨Ù„ Ø§Ù„Ø£ÙƒÙ„ Ø¨Ù€ 30â€“60 Ø¯Ù‚ÙŠÙ‚Ø©.",
          "Ù…Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ù‚Ø¨Ù„ Ø§Ù„Ø³Ø­ÙˆØ± Ø¥Ø°Ø§ Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØµÙŠØ§Ù…Ø› Ø£Ùˆ Ù‚Ø¨Ù„ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ø¥Ø°Ø§ Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶ Ù„ÙŠÙ„Ù‹Ø§.",
          "Ù…Ø±ØªÙŠÙ† ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ù‚Ø¨Ù„ Ø§Ù„Ø¥ÙØ·Ø§Ø± + Ù‚Ø¨Ù„ Ø§Ù„Ø³Ø­ÙˆØ± (30â€“60 Ø¯Ù‚ÙŠÙ‚Ø©)."
        ],
        detail_en: [
          "If you also take sucralfate/antacids, separate them as advised by your pharmacist.",
          "Seek care for alarm symptoms: persistent vomiting, weight loss, trouble swallowing, blood in vomit/stool."
        ],
        detail_ar: [
          "Ø¥Ø°Ø§ ØªØ³ØªØ®Ø¯Ù… Ø³ÙˆÙƒØ±Ø§Ù„ÙØ§Øª/Ù…Ø¶Ø§Ø¯Ø§Øª Ø­Ù…ÙˆØ¶Ø© Ø£Ø®Ø±Ù‰ØŒ Ø§ÙØµÙ„ Ø¨ÙŠÙ†Ù‡Ø§ Ø­Ø³Ø¨ Ø¥Ø±Ø´Ø§Ø¯ Ø§Ù„ØµÙŠØ¯Ù„ÙŠ.",
          "Ø±Ø§Ø¬Ø¹ ÙÙˆØ±Ù‹Ø§ Ø¥Ø°Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù„Ø§Ù…Ø§Øª Ø®Ø·ÙˆØ±Ø©: Ù‚ÙŠØ¡ Ù…Ø³ØªÙ…Ø±ØŒ Ù†Ù‚Øµ ÙˆØ²Ù†ØŒ ØµØ¹ÙˆØ¨Ø© Ø¨Ù„Ø¹ØŒ Ø¯Ù… ÙÙŠ Ø§Ù„Ù‚ÙŠØ¡/Ø§Ù„Ø¨Ø±Ø§Ø²."
        ],
        safety_en: [],
        safety_ar: []
      },

      {
        keys: ["antibiotic","augmentin","amoxicillin","clavulanate","cipro","ciprofloxacin","levo","levofloxacin","azithro","azithromycin","doxy","doxycycline","cephalexin","cefuroxime",
               "Ù…Ø¶Ø§Ø¯","Ù…Ø¶Ø§Ø¯ Ø­ÙŠÙˆÙŠ","Ø§ÙˆØ¬Ù…Ù†ØªÙŠÙ†","Ø£ÙˆØºÙ…Ù†ØªÙŠÙ†","Ø§Ù…ÙˆÙƒØ³","Ø£Ù…ÙˆÙƒØ³","Ø³ÙŠØ¨Ø±Ùˆ","Ù„ÙŠÙÙˆ","Ø§Ø²ÙŠØ«Ø±Ùˆ","Ø£Ø²ÙŠØ«Ø±Ùˆ","Ø¯ÙˆÙƒØ³ÙŠ","Ø³ÙŠÙØ§Ù„ÙŠÙƒØ³ÙŠÙ†","Ø³ÙŠÙÙˆØ±ÙˆÙƒØ³ÙŠÙ…","Ù…Ø±ØªÙŠÙ†","b i d","bid","q12"],
        title_en: "ğŸ¦  Antibiotics BID optimization",
        title_ar: "ğŸ¦  Ø¶Ø¨Ø· Ø§Ù„Ù…Ø¶Ø§Ø¯ Ø§Ù„Ø­ÙŠÙˆÙŠ Ù…Ø±ØªÙŠÙ† ÙŠÙˆÙ…ÙŠÙ‹Ø§",
        patient_en: [
          "BID (about every 12 hours): usually take at Iftar + Suhoor, aiming as close to 12 hours as possible.",
          "Avoid â€œdouble dosingâ€ to compensate for shorter gaps.",
          "If strict 12-hour dosing is needed for your infection, ask your pharmacist about Ramadan-friendly alternatives."
        ],
        patient_ar: [
          "Ù…Ø±ØªÙŠÙ† ÙŠÙˆÙ…ÙŠÙ‹Ø§ (ÙƒÙ„ 12 Ø³Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§): ØºØ§Ù„Ø¨Ù‹Ø§ Ø¥ÙØ·Ø§Ø± + Ø³Ø­ÙˆØ±ØŒ ÙˆØ­Ø§ÙˆÙ„ ØªÙ‚Ø§Ø±Ø¨ 12 Ø³Ø§Ø¹Ø© Ù‚Ø¯Ø± Ø§Ù„Ø¥Ù…ÙƒØ§Ù†.",
          "Ù„Ø§ ØªÙƒØ¯Ù‘Ø³ Ø§Ù„Ø¬Ø±Ø¹Ø§Øª Ù„ØªØ¹ÙˆÙŠØ¶ ÙØ±Ù‚ Ø§Ù„ÙˆÙ‚Øª.",
          "Ø¥Ø°Ø§ Ø§Ù„Ø­Ø§Ù„Ø© ØªØ­ØªØ§Ø¬ 12 Ø³Ø§Ø¹Ø© Ø¨Ø¯Ù‚Ø©ØŒ Ø§Ø³Ø£Ù„ Ø§Ù„ØµÙŠØ¯Ù„ÙŠ Ø¹Ù† Ø¨Ø¯Ø§Ø¦Ù„ Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ø±Ù…Ø¶Ø§Ù†."
        ],
        detail_en: [
          "Some antibiotics must be taken with food or away from dairy/antacidsâ€”follow your label.",
          "Complete the full course unless your clinician tells you to stop."
        ],
        detail_ar: [
          "Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ø¶Ø§Ø¯Ø§Øª ØªØ¤Ø®Ø° Ù…Ø¹ Ø§Ù„Ø£ÙƒÙ„ Ø£Ùˆ Ø¨Ø¹ÙŠØ¯Ù‹Ø§ Ø¹Ù† Ø§Ù„Ø£Ù„Ø¨Ø§Ù†/Ù…Ø¶Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ù…ÙˆØ¶Ø©â€”Ø§ØªØ¨Ø¹ Ø§Ù„Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„ÙˆØµÙØ©.",
          "Ø£ÙƒÙ…Ù„ Ø§Ù„ÙƒÙˆØ±Ø³ ÙƒØ§Ù…Ù„Ù‹Ø§ Ù…Ø§ Ù„Ù… ÙŠØ·Ù„Ø¨ Ø§Ù„Ø·Ø¨ÙŠØ¨ Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù."
        ],
        safety_en: [],
        safety_ar: []
      },

      {
        keys: ["htn","hypertension","bp","blood pressure","amlodipine","losartan","valsartan","lisinopril","enalapril","bisoprolol","metoprolol","carvedilol","furosemide","hctz","hydrochlorothiazide",
               "Ø¶ØºØ·","Ø¶ØºØ· Ø§Ù„Ø¯Ù…","Ø§Ù…ÙŠÙ„ÙˆØ¯ÙŠØ¨ÙŠÙ†","Ø£Ù…Ù„ÙˆØ¯ÙŠØ¨ÙŠÙ†","Ù„ÙˆØ³Ø§Ø±ØªØ§Ù†","ÙØ§Ù„Ø³Ø§Ø±ØªØ§Ù†","Ù„ÙŠØ³ÙŠÙ†ÙˆØ¨Ø±ÙŠÙ„","Ø§Ù†Ø§Ù„Ø§Ø¨Ø±ÙŠÙ„","Ø¨ÙŠØ³ÙˆØ¨Ø±ÙˆÙ„ÙˆÙ„","Ù…ÙŠØªÙˆØ¨Ø±ÙˆÙ„ÙˆÙ„","ÙƒØ§Ø±ÙÙŠØ¯ÙŠÙ„ÙˆÙ„","ÙÙˆØ±ÙˆØ³ÙŠÙ…ÙŠØ¯","Ù…Ø¯Ø±","Ù‡ÙŠØ¯Ø±ÙˆÙƒÙ„ÙˆØ±ÙˆØ«ÙŠØ§Ø²ÙŠØ¯"],
        title_en: "ğŸ”¥ Hypertension (BP) meds timing",
        title_ar: "ğŸ”¥ ØªÙˆÙ‚ÙŠØª Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø¶ØºØ·",
        patient_en: [
          "Once daily BP meds: often easiest after Iftar at a fixed time.",
          "Diuretics (water pills): prefer after Iftar / early evening to reduce dehydration and bathroom urgency during fasting.",
          "If you feel dizzy or faint, check BP, hydrate after Iftar, and contact your clinician if severe."
        ],
        patient_ar: [
          "Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø¶ØºØ· Ù…Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§: ØºØ§Ù„Ø¨Ù‹Ø§ Ø§Ù„Ø£ÙØ¶Ù„ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ø¨ÙˆÙ‚Øª Ø«Ø§Ø¨Øª.",
          "Ù…Ø¯Ø±Ø§Øª Ø§Ù„Ø¨ÙˆÙ„: Ø§Ù„Ø£ÙØ¶Ù„ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±/Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù„ÙŠÙ„ Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø¬ÙØ§Ù ÙˆÙƒØ«Ø±Ø© Ø§Ù„ØªØ¨ÙˆÙ„ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØµÙŠØ§Ù….",
          "Ø¥Ø°Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙˆØ®Ø© Ø´Ø¯ÙŠØ¯Ø©/Ø¥ØºÙ…Ø§Ø¡: Ù‚Ø³ Ø§Ù„Ø¶ØºØ·ØŒ Ø§Ø´Ø±Ø¨ Ø³ÙˆØ§Ø¦Ù„ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±ØŒ ÙˆØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø·Ø¨ÙŠØ¨ Ø¥Ø°Ø§ Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶ Ù‚ÙˆÙŠØ©."
        ],
        detail_en: [
          "If you have kidney disease, heart failure, or are on multiple BP meds, discuss a fasting plan in advance.",
          "Do not stop BP meds abruptly unless instructed."
        ],
        detail_ar: [
          "Ø¥Ø°Ø§ Ø¹Ù†Ø¯Ùƒ Ù…Ø±Ø¶ ÙƒÙ„ÙˆÙŠ/ÙØ´Ù„ Ù‚Ù„Ø¨ÙŠ Ø£Ùˆ ØªØ³ØªØ®Ø¯Ù… Ø£ÙƒØ«Ø± Ù…Ù† Ø¯ÙˆØ§Ø¡ Ø¶ØºØ·ØŒ Ù†Ø§Ù‚Ø´ Ø®Ø·Ø© Ø§Ù„ØµÙŠØ§Ù… Ù…Ø³Ø¨Ù‚Ù‹Ø§.",
          "Ù„Ø§ ØªÙˆÙ‚Ù Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø¶ØºØ· ÙØ¬Ø£Ø© Ø¥Ù„Ø§ Ø¨ØªÙˆØ¬ÙŠÙ‡."
        ],
        safety_en: [],
        safety_ar: []
      },

      {
        keys: ["dmard","biologic","biologics","methotrexate","mtx","adalimumab","humira","etanercept","enbrel","infliximab","remicade","tocilizumab","rituximab","secukinumab","ustekinumab",
               "tofacitinib","baricitinib","upadacitinib","jak",
               "Ø±ÙˆÙ…Ø§ØªÙŠØ²Ù…","Ù…ÙŠØ«ÙˆØªØ±ÙŠÙƒØ³ÙŠØª","Ø§Ù… ØªÙŠ Ø§ÙƒØ³","Ø§Ø¯Ø§Ù„ÙŠÙ…ÙˆÙ…Ø§Ø¨","Ù‡ÙŠÙˆÙ…ÙŠØ±Ø§","Ø§ÙŠØªØ§Ù†Ø±Ø³Ø¨Øª","Ø§Ù†Ø¨Ø±Ù„","Ø§Ù†ÙÙ„ÙŠÙƒØ³ÙŠÙ…Ø§Ø¨","Ø±ÙŠÙ…ÙŠÙƒØ§Ø¯","ØªÙˆØ³ÙŠÙ„ÙŠØ²ÙˆÙ…Ø§Ø¨","Ø±ÙŠØªÙˆÙƒØ³ÙŠÙ…Ø§Ø¨","Ø³ÙŠÙƒÙŠÙˆÙƒÙŠÙ†ÙˆÙ…Ø§Ø¨","Ø§ÙˆØ³ØªÙŠÙƒÙŠÙ†ÙˆÙ…Ø§Ø¨","ØªÙˆÙØ§Ø³ÙŠØªÙŠÙ†ÙŠØ¨","Ø¨Ø§Ø±ÙŠØ³ÙŠØªÙŠÙ†ÙŠØ¨","Ø§ÙˆØ¨Ø§Ø¯Ø§Ø³ÙŠØªÙŠÙ†ÙŠØ¨","Ø¬Ø§Ùƒ"],
        title_en: "ğŸ¦´ DMARDs & biologics safety",
        title_ar: "ğŸ¦´ Ø³Ù„Ø§Ù…Ø© DMARDs ÙˆØ§Ù„Ø¨ÙŠÙˆÙ„ÙˆØ¬ÙŠØ§Øª",
        patient_en: [
          "Fasting usually does not prevent DMARD/biologic use by itself.",
          "Do NOT stop these medicines abruptly without your specialist (risk of flare).",
          "Key warning: infection symptoms (fever, severe cough, burning urination, infected wounds) â†’ contact your clinic."
        ],
        patient_ar: [
          "Ø§Ù„ØµÙŠØ§Ù… ØºØ§Ù„Ø¨Ù‹Ø§ Ù„Ø§ ÙŠÙ…Ù†Ø¹ Ø§Ø³ØªØ®Ø¯Ø§Ù… DMARD/biologics Ø¨Ø­Ø¯ Ø°Ø§ØªÙ‡.",
          "Ù„Ø§ ØªÙˆÙ‚Ù Ø§Ù„Ø¯ÙˆØ§Ø¡ ÙØ¬Ø£Ø© Ø¨Ø¯ÙˆÙ† Ø·Ø¨ÙŠØ¨Ùƒ (Ù‚Ø¯ ÙŠØ²ÙŠØ¯ Ù†Ø´Ø§Ø· Ø§Ù„Ù…Ø±Ø¶).",
          "Ø£Ù‡Ù… ØªØ­Ø°ÙŠØ±: Ø£Ø¹Ø±Ø§Ø¶ Ø¹Ø¯ÙˆÙ‰ (Ø­Ø±Ø§Ø±Ø©ØŒ ÙƒØ­Ø© Ø´Ø¯ÙŠØ¯Ø©ØŒ Ø£Ù„Ù…/Ø­Ø±Ù‚Ø§Ù† Ø¨ÙˆÙ„ØŒ Ø¬Ø±ÙˆØ­ Ù…Ù„ØªÙ‡Ø¨Ø©) â†’ ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©."
        ],
        detail_en: [
          "Methotrexate is often weeklyâ€”keep a fixed day; take with food if GI upset; follow folic acid plan.",
          "Vaccines/surgery/active infections: decisions to hold therapy must be clinician-led."
        ],
        detail_ar: [
          "Ø§Ù„Ù…ÙŠØ«ÙˆØªØ±ÙŠÙƒØ³ÙŠØª ØºØ§Ù„Ø¨Ù‹Ø§ Ø£Ø³Ø¨ÙˆØ¹ÙŠâ€”Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ ÙŠÙˆÙ… Ø«Ø§Ø¨ØªØ› Ø®Ø°Ù‡ Ù…Ø¹ Ø§Ù„Ø·Ø¹Ø§Ù… Ø¥Ø°Ø§ Ø³Ø¨Ø¨ Ø§Ø¶Ø·Ø±Ø§Ø¨ Ù…Ø¹Ø¯Ø©Ø› ÙˆØ§ØªØ¨Ø¹ Ø®Ø·Ø© Ø§Ù„ÙÙˆÙ„ÙŠÙƒ Ø£Ø³ÙŠØ¯.",
          "Ù„Ù‚Ø§Ø­Ø§Øª/Ø¹Ù…Ù„ÙŠØ§Øª/Ø¹Ø¯ÙˆÙ‰ Ù†Ø´Ø·Ø©: Ù‚Ø±Ø§Ø± Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù Ø£Ùˆ Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø± ÙŠÙƒÙˆÙ† Ù…Ø¹ Ø§Ù„Ø·Ø¨ÙŠØ¨ ÙÙ‚Ø·."
        ],
        safety_en: ["High-risk immunosuppression: do not self-hold/restart without clinician."],
        safety_ar: ["Ù…Ø«Ø¨Ø·Ø§Øª Ù…Ù†Ø§Ø¹Ø© Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø®Ø·ÙˆØ±Ø©: Ù„Ø§ ØªÙˆÙ‚Ù/ØªØ³ØªØ£Ù†Ù Ø¨Ù†ÙØ³Ùƒ Ø¯ÙˆÙ† Ø§Ù„Ø·Ø¨ÙŠØ¨."]
      }
    ];

    function findCard(userText){
      const t = (userText || "").toLowerCase().trim();
      if(!t) return null;
      return CARDS.find(c => c.keys.some(k => t.includes(String(k).toLowerCase())));
    }

    function renderCard(card, lang){
      if(!card) return null;

      const isAR = (lang === "ar");
      const title = isAR ? card.title_ar : card.title_en;

      const patient = isAR ? card.patient_ar : card.patient_en;
      const detail  = isAR ? card.detail_ar  : card.detail_en;
      const safety  = isAR ? card.safety_ar  : card.safety_en;

      const lines = [];
      lines.push(title);

      // Patient-friendly: show only patient bullets (shorter)
      lines.push("");
      const bullets = state.patientMode ? patient : patient.concat(detail.map(x => "DETAIL: " + x));
      for(const b of bullets){
        if(!b) continue;
        // In non-patient mode, mark detail lines slightly
        if(!state.patientMode && b.startsWith("DETAIL: ")){
          lines.push("â€¢ " + b.replace("DETAIL: ",""));
        } else {
          lines.push("â€¢ " + b);
        }
      }

      if(!state.patientMode && safety && safety.length){
        lines.push("");
        lines.push(isAR ? "âš ï¸ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø£Ù…Ø§Ù†:" : "âš ï¸ Safety notes:");
        for(const s of safety) lines.push("â€¢ " + s);
      }

      // Universal disclaimer footer
      lines.push("");
      lines.push(isAR
        ? "â€” Ù„Ù„ØªØ«Ù‚ÙŠÙ ÙÙ‚Ø·. Ù„Ù„Ø¬Ø±Ø¹Ø§Øª Ø§Ù„ÙØ±Ø¯ÙŠØ© Ø§ØªØ¨Ø¹ Ø®Ø·Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨/Ø§Ù„ØµÙŠØ¯Ù„ÙŠ."
        : "â€” Educational only. For individualized dosing, follow your clinician/pharmacist plan."
      );

      return lines.join("\n");
    }

    function fallbackResponse(text){
      const lang = pickLang(text);
      const isAR = (lang === "ar");
      if(isAR){
        return [
          "Ù…Ø§ Ø­ØµÙ„Øª Ù…ÙˆØ¶ÙˆØ¹ Ù…Ø·Ø§Ø¨Ù‚ ØªÙ…Ø§Ù…Ù‹Ø§.",
          "Ø¬Ø±Ù‘Ø¨ÙŠ ØªÙƒØªØ¨/ØªÙƒØªØ¨ÙŠ:",
          "â€¢ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡ (ÙˆØ§Ø±ÙØ±ÙŠÙ†ØŒ Ø§ÙˆÙ…ÙŠØ¨Ø±Ø§Ø²ÙˆÙ„ØŒ Ø£Ù…Ù„ÙˆØ¯ÙŠØ¨ÙŠÙ†ØŒ Ø£ÙˆØºÙ…Ù†ØªÙŠÙ†ØŒ Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ†)",
          "â€¢ Ø£Ùˆ Ø§Ù„ÙƒÙ„Ù…Ø§Øª: DMARD / biologic / Ø¶ØºØ· / Ù…Ø¶Ø§Ø¯ / PPI",
          "",
          "Ø¥Ø°Ø§ Ø¹Ø·ÙŠØªÙ†ÙŠ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡ ÙˆØ¹Ø¯Ø¯ Ø§Ù„Ø¬Ø±Ø¹Ø§Øª (Ù…Ø±Ø©/Ù…Ø±ØªÙŠÙ†/Ø«Ù„Ø§Ø«) Ø£Ù‚Ø¯Ø± Ø£Ø¹Ø·ÙŠ ØªÙˆÙ‚ÙŠØª Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø¥ÙØ·Ø§Ø± ÙˆØ§Ù„Ø³Ø­ÙˆØ±."
        ].join("\n");
      } else {
        return [
          "I couldnâ€™t match that exactly.",
          "Try typing:",
          "â€¢ a medication name (warfarin, omeprazole, amlodipine, Augmentin, insulin)",
          "â€¢ or keywords: DMARD / biologic / BP / antibiotic / PPI",
          "",
          "If you tell me the drug name + dosing frequency (OD/BID/TID), Iâ€™ll suggest Ramadan-friendly timing for Iftar/Suhoor."
        ].join("\n");
      }
    }

    function handleUser(text){
      const cleaned = (text || "").trim();
      if(!cleaned) return;

      addMessage("user", cleaned);

      const lang = pickLang(cleaned);
      const card = findCard(cleaned);
      const reply = card ? renderCard(card, lang) : fallbackResponse(cleaned);

      addMessage("bot", reply, {lang});
    }

    // ===== UI events =====
    $("sendBtn").addEventListener("click", () => {
      handleUser(inputEl.value);
      inputEl.value = "";
      inputEl.focus();
    });

    inputEl.addEventListener("keydown", (e) => {
      if(e.key === "Enter"){
        e.preventDefault();
        $("sendBtn").click();
      }
    });

    $("resetBtn").addEventListener("click", resetChat);

    // Quick topic chips
    $("chips").addEventListener("click", (e) => {
      const chip = e.target.closest(".chip");
      if(!chip) return;
      const q = chip.getAttribute("data-q") || "";
      handleUser(q);
    });

    // Patient-friendly toggle
    $("modeToggle").addEventListener("click", () => {
      state.patientMode = !state.patientMode;
      document.body.classList.toggle("patient-mode", state.patientMode);
      $("modeLabel").textContent = state.patientMode ? "ON" : "OFF";

      // Add a small system note
      addMessage("bot",
        state.patientMode
          ? "ğŸ˜Š Patient-friendly mode is ON (simpler, bigger text)."
          : "âœ… Patient-friendly mode is OFF (more details).",
        {lang:"en"}
      );
      addMessage("bot",
        state.patientMode
          ? "ğŸ˜Š ØªÙ… ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø±ÙŠØ¶ (Ù…Ø¨Ø³Ù‘Ø· ÙˆØ®Ø· Ø£ÙƒØ¨Ø±)."
          : "âœ… ØªÙ… Ø¥Ù„ØºØ§Ø¡ ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø±ÙŠØ¶ (ØªÙØ§ØµÙŠÙ„ Ø£ÙƒØ«Ø±).",
        {lang:"ar"}
      );
    });

    // Language toggle (Auto â†’ EN â†’ AR â†’ Auto)
    $("langToggle").addEventListener("click", () => {
      state.langMode = state.langMode === "auto" ? "en" : (state.langMode === "en" ? "ar" : "auto");
      const label = state.langMode === "auto" ? "Auto" : (state.langMode === "en" ? "EN" : "AR");
      $("langLabel").textContent = label;

      addMessage("bot",
        `Language mode set to: ${label}.`,
        {lang:"en"}
      );
      addMessage("bot",
        `ØªÙ… Ø¶Ø¨Ø· Ø§Ù„Ù„ØºØ© Ø¥Ù„Ù‰: ${label}.`,
        {lang:"ar"}
      );
    });

    // ===== Init =====
    seedWelcome();
  </script>
</body>
</html>
