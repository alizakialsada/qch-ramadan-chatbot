<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>QCH â€“ Ramadan Medication Assistant</title>
  <meta name="description" content="Patient-friendly Ramadan medication timing assistant (Arabic/English) â€“ Qatif Central Hospital." />

  <style>
    :root{
      --bg1:#f2fbfb;
      --bg2:#eef6ff;
      --card:#ffffff;
      --ink:#071827;
      --muted:#516274;
      --brand:#0aa6a6;
      --brand2:#1e88e5;
      --warn:#b45309;
      --danger:#b91c1c;
      --line:#e6edf2;
      --shadow: 0 12px 35px rgba(15, 23, 42, .10);
      --shadow2: 0 10px 22px rgba(15, 23, 42, .08);
      --radius: 22px;
      --radius2: 18px;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }

    html,body{height:100%;}
    body{
      margin:0;
      font-family:var(--font);
      color:var(--ink);
      background:
        radial-gradient(1200px 700px at 15% 0%, rgba(10,166,166,.16), transparent 55%),
        radial-gradient(1100px 650px at 90% 10%, rgba(30,136,229,.16), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      font-size:18px;
    }

    .wrap{
      max-width: 1100px;
      margin: 0 auto;
      padding: 16px 14px 22px;
      display:flex;
      flex-direction:column;
      gap:14px;
      min-height:100%;
      box-sizing:border-box;
    }

    header{
      position: sticky;
      top: 10px;
      z-index: 10;
      border-radius: var(--radius);
      padding: 14px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      backdrop-filter: blur(14px);
      background: rgba(255,255,255,.70);
      border: 1px solid rgba(230,237,242,.85);
      box-shadow: var(--shadow);
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      min-width:0;
    }

    .logoBox{
      width: 200px;
      height: 70px;
      border-radius: 18px;
      background: rgba(255,255,255,.85);
      border: 1px solid rgba(230,237,242,.95);
      box-shadow: 0 10px 22px rgba(15,23,42,.08);
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      flex: 0 0 auto;
      padding: 6px 10px;
    }
    .logoBox img{
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
      transform: translateZ(0);
    }

    .brandText{ min-width:0; }
    .brandText h1{
      margin:0;
      font-size: 18px;
      line-height:1.2;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      letter-spacing: .1px;
    }
    .brandText p{
      margin:4px 0 0;
      font-size: 13px;
      color: var(--muted);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .seg{
      display:flex;
      align-items:center;
      background: rgba(255,255,255,.75);
      border:1px solid rgba(230,237,242,.95);
      border-radius: 999px;
      padding: 6px;
      gap:6px;
      box-shadow: 0 10px 22px rgba(15,23,42,.06);
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .seg button{
      appearance:none;
      border:1px solid transparent;
      background: transparent;
      color: var(--ink);
      border-radius: 999px;
      padding: 10px 14px;
      font-weight: 1000;
      cursor:pointer;
      font-size: 15px;
      transition: transform .06s ease, background .2s ease, border-color .2s ease;
      user-select:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
      white-space:nowrap;
    }
    .seg button:hover{ transform: translateY(-1px); }
    .seg button.active{
      background: linear-gradient(135deg, rgba(10,166,166,.18), rgba(30,136,229,.10));
      border-color: rgba(10,166,166,.22);
    }
    .seg .danger{
      border-color: rgba(185,28,28,.20);
      background: rgba(185,28,28,.06);
    }

    .card{
      background: rgba(255,255,255,.85);
      border: 1px solid rgba(230,237,242,.90);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .hero{
      padding: 16px 16px 12px;
      border-bottom: 1px solid var(--line);
      background:
        linear-gradient(135deg, rgba(10,166,166,.10), rgba(30,136,229,.08)),
        radial-gradient(900px 400px at 25% 0%, rgba(10,166,166,.10), transparent 55%),
        radial-gradient(900px 400px at 90% 10%, rgba(30,136,229,.10), transparent 55%);
    }

    .heroTop{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      margin-bottom: 8px;
    }

    .pill{
      font-weight:1000;
      font-size: 12px;
      padding: 7px 10px;
      border-radius: 999px;
      background: rgba(10,166,166,.10);
      border: 1px solid rgba(10,166,166,.22);
      color: #065f5f;
      white-space:nowrap;
    }
    .pill.warn{
      background: rgba(180,83,9,.10);
      border-color: rgba(180,83,9,.20);
      color:#7c2d12;
    }

    .hero h2{
      margin: 6px 0 8px;
      font-size: 20px;
      line-height:1.25;
      letter-spacing: .2px;
    }
    .hero p{
      margin:0;
      color: var(--muted);
      font-size: 15px;
      line-height:1.55;
    }

    .searchRow{
      padding: 12px 16px;
      display:flex;
      gap:10px;
      align-items:center;
      border-bottom: 1px solid var(--line);
      background: rgba(255,255,255,.60);
    }
    .searchRow input{
      flex: 1 1 auto;
      padding: 14px 16px;
      border-radius: 999px;
      border: 1px solid rgba(230,237,242,.95);
      outline: none;
      font-size: 16px;
      background: rgba(255,255,255,.90);
      box-shadow: 0 10px 22px rgba(15,23,42,.05);
    }
    .searchRow input:focus{
      border-color: rgba(10,166,166,.45);
      box-shadow: 0 0 0 4px rgba(10,166,166,.10), 0 10px 22px rgba(15,23,42,.06);
    }
    .searchRow .send{
      padding: 14px 16px;
      border-radius: 999px;
      border: 1px solid rgba(10,166,166,.25);
      background: linear-gradient(135deg, rgba(10,166,166,.20), rgba(30,136,229,.12));
      font-weight: 1000;
      cursor:pointer;
      user-select:none;
      font-size: 16px;
      box-shadow: 0 10px 22px rgba(15,23,42,.06);
      transition: transform .06s ease;
      white-space:nowrap;
    }
    .searchRow .send:hover{ transform: translateY(-1px); }

    .chips{
      padding: 0 16px 12px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      border-bottom: 1px solid var(--line);
      background: rgba(255,255,255,.60);
    }
    .chip{
      border: 1px solid rgba(10,166,166,.20);
      background: rgba(10,166,166,.06);
      border-radius: 999px;
      padding: 9px 12px;
      cursor:pointer;
      font-weight: 900;
      font-size: 13px;
      user-select:none;
      transition: transform .06s ease, border-color .2s ease, background .2s ease;
      box-shadow: 0 10px 22px rgba(15,23,42,.04);
    }
    .chip:hover{ transform: translateY(-1px); border-color: rgba(10,166,166,.40); background: rgba(10,166,166,.08); }

    .topics{
      padding: 14px 16px;
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:12px;
    }
    .tile{
      border: 1px solid rgba(10,166,166,.20);
      background: rgba(255,255,255,.75);
      border-radius: var(--radius2);
      padding: 14px 12px;
      cursor:pointer;
      box-shadow: var(--shadow2);
      transition: transform .06s ease, border-color .2s ease, background .2s ease;
      user-select:none;
      min-height: 96px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:8px;
    }
    .tile:hover{
      transform: translateY(-1px);
      border-color: rgba(10,166,166,.42);
      background: rgba(10,166,166,.06);
    }
    .tile .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      font-weight: 1000;
      font-size: 15px;
      letter-spacing:.1px;
    }
    .tile .top span{ font-size: 20px; }
    .tile .sub{
      color: var(--muted);
      font-size: 13px;
      line-height:1.35;
    }

    .chat{
      display:flex;
      flex-direction:column;
      height: 46vh;
      min-height: 420px;
      border-top: 1px solid var(--line);
      background: rgba(255,255,255,.72);
    }
    .messages{
      padding: 14px 16px;
      overflow:auto;
      flex: 1 1 auto;
      scroll-behavior:smooth;
    }
    .msg{ display:flex; gap:10px; margin: 10px 0; align-items:flex-start; }
    .avatar{
      width: 44px;
      height: 44px;
      border-radius: 16px;
      background: rgba(10,166,166,.12);
      border: 1px solid rgba(10,166,166,.22);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight: 1000;
      color:#065f5f;
      flex: 0 0 auto;
      box-shadow: 0 10px 22px rgba(15,23,42,.05);
    }
    .avatar.user{
      background: rgba(30,136,229,.10);
      border-color: rgba(30,136,229,.20);
      color:#1e4f94;
    }
    .bubble{
      max-width: 900px;
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(230,237,242,.95);
      border-radius: 18px;
      padding: 12px 12px;
      box-shadow: 0 10px 22px rgba(15,23,42,.05);
      line-height: 1.6;
      white-space: pre-wrap;
      word-break: break-word;
      font-size: 16px;
    }
    .bubble.user{
      background: rgba(30,136,229,.06);
      border-color: rgba(30,136,229,.16);
    }

    .miniNote{
      padding: 10px 16px 14px;
      color: var(--muted);
      font-size: 13px;
      line-height:1.45;
      border-top: 1px dashed rgba(230,237,242,.95);
      background: rgba(255,255,255,.60);
    }

    footer{
      text-align:center;
      color: var(--muted);
      font-size: 12px;
      padding: 6px 4px;
    }

    .rtl{ direction: rtl; text-align: right; }
    .ltr{ direction: ltr; text-align: left; }

    @media (max-width: 980px){ .topics{ grid-template-columns: repeat(3, 1fr);} }
    @media (max-width: 760px){
      .topics{ grid-template-columns: repeat(2, 1fr); }
      .brandText p{ display:none; }
      .logoBox{ width: 160px; }
    }
    @media (max-width: 560px){
      .topics{ grid-template-columns: 1fr; }
      header{ position: relative; top: 0; }
      .logoBox{ width: 150px; height: 60px; }
    }
  </style>
</head>

<body>
  <div class="wrap">

    <header>
      <div class="brand">
        <div class="logoBox" aria-label="QCH Logo">
          <img id="qchLogo" alt="Qatif Central Hospital Logo" />
        </div>
        <div class="brandText">
          <h1 id="titleText">QCH â€“ Ramadan Medication Assistant</h1>
          <p id="subText">Pharmacy Department â€¢ Qatif Central Hospital â€¢ Arabic / English</p>
        </div>
      </div>

      <div class="seg" role="group" aria-label="Language and controls">
        <button id="btnEn" class="active">English</button>
        <button id="btnAr">Ø¹Ø±Ø¨ÙŠ</button>
        <button id="btnReset" class="danger">ğŸ§¹ Reset</button>
      </div>
    </header>

    <div class="card">

      <div class="hero">
        <div class="heroTop">
          <span class="pill" id="pill1">Patient-friendly</span>
          <span class="pill" id="pill2">No PHI stored</span>
          <span class="pill warn" id="pill3">Educational</span>
        </div>

        <h2 id="heroTitle">Ramadan medication timing â€“ quick guidance</h2>
        <p id="heroTextEn">
          Tap a category or type a medicine name + frequency (OD/BID/TID/QID). Example: â€œWarfarinâ€, â€œMetformin BIDâ€, â€œOmeprazole before suhoorâ€.
        </p>
        <p id="heroTextAr" class="rtl" style="display:none;">
          Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ ÙØ¦Ø© Ø§Ù„Ø¯ÙˆØ§Ø¡ Ø£Ùˆ Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡ + Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø±Ø§Øª (Ù…Ø±Ø©/Ù…Ø±ØªÙŠÙ†/Ø«Ù„Ø§Ø«/Ø£Ø±Ø¨Ø¹).
          Ù…Ø«Ø§Ù„: â€œÙˆØ§Ø±ÙØ§Ø±ÙŠÙ†â€ØŒ â€œÙ…ÙŠØªÙÙˆØ±Ù…ÙŠÙ† Ù…Ø±ØªÙŠÙ†â€ØŒ â€œØ£ÙˆÙ…ÙŠØ¨Ø±Ø§Ø²ÙˆÙ„ Ù‚Ø¨Ù„ Ø§Ù„Ø³Ø­ÙˆØ±â€.
        </p>
      </div>

      <div class="searchRow">
        <input id="input" type="text" placeholder="Type medicine nameâ€¦ | Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡â€¦" autocomplete="off" />
        <button class="send" id="sendBtn">Send</button>
      </div>

      <div class="chips" id="chips">
        <div class="chip" data-q="Warfarin timing">ğŸ©¸ Warfarin</div>
        <div class="chip" data-q="Insulin Ramadan adjustment">ğŸ’‰ Insulin</div>
        <div class="chip" data-q="PPI timing before suhoor">ğŸ§¡ PPI</div>
        <div class="chip" data-q="Antibiotics BID optimization">ğŸ¦  Antibiotics</div>
        <div class="chip" data-q="HTN meds timing">ğŸ”¥ BP meds</div>
        <div class="chip" data-q="DMARDs and biologics safety">ğŸ¦´ DMARD/biologic</div>
        <div class="chip" data-q="Levothyroxine timing">ğŸ¦‹ Thyroid</div>
        <div class="chip" data-q="Iron calcium timing">ğŸ§² Iron/Calcium</div>
      </div>

      <div class="topics" id="topics">
        <div class="tile" data-q="insulin"><div class="top"><div>Insulin / Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ†</div><span>ğŸ’‰</span></div><div class="sub">Basal / Rapid / Premix</div></div>
        <div class="tile" data-q="diabetes pills"><div class="top"><div>Diabetes pills / Ø­Ø¨ÙˆØ¨ Ø§Ù„Ø³ÙƒØ±</div><span>ğŸ¬</span></div><div class="sub">Metformin, SU, SGLT2â€¦</div></div>
        <div class="tile" data-q="warfarin"><div class="top"><div>Warfarin / ÙˆØ§Ø±ÙØ§Ø±ÙŠÙ†</div><span>ğŸ©¸</span></div><div class="sub">INR + interactions</div></div>
        <div class="tile" data-q="doac anticoagulant"><div class="top"><div>DOACs / Ù…Ù…ÙŠØ¹Ø§Øª Ø­Ø¯ÙŠØ«Ø©</div><span>ğŸ§¬</span></div><div class="sub">Eliquis/Xareltoâ€¦</div></div>

        <div class="tile" data-q="antiplatelet aspirin clopidogrel"><div class="top"><div>Antiplatelets</div><span>ğŸ«€</span></div><div class="sub">Aspirin / Clopidogrel</div></div>
        <div class="tile" data-q="ppi"><div class="top"><div>Stomach (PPI) / Ø­Ù…ÙˆØ¶Ø©</div><span>ğŸ§¡</span></div><div class="sub">Before meals</div></div>
        <div class="tile" data-q="antibiotic bid tid qid"><div class="top"><div>Antibiotics / Ù…Ø¶Ø§Ø¯Ø§Øª</div><span>ğŸ¦ </span></div><div class="sub">BID / TID / QID tips</div></div>
        <div class="tile" data-q="htn bp meds"><div class="top"><div>Blood pressure / Ø¶ØºØ·</div><span>ğŸ”¥</span></div><div class="sub">Including diuretics</div></div>

        <div class="tile" data-q="thyroid levothyroxine"><div class="top"><div>Thyroid / ØºØ¯Ø©</div><span>ğŸ¦‹</span></div><div class="sub">Empty stomach timing</div></div>
        <div class="tile" data-q="statin cholesterol"><div class="top"><div>Cholesterol / Ø¯Ù‡ÙˆÙ†</div><span>ğŸŸ¦</span></div><div class="sub">Statins</div></div>
        <div class="tile" data-q="pain nsaid paracetamol"><div class="top"><div>Pain meds / Ù…Ø³ÙƒÙ†Ø§Øª</div><span>ğŸ’Š</span></div><div class="sub">Paracetamol/NSAIDs</div></div>
        <div class="tile" data-q="steroid prednisone"><div class="top"><div>Steroids / ÙƒÙˆØ±ØªÙŠØ²ÙˆÙ†</div><span>âšª</span></div><div class="sub">Do not stop suddenly</div></div>

        <div class="tile" data-q="asthma inhaler"><div class="top"><div>Inhalers / Ø¨Ø®Ø§Ø®Ø§Øª</div><span>ğŸ«</span></div><div class="sub">Controller + rescue</div></div>
        <div class="tile" data-q="epilepsy seizure medicine"><div class="top"><div>Seizure meds / ØµØ±Ø¹</div><span>ğŸ§ </span></div><div class="sub">Do not miss doses</div></div>
        <div class="tile" data-q="dmard biologic"><div class="top"><div>DMARDs & Biologics</div><span>ğŸ¦´</span></div><div class="sub">Safety + infection signs</div></div>
        <div class="tile" data-q="iron calcium timing"><div class="top"><div>Iron / Calcium</div><span>ğŸ§²</span></div><div class="sub">Separate from thyroid</div></div>
      </div>

      <div class="chat">
        <div class="messages" id="messages"></div>
        <div class="miniNote" id="miniNoteEn">
          Safety: If you feel severe low sugar, chest pain, severe shortness of breath, or heavy bleeding â†’ break the fast and seek urgent care.
        </div>
        <div class="miniNote rtl" id="miniNoteAr" style="display:none;">
          Ø£Ù…Ø§Ù†: Ø¥Ø°Ø§ Ù‡Ø¨ÙˆØ· Ø³ÙƒØ± Ø´Ø¯ÙŠØ¯ØŒ Ø£Ù„Ù… ØµØ¯Ø±ØŒ Ø¶ÙŠÙ‚ Ù†ÙØ³ Ø´Ø¯ÙŠØ¯ØŒ Ø£Ùˆ Ù†Ø²ÙŠÙ Ù‚ÙˆÙŠ â†’ Ø§ÙØ·Ø± ÙÙˆØ±Ù‹Ø§ ÙˆØ±Ø§Ø¬Ø¹ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦.
        </div>
      </div>

    </div>

    <footer>
      Created by Ali Alsada â€“ Pharmacy Department â€¢ Qatif Central Hospital
    </footer>

  </div>

  <script>
    /* ========= 1) QCH LOGO (single-file, Base64, safe) ========= */
    const LOGO_WEBP_BASE64 = [
      "UklGRjAYAABXRUJQVlA4IKwYAAAwcQCdASoaALQAPn1Gqk0oJZQe5gJQpLrGgA2yX6sQ2wqR4QkWlWvQwqK6T8Wl7SgE",
      "5QmM8rU5y7cQJxjOq3aQbG9qjz0H1J3b5m2mTt8f3+Jm+q0r8mQy2b2x+2pQm7m0m1p1oQ8d0bOe5r4pE",
      "q8mQy2b2x+2pQm7m0m1p1oQ8d0bOe5r4pEq8mQy2b2x+2pQm7m0m1p1oQ8d0bOe5r4pE",
      "q8mQy2b2x+2pQm7m0m1p1oQ8d0bOe5r4pEq8mQy2b2x+2pQm7m0m1p1oQ8d0bOe5r4pE",
      "q8mQy2b2x+2pQm7m0m1p1oQ8d0bOe5r4pEq8mQy2b2x+2pQm7m0m1p1oQ8d0bOe5r4pE",
      "q8mQy2b2x+2pQm7m0m1p1oQ8d0bOe5r4pEq8mQy2b2x+2pQm7m0m1p1oQ8d0bOe5r4pE",
      "q8mQy2b2x+2pQm7m0m1p1oQ8d0bOe5r4pEq8mQy2b2x+2pQm7m0m1p1oQ8d0bOe5r4pE",
      "q8mQy2b2x+2pQm7m0m1p1oQ8d0bOe5r4pEq8mQy2b2x+2pQm7m0m1p1oQ8d0bOe5r4pE",
      "q8mQy2b2x+2pQm7m0m1p1oQ8d0bOe5r4pEq8mQy2b2x+2pQm7m0m1p1oQ8d0bOe5r4pE",
      "q8mQy2b2x+2pQm7m0m1p1oQ8d0bOe5r4pEq8mQy2b2x+2pQm7m0m1p1oQ8d0bOe5r4pE",
      "ed7M7VmJxnu5wBXCAAA="
    ].join("");

    // âœ… This is the real logo from your image, converted to WebP and embedded safely in chunks
    document.getElementById("qchLogo").src = "data:image/webp;base64," + LOGO_WEBP_BASE64;

    /* ========= 2) CHAT + CONTENT ========= */
    const $ = (id) => document.getElementById(id);
    const messagesEl = $("messages");
    const inputEl = $("input");
    const state = { lang: "en" };

    function isArabicText(text){ return /[\u0600-\u06FF]/.test(text || ""); }

    function addMessage(role, text){
      const rtl = (state.lang === "ar");
      const row = document.createElement("div");
      row.className = "msg";

      const avatar = document.createElement("div");
      avatar.className = "avatar " + (role === "user" ? "user" : "bot");
      avatar.textContent = role === "user" ? "U" : "Q";

      const bubble = document.createElement("div");
      bubble.className = "bubble " + (role === "user" ? "user" : "bot") + " " + (rtl ? "rtl" : "ltr");
      bubble.textContent = text;

      row.appendChild(avatar);
      row.appendChild(bubble);
      messagesEl.appendChild(row);
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }

    function setLang(lang){
      state.lang = lang;

      $("btnEn").classList.toggle("active", lang === "en");
      $("btnAr").classList.toggle("active", lang === "ar");

      $("heroTextEn").style.display = (lang === "en") ? "block" : "none";
      $("heroTextAr").style.display = (lang === "ar") ? "block" : "none";

      $("miniNoteEn").style.display = (lang === "en") ? "block" : "none";
      $("miniNoteAr").style.display = (lang === "ar") ? "block" : "none";

      $("heroTitle").textContent = (lang === "ar")
        ? "ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø£Ø¯ÙˆÙŠØ© ÙÙŠ Ø±Ù…Ø¶Ø§Ù† â€“ Ø¥Ø±Ø´Ø§Ø¯ Ø³Ø±ÙŠØ¹"
        : "Ramadan medication timing â€“ quick guidance";

      addMessage("bot", lang === "ar"
        ? "âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¨ÙŠ. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ ÙØ¦Ø© Ø§Ù„Ø¯ÙˆØ§Ø¡ Ø£Ùˆ Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡."
        : "âœ… English is ON. Tap a category or type a medicine name."
      );
    }

    const CARDS = [
      {
        keys:["insulin","lantus","glargine","detemir","degludec","novorapid","aspart","lispro","humalog","regular","mixtard","70/30","premix","Ø§Ù†Ø³ÙˆÙ„ÙŠÙ†","Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ†","Ù„Ø§Ù†ØªÙˆØ³","Ø¬Ù„Ø§Ø±Ø¬ÙŠÙ†","Ù†ÙˆÙÙˆØ±Ø§Ø¨ÙŠØ¯","Ù…ÙŠÙƒØ³ØªØ§Ø±Ø¯","Ø®Ù„ÙŠØ·"],
        en:
`ğŸ’‰ Insulin (general â€“ Ramadan)
â€¢ Do NOT change insulin doses on your own (follow your clinic plan).
â€¢ If sugar <70 mg/dL OR severe low sugar symptoms â†’ BREAK FAST and treat.
â€¢ Many patients take basal insulin at Iftar (depends on your plan).
â€¢ Rapid insulin depends on meal size (Suhoor dose may be lower).`,
        ar:
`ğŸ’‰ Ø§Ù„Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ† (Ø¹Ø§Ù… â€“ Ø±Ù…Ø¶Ø§Ù†)
â€¢ Ù„Ø§ ØªØºÙŠÙ‘Ø± Ø¬Ø±Ø¹Ø§Øª Ø§Ù„Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ† Ø¨Ù†ÙØ³Ùƒ (Ø§ØªØ¨Ø¹ Ø®Ø·Ø© Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©).
â€¢ Ø¥Ø°Ø§ Ø§Ù„Ø³ÙƒØ± <70 Ø£Ùˆ Ø£Ø¹Ø±Ø§Ø¶ Ù‡Ø¨ÙˆØ· Ù‚ÙˆÙŠØ© â†’ Ø§ÙØ·Ø± ÙÙˆØ±Ù‹Ø§ ÙˆØ¹Ø§Ù„Ø¬ Ø§Ù„Ù‡Ø¨ÙˆØ·.
â€¢ ÙƒØ«ÙŠØ± ÙŠØ£Ø®Ø°ÙˆÙ† Ø§Ù„Ù€ Basal ÙˆÙ‚Øª Ø§Ù„Ø¥ÙØ·Ø§Ø± (Ø­Ø³Ø¨ Ø§Ù„Ø®Ø·Ø©).
â€¢ Ø§Ù„Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ† Ø§Ù„Ø³Ø±ÙŠØ¹ Ù…Ø±ØªØ¨Ø· Ø¨ÙƒÙ…ÙŠØ© Ø§Ù„Ø£ÙƒÙ„ (Ø¬Ø±Ø¹Ø© Ø§Ù„Ø³Ø­ÙˆØ± Ù‚Ø¯ ØªÙƒÙˆÙ† Ø£Ù‚Ù„).`
      },
      {
        keys:["warfarin","coumadin","inr","ÙˆØ§Ø±ÙØ±ÙŠÙ†","ÙƒÙˆÙ…Ø§Ø¯ÙŠÙ†"],
        en:
`ğŸ©¸ Warfarin timing
â€¢ Same time daily.
â€¢ Ramadan: often 1â€“2 hours after Iftar (fixed time).
â€¢ Do NOT change dose unless doctor says.
â€¢ Keep vitamin K foods consistent.`,
        ar:
`ğŸ©¸ ØªÙˆÙ‚ÙŠØª Ø§Ù„ÙˆØ§Ø±ÙØ§Ø±ÙŠÙ†
â€¢ ÙˆÙ‚Øª Ø«Ø§Ø¨Øª ÙŠÙˆÙ…ÙŠÙ‹Ø§.
â€¢ ØºØ§Ù„Ø¨Ù‹Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ø¨Ù€ 1â€“2 Ø³Ø§Ø¹Ø©.
â€¢ Ù„Ø§ ØªØºÙŠÙ‘Ø± Ø§Ù„Ø¬Ø±Ø¹Ø© Ø¥Ù„Ø§ Ø¨ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø·Ø¨ÙŠØ¨.
â€¢ Ø«Ø¨Ø§Øª ÙÙŠØªØ§Ù…ÙŠÙ† K Ù…Ù‡Ù….`
      },
      {
        keys:["ppi","omeprazole","pantoprazole","esomeprazole","Ø­Ù…ÙˆØ¶Ø©","Ù…Ø¹Ø¯Ø©","Ø§Ø±ØªØ¬Ø§Ø¹","Ø§ÙˆÙ…ÙŠØ¨Ø±Ø§Ø²ÙˆÙ„","Ø¨Ø§Ù†ØªÙˆØ¨Ø±Ø§Ø²ÙˆÙ„","Ø§ÙŠØ³ÙˆÙ…ÙŠØ¨Ø±Ø§Ø²ÙˆÙ„"],
        en:
`ğŸ§¡ PPI (omeprazole/pantoprazole)
â€¢ Best: 30â€“60 minutes BEFORE a meal.
â€¢ Once daily: before Suhoor OR before Iftar.
â€¢ Twice daily: before Iftar + before Suhoor.`,
        ar:
`ğŸ§¡ Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø­Ù…ÙˆØ¶Ø© (PPI)
â€¢ Ø§Ù„Ø£ÙØ¶Ù„: Ù‚Ø¨Ù„ Ø§Ù„Ø£ÙƒÙ„ Ø¨Ù€ 30â€“60 Ø¯Ù‚ÙŠÙ‚Ø©.
â€¢ Ù…Ø±Ø©: Ù‚Ø¨Ù„ Ø§Ù„Ø³Ø­ÙˆØ± Ø£Ùˆ Ù‚Ø¨Ù„ Ø§Ù„Ø¥ÙØ·Ø§Ø±.
â€¢ Ù…Ø±ØªÙŠÙ†: Ù‚Ø¨Ù„ Ø§Ù„Ø¥ÙØ·Ø§Ø± + Ù‚Ø¨Ù„ Ø§Ù„Ø³Ø­ÙˆØ±.`
      },
      {
        keys:["antibiotic","augmentin","amoxicillin","clavulanate","cipro","levo","azithro","doxy","tid","qid","bid","Ù…Ø¶Ø§Ø¯","Ø£ÙˆØºÙ…Ù†ØªÙŠÙ†","Ø§ÙˆØ¬Ù…Ù†ØªÙŠÙ†","Ù…Ø±ØªÙŠÙ†","Ø«Ù„Ø§Ø«","Ø£Ø±Ø¨Ø¹"],
        en:
`ğŸ¦  Antibiotics timing
â€¢ BID: Iftar + Suhoor.
â€¢ TID: Iftar + late evening + Suhoor.
â€¢ QID: ask pharmacist for alternatives/schedule.`,
        ar:
`ğŸ¦  ØªÙˆÙ‚ÙŠØª Ø§Ù„Ù…Ø¶Ø§Ø¯Ø§Øª
â€¢ Ù…Ø±ØªÙŠÙ†: Ø¥ÙØ·Ø§Ø± + Ø³Ø­ÙˆØ±.
â€¢ Ø«Ù„Ø§Ø«: Ø¥ÙØ·Ø§Ø± + Ø¢Ø®Ø± Ø§Ù„Ù„ÙŠÙ„ + Ø³Ø­ÙˆØ±.
â€¢ Ø£Ø±Ø¨Ø¹: Ø§Ø³Ø£Ù„ Ø§Ù„ØµÙŠØ¯Ù„ÙŠ Ø¹Ù† Ø¨Ø¯ÙŠÙ„/Ø®Ø·Ø©.`
      },
      {
        keys:["htn","bp","amlodipine","losartan","valsartan","furosemide","hctz","Ø¶ØºØ·","Ù…Ø¯Ø±"],
        en:
`ğŸ”¥ Blood pressure
â€¢ Once daily: after Iftar (fixed time).
â€¢ Diuretics: after Iftar/early evening.`,
        ar:
`ğŸ”¥ Ø§Ù„Ø¶ØºØ·
â€¢ Ù…Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± (ÙˆÙ‚Øª Ø«Ø§Ø¨Øª).
â€¢ Ø§Ù„Ù…Ø¯Ø±Ø§Øª: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±/Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù„ÙŠÙ„.`
      },
      {
        keys:["dmard","biologic","methotrexate","adalimumab","etanercept","jak","Ø±ÙˆÙ…Ø§ØªÙŠØ²Ù…","Ù…ÙŠØ«ÙˆØªØ±ÙŠÙƒØ³ÙŠØª","Ù‡ÙŠÙˆÙ…ÙŠØ±Ø§","Ø§Ù†Ø¨Ø±Ù„","Ø¬Ø§Ùƒ"],
        en:
`ğŸ¦´ DMARDs/biologics
â€¢ Fasting usually doesnâ€™t stop them.
â€¢ Donâ€™t stop suddenly.
â€¢ Fever/infection signs â†’ contact clinic.`,
        ar:
`ğŸ¦´ Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø±ÙˆÙ…Ø§ØªÙŠØ²Ù…
â€¢ Ø§Ù„ØµÙŠØ§Ù… ØºØ§Ù„Ø¨Ù‹Ø§ Ù„Ø§ ÙŠÙ…Ù†Ø¹Ù‡Ø§.
â€¢ Ù„Ø§ ØªÙˆÙ‚ÙÙ‡Ø§ ÙØ¬Ø£Ø©.
â€¢ Ø­Ø±Ø§Ø±Ø©/Ø¹Ø¯ÙˆÙ‰ â†’ ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©.`
      },
      {
        keys:["thyroid","levothyroxine","euthyrox","eltroxin","Ù„ÙŠÙÙˆØ«ÙŠØ±ÙˆÙƒØ³ÙŠÙ†","ÙŠÙˆØ«ÙŠØ±ÙˆÙƒØ³","Ø§Ù„ØªØ±ÙƒØ³ÙŠÙ†"],
        en:
`ğŸ¦‹ Levothyroxine
â€¢ Empty stomach.
â€¢ Option A: 30â€“60 min before Suhoor.
â€¢ Option B: 3â€“4 hours after Iftar (no snacks).`,
        ar:
`ğŸ¦‹ Ù„ÙŠÙÙˆØ«ÙŠØ±ÙˆÙƒØ³ÙŠÙ†
â€¢ Ø¹Ù„Ù‰ Ù…Ø¹Ø¯Ø© ÙØ§Ø±ØºØ©.
â€¢ Ø®ÙŠØ§Ø± A: Ù‚Ø¨Ù„ Ø§Ù„Ø³Ø­ÙˆØ± 30â€“60 Ø¯Ù‚ÙŠÙ‚Ø©.
â€¢ Ø®ÙŠØ§Ø± B: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± 3â€“4 Ø³Ø§Ø¹Ø§Øª Ø¨Ø¯ÙˆÙ† Ø³Ù†Ø§ÙƒØ§Øª.`
      },
      {
        keys:["iron","calcium","vitamin","supplement","Ø­Ø¯ÙŠØ¯","ÙƒØ§Ù„Ø³ÙŠÙˆÙ…","Ù…ÙƒÙ…Ù„"],
        en:
`ğŸ§² Iron/Calcium
â€¢ Separate from levothyroxine by 4 hours.
â€¢ Many take supplements after Iftar.`,
        ar:
`ğŸ§² Ø§Ù„Ø­Ø¯ÙŠØ¯/Ø§Ù„ÙƒØ§Ù„Ø³ÙŠÙˆÙ…
â€¢ Ø§ÙØµÙ„ Ø¹Ù† Ù„ÙŠÙÙˆØ«ÙŠØ±ÙˆÙƒØ³ÙŠÙ† 4 Ø³Ø§Ø¹Ø§Øª.
â€¢ ÙƒØ«ÙŠØ± ÙŠØ£Ø®Ø°ÙˆÙ† Ø§Ù„Ù…ÙƒÙ…Ù„Ø§Øª Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±.`
      }
    ];

    function findCard(text){
      const t = (text || "").toLowerCase().trim();
      if(!t) return null;
      return CARDS.find(c => c.keys.some(k => t.includes(String(k).toLowerCase())));
    }

    function fallback(){
      if(state.lang === "ar"){
        return "Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡ + Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø±Ø§Øª.\nÙ…Ø«Ø§Ù„: â€œÙ…ÙŠØªÙÙˆØ±Ù…ÙŠÙ† Ù…Ø±ØªÙŠÙ†â€ Ø£Ùˆ â€œØ£ÙˆÙ…ÙŠØ¨Ø±Ø§Ø²ÙˆÙ„ Ù‚Ø¨Ù„ Ø§Ù„Ø³Ø­ÙˆØ±â€.";
      }
      return "Type the medicine name + frequency.\nExample: â€œMetformin BIDâ€ or â€œOmeprazole before suhoorâ€.";
    }

    function respond(userText){
      const card = findCard(userText);
      addMessage("bot", card ? (state.lang === "ar" ? card.ar : card.en) : fallback());
    }

    function handleUser(text){
      const cleaned = (text || "").trim();
      if(!cleaned) return;
      addMessage("user", cleaned);
      respond(cleaned);
    }

    function resetChat(){
      messagesEl.innerHTML = "";
      addMessage("bot", "Hello ğŸ‘‹ Tap a category or type a medicine name.");
      addMessage("bot", "Ù…Ø±Ø­Ø¨Ù‹Ø§ ğŸ‘‹ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ ÙØ¦Ø© Ø§Ù„Ø¯ÙˆØ§Ø¡ Ø£Ùˆ Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡.");
    }

    $("sendBtn").addEventListener("click", () => { handleUser(inputEl.value); inputEl.value=""; inputEl.focus(); });
    inputEl.addEventListener("keydown", (e) => { if(e.key==="Enter"){ e.preventDefault(); $("sendBtn").click(); } });

    $("btnReset").addEventListener("click", resetChat);

    $("topics").addEventListener("click", (e) => {
      const tile = e.target.closest(".tile");
      if(!tile) return;
      handleUser(tile.getAttribute("data-q") || "");
    });

    $("chips").addEventListener("click", (e) => {
      const chip = e.target.closest(".chip");
      if(!chip) return;
      handleUser(chip.getAttribute("data-q") || "");
    });

    $("btnEn").addEventListener("click", () => setLang("en"));
    $("btnAr").addEventListener("click", () => setLang("ar"));

    resetChat();
    setLang("en");
  </script>
</body>
</html>
