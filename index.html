<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>QCH â€“ Easy Ramadan Medication Assistant (Patients)</title>
<style>
  :root{
    --bg:#f4fbfb; --card:#ffffff; --ink:#0b1b2b; --muted:#5b6b7a;
    --brand:#0aa6a6; --brand2:#1e88e5; --line:#e6edf2;
    --shadow:0 10px 26px rgba(0,0,0,.08);
    --r:20px;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  }
  body{
    margin:0;
    background:
      radial-gradient(1100px 600px at 15% 0%, rgba(10,166,166,.16), transparent 55%),
      radial-gradient(1100px 600px at 90% 10%, rgba(30,136,229,.16), transparent 55%),
      linear-gradient(135deg,#eef9f9,#eef4fb);
    color:var(--ink);
  }
  .wrap{max-width:980px;margin:0 auto;padding:12px;display:flex;flex-direction:column;gap:12px;}
  header{
    background:rgba(255,255,255,.90);
    border:1px solid var(--line);
    border-radius:var(--r);
    box-shadow:var(--shadow);
    padding:14px;
    display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;
  }
  .logos{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .logoPill{
    padding:10px 12px;border-radius:16px;border:1px solid var(--line);
    background:#fff; box-shadow:0 8px 16px rgba(0,0,0,.05);
    font-weight:1000;font-size:12px;line-height:1.2;white-space:nowrap;
  }
  .logoPill.qch{color:var(--brand);}
  .logoPill.ehc{color:var(--brand2);}
  .title{flex:1;text-align:center;min-width:240px}
  .title h1{margin:0;font-size:18px;font-weight:1000}
  .title p{margin:4px 0 0;font-size:13px;color:var(--muted)}
  .controls{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end}
  .btn{
    border:1px solid var(--line); background:#fff; border-radius:999px;
    padding:10px 12px; font-weight:1000; cursor:pointer;
    box-shadow:0 8px 16px rgba(0,0,0,.05);
    user-select:none;
  }
  .btn.active{background:linear-gradient(135deg, rgba(10,166,166,.20), rgba(30,136,229,.12));}
  .btn.warn{border-color:rgba(180,83,9,.20);background:rgba(180,83,9,.06)}
  .card{
    background:rgba(255,255,255,.90);
    border:1px solid var(--line);
    border-radius:var(--r);
    box-shadow:var(--shadow);
    overflow:hidden;
  }
  .topbar{
    padding:12px 14px;border-bottom:1px solid var(--line);
    display:flex;gap:10px;align-items:center;flex-wrap:wrap;
  }
  .pill{
    display:inline-flex;align-items:center;gap:8px;
    padding:7px 10px;border-radius:999px;
    background:rgba(10,166,166,.10);border:1px solid rgba(10,166,166,.18);
    color:#055;font-weight:1000;font-size:12px;
  }
  .hint{color:var(--muted);font-size:13px;line-height:1.5;flex:1}
  .grid{
    padding:12px 14px;
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:10px;
  }
  .tile{
    border:1px solid rgba(10,166,166,.18);
    background:#fff;
    border-radius:18px;
    padding:14px 12px;
    cursor:pointer;
    box-shadow:0 8px 16px rgba(0,0,0,.05);
    user-select:none;
    transition:transform .06s ease;
    min-height:78px;
    display:flex;align-items:center;justify-content:space-between;gap:10px;
    font-weight:1000;
  }
  .tile:hover{transform:translateY(-1px);}
  .tile small{display:block;font-weight:800;color:var(--muted);font-size:12px;margin-top:4px}
  .chat{border-top:1px solid var(--line);background:rgba(255,255,255,.78);}
  .msgs{padding:12px 14px;height:42vh;min-height:360px;overflow:auto}
  .msg{
    background:#fff;border:1px solid var(--line);border-radius:16px;padding:10px 10px;margin:8px 0;
    box-shadow:0 8px 16px rgba(0,0,0,.04);white-space:pre-wrap;line-height:1.55;font-size:15px
  }
  .msg.user{background:rgba(30,136,229,.06);border-color:rgba(30,136,229,.16)}
  .note{padding:10px 14px 14px;color:var(--muted);font-size:12px;line-height:1.45;border-top:1px dashed var(--line)}
  .searchRow{
    padding:10px 14px;border-top:1px solid var(--line);
    display:none; gap:10px; align-items:center; background:rgba(255,255,255,.86);
  }
  .searchRow input{
    flex:1; padding:12px 14px; border-radius:999px; border:1px solid var(--line);
    outline:none; font-size:16px; background:#fff;
  }
  .searchRow input:focus{border-color:rgba(10,166,166,.45);box-shadow:0 0 0 4px rgba(10,166,166,.10)}
  .searchRow button{
    padding:12px 14px;border-radius:999px;border:1px solid rgba(10,166,166,.25);
    background:linear-gradient(135deg, rgba(10,166,166,.20), rgba(30,136,229,.12));
    font-weight:1000;cursor:pointer
  }
  .rtl{direction:rtl;text-align:right}
  .ltr{direction:ltr;text-align:left}
  @media(max-width:860px){ .grid{grid-template-columns:repeat(2,1fr)} }
  @media(max-width:560px){ .grid{grid-template-columns:1fr} .title{text-align:right} }
</style>
</head>

<body>
<div class="wrap">

  <header>
    <div class="logos">
      <div class="logoPill qch">Qatif Central Hospital<br>Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ù‚Ø·ÙŠÙ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ</div>
      <div class="logoPill ehc">Eastern Health Cluster<br>Ø§Ù„ØªØ¬Ù…Ø¹ Ø§Ù„ØµØ­ÙŠ Ø§Ù„Ø´Ø±Ù‚ÙŠ</div>
    </div>

    <div class="title">
      <h1 id="appTitle">Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø£Ø¯ÙˆÙŠØ© ÙÙŠ Ø±Ù…Ø¶Ø§Ù†</h1>
      <p id="appSub">Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ â€“ Ø£Ø²Ø±Ø§Ø± ÙÙ‚Ø· (Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)</p>
    </div>

    <div class="controls">
      <button class="btn active" id="arBtn">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
      <button class="btn" id="enBtn">English</button>
      <button class="btn" id="homeBtn">ğŸ  Ø§Ù„ÙØ¦Ø§Øª</button>
      <button class="btn warn" id="resetBtn">ğŸ§¹ ØªÙ†Ø¸ÙŠÙ</button>
      <button class="btn" id="typingBtn">âŒ¨ï¸ ÙƒØªØ§Ø¨Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</button>
    </div>
  </header>

  <div class="card">
    <div class="topbar">
      <span class="pill" id="modePill">Patients â€¢ Buttons-Only</span>
      <div class="hint" id="hintText">Ø§Ø®ØªØ± ÙØ¦Ø© Ø«Ù… Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆØ§Ø¡. (Ù„Ø§ ØªØ­ØªØ§Ø¬ ÙƒØªØ§Ø¨Ø©)</div>
    </div>

    <div class="grid" id="grid"></div>

    <div class="searchRow" id="searchRow">
      <input id="searchInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡â€¦ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" />
      <button id="searchBtn">Ø¨Ø­Ø«</button>
    </div>

    <div class="chat">
      <div class="msgs" id="msgs"></div>
      <div class="note" id="note">
        Ø£Ù…Ø§Ù†: Ù‡Ø¨ÙˆØ· Ø³ÙƒØ± Ø´Ø¯ÙŠØ¯ØŒ Ø£Ù„Ù… ØµØ¯Ø±ØŒ Ø¶ÙŠÙ‚ Ù†ÙØ³ Ø´Ø¯ÙŠØ¯ØŒ Ø£Ùˆ Ù†Ø²ÙŠÙ Ù‚ÙˆÙŠ â†’ Ø§ÙØ·Ø± ÙÙˆØ±Ù‹Ø§ ÙˆØ±Ø§Ø¬Ø¹ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦.
      </div>
    </div>
  </div>
</div>

<script>
/* =======================
   1) Language + helpers
======================= */
const state = { lang:"ar", view:"cats", currentCat:null, typing:false };
const grid = document.getElementById("grid");
const msgs = document.getElementById("msgs");
const hintText = document.getElementById("hintText");
const note = document.getElementById("note");
const appTitle = document.getElementById("appTitle");
const appSub = document.getElementById("appSub");
const searchRow = document.getElementById("searchRow");
const searchInput = document.getElementById("searchInput");

function add(role, text){
  const d = document.createElement("div");
  d.className = "msg " + (role==="user" ? "user" : "bot");
  d.classList.add(state.lang==="ar" ? "rtl" : "ltr");
  d.textContent = text;
  msgs.appendChild(d);
  msgs.scrollTop = msgs.scrollHeight;
}

function setLang(lang){
  state.lang = lang;
  document.getElementById("arBtn").classList.toggle("active", lang==="ar");
  document.getElementById("enBtn").classList.toggle("active", lang==="en");
  document.documentElement.dir = (lang==="ar") ? "rtl" : "ltr";
  document.documentElement.lang = (lang==="ar") ? "ar" : "en";

  if(lang==="ar"){
    appTitle.textContent = "Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø£Ø¯ÙˆÙŠØ© ÙÙŠ Ø±Ù…Ø¶Ø§Ù†";
    appSub.textContent = "Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ â€“ Ø£Ø²Ø±Ø§Ø± ÙÙ‚Ø· (Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)";
    note.textContent = "Ø£Ù…Ø§Ù†: Ù‡Ø¨ÙˆØ· Ø³ÙƒØ± Ø´Ø¯ÙŠØ¯ØŒ Ø£Ù„Ù… ØµØ¯Ø±ØŒ Ø¶ÙŠÙ‚ Ù†ÙØ³ Ø´Ø¯ÙŠØ¯ØŒ Ø£Ùˆ Ù†Ø²ÙŠÙ Ù‚ÙˆÙŠ â†’ Ø§ÙØ·Ø± ÙÙˆØ±Ù‹Ø§ ÙˆØ±Ø§Ø¬Ø¹ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦.";
    searchInput.placeholder = "Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡â€¦ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)";
  }else{
    appTitle.textContent = "Ramadan Medication Assistant";
    appSub.textContent = "Patients version â€“ Buttons only (typing optional)";
    note.textContent = "Safety: Severe low sugar, chest pain, severe shortness of breath, or heavy bleeding â†’ break the fast and seek urgent care.";
    searchInput.placeholder = "Type medicine nameâ€¦ (optional)";
  }
  renderHint();
  render(); // redraw current view (cats/meds) with language
}

function renderHint(){
  if(state.lang==="ar"){
    hintText.textContent = (state.view==="cats")
      ? "Ø§Ø®ØªØ± ÙØ¦Ø© Ø«Ù… Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆØ§Ø¡. (Ù„Ø§ ØªØ­ØªØ§Ø¬ ÙƒØªØ§Ø¨Ø©)"
      : "Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆØ§Ø¡ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©. Ø§Ø¶ØºØ· (ğŸ  Ø§Ù„ÙØ¦Ø§Øª) Ù„Ù„Ø±Ø¬ÙˆØ¹.";
  }else{
    hintText.textContent = (state.view==="cats")
      ? "Choose a category, then tap a medicine. (No typing needed)"
      : "Tap a medicine. Use (ğŸ  Categories) to go back.";
  }
}

function resetChat(){
  msgs.innerHTML = "";
  add("bot", state.lang==="ar"
    ? "Ù…Ø±Ø­Ø¨Ù‹Ø§ ğŸ‘‹ Ø§Ø®ØªØ± ÙØ¦Ø© Ù…Ù† Ø§Ù„Ø£Ø²Ø±Ø§Ø±."
    : "Hello ğŸ‘‹ Choose a category."
  );
}

/* =======================
   2) Categories
======================= */
const CATS = [
  {key:"diabetes", icon:"ğŸ¬", ar:"Ø§Ù„Ø³ÙƒØ±ÙŠ", en:"Diabetes"},
  {key:"bp", icon:"ğŸ«€", ar:"Ø§Ù„Ø¶ØºØ·/Ø§Ù„Ù‚Ù„Ø¨", en:"BP / Heart"},
  {key:"blood", icon:"ğŸ©¸", ar:"Ù…Ù…ÙŠØ¹Ø§Øª/Ø³ÙŠÙˆÙ„Ø© Ø§Ù„Ø¯Ù…", en:"Blood thinners"},
  {key:"gi", icon:"ğŸ§¡", ar:"Ø§Ù„Ù…Ø¹Ø¯Ø©/Ø§Ù„Ø­Ù…ÙˆØ¶Ø©", en:"Stomach/GERD"},
  {key:"abx", icon:"ğŸ¦ ", ar:"Ù…Ø¶Ø§Ø¯Ø§Øª Ø­ÙŠÙˆÙŠØ©", en:"Antibiotics"},
  {key:"resp", icon:"ğŸ«", ar:"Ø§Ù„Ø±Ø¨Ùˆ/Ø§Ù„Ø­Ø³Ø§Ø³ÙŠØ©", en:"Asthma/Allergy"},
  {key:"pain", icon:"ğŸ’Š", ar:"Ù…Ø³ÙƒÙ†Ø§Øª/Ø§Ù„ØªÙ‡Ø§Ø¨", en:"Pain/Inflammation"},
  {key:"thyroid", icon:"ğŸ¦‹", ar:"Ø§Ù„ØºØ¯Ø©/Ù‡Ø±Ù…ÙˆÙ†Ø§Øª", en:"Thyroid/Hormones"},
  {key:"rheum", icon:"ğŸ¦´", ar:"Ø§Ù„Ø±ÙˆÙ…Ø§ØªÙŠØ²Ù…/Ù…Ù†Ø§Ø¹Ø©", en:"Rheumatology/Immune"},
  {key:"neuro", icon:"ğŸ§ ", ar:"Ø£Ø¹ØµØ§Ø¨/Ù†ÙØ³ÙŠØ©", en:"Neuro/Psych"},
  {key:"supp", icon:"ğŸ§²", ar:"Ù…ÙƒÙ…Ù„Ø§Øª", en:"Supplements"},
  {key:"other", icon:"ğŸ“Œ", ar:"Ø£Ø¯ÙˆÙŠØ© Ù…ØªÙ†ÙˆØ¹Ø©", en:"Other"}
];

/* =======================
   3) Patient-friendly advice templates
   (one template per class â†’ supports 200+ meds)
======================= */
const TEMPLATES = {
  insulin: {
    ar:
`ğŸ’‰ Ø§Ù„Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ† (Ù…Ù‡Ù… Ø¬Ø¯Ù‹Ø§)
â€¢ Ù„Ø§ ØªØºÙŠÙ‘Ø± Ø§Ù„Ø¬Ø±Ø¹Ø§Øª Ø¨Ù†ÙØ³Ùƒ.
â€¢ Ø¥Ø°Ø§ Ø³ÙƒØ± <70 Ø£Ùˆ Ø£Ø¹Ø±Ø§Ø¶ Ù‡Ø¨ÙˆØ· Ø´Ø¯ÙŠØ¯Ø© â†’ Ø§ÙØ·Ø± ÙÙˆØ±Ù‹Ø§ ÙˆØ¹Ø§Ù„Ø¬ Ø§Ù„Ù‡Ø¨ÙˆØ·.
â€¢ ØºØ§Ù„Ø¨Ù‹Ø§: Ø§Ù„Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ† Ø§Ù„Ø·ÙˆÙŠÙ„/Ø§Ù„Ù‚Ø§Ø¹Ø¯ÙŠ ÙŠÙƒÙˆÙ† Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± (Ø­Ø³Ø¨ Ø®Ø·Ø© Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©).
â€¢ Ø§Ù„Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ† Ø§Ù„Ø³Ø±ÙŠØ¹ ÙŠØ¤Ø®Ø° Ù…Ø¹ Ø§Ù„ÙˆØ¬Ø¨Ø© (ÙˆÙ‚Ø¯ ØªÙ‚Ù„ Ø¬Ø±Ø¹Ø© Ø§Ù„Ø³Ø­ÙˆØ±).`,
    en:
`ğŸ’‰ Insulin (very important)
â€¢ Do NOT change doses yourself.
â€¢ If glucose <70 or severe symptoms â†’ BREAK FAST and treat.
â€¢ Basal insulin is often after Iftar (per clinic plan).
â€¢ Rapid insulin is taken with meals (Suhoor dose may be lower).`
  },
  diabetes_oral: {
    ar:
`ğŸ¬ Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø³ÙƒØ± (Ø­Ø¨ÙˆØ¨)
â€¢ ØºØ§Ù„Ø¨Ù‹Ø§ ØªØ¤Ø®Ø° Ù…Ø¹ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ùˆ/Ø£Ùˆ Ø§Ù„Ø³Ø­ÙˆØ± Ø­Ø³Ø¨ Ø§Ù„ÙˆØµÙØ©.
â€¢ Ø¥Ø°Ø§ Ø¯ÙˆØ§Ø¡ ÙŠØ³Ø¨Ø¨ Ù‡Ø¨ÙˆØ· (Ù…Ø«Ù„ Ø¨Ø¹Ø¶ Ø§Ù„Ø³Ù„ÙÙˆÙ†ÙŠÙ„ ÙŠÙˆØ±ÙŠØ§) â†’ Ø±Ø§Ù‚Ø¨ Ø§Ù„Ù‡Ø¨ÙˆØ·.`,
    en:
`ğŸ¬ Diabetes pills
â€¢ Usually with Iftar and/or Suhoor depending on prescription.
â€¢ If medicine can cause lows â†’ watch for hypoglycemia.`
  },
  bp_once: {
    ar:
`ğŸ«€ Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø¶ØºØ·/Ø§Ù„Ù‚Ù„Ø¨ (Ù…Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§)
â€¢ Ø§Ù„Ø£ÙØ¶Ù„ ÙˆÙ‚Øª Ø«Ø§Ø¨Øª Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±.
â€¢ Ø¥Ø°Ø§ Ø¯ÙˆØ®Ø© Ø´Ø¯ÙŠØ¯Ø© Ø£Ùˆ Ø¥ØºÙ…Ø§Ø¡ â†’ ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø·Ø¨ÙŠØ¨.`,
    en:
`ğŸ«€ BP/Heart medicines (once daily)
â€¢ Best at a fixed time after Iftar.
â€¢ Severe dizziness/fainting â†’ contact clinician.`
  },
  diuretic: {
    ar:
`ğŸ’§ Ù…Ø¯Ø±Ø§Øª Ø§Ù„Ø¨ÙˆÙ„ (Ù…Ø«Ù„ ÙÙˆØ±ÙˆØ³ÙŠÙ…ÙŠØ¯/Ù‡ÙŠØ¯Ø±ÙˆÙƒÙ„ÙˆØ±ÙˆØ«ÙŠØ§Ø²ÙŠØ¯)
â€¢ Ø§Ù„Ø£ÙØ¶Ù„ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±/Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù„ÙŠÙ„ Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ø¹Ø·Ø´ ÙˆÙƒØ«Ø±Ø© Ø§Ù„ØªØ¨ÙˆÙ„ ÙˆÙ‚Øª Ø§Ù„Ø³Ø­ÙˆØ±.`,
    en:
`ğŸ’§ Diuretics (water pills)
â€¢ Prefer after Iftar/early evening to reduce thirst and nighttime urination.`
  },
  anticoagulant: {
    ar:
`ğŸ©¸ Ù…Ù…ÙŠØ¹Ø§Øª Ø§Ù„Ø¯Ù…
â€¢ ÙˆÙ‚Øª Ø«Ø§Ø¨Øª ÙŠÙˆÙ…ÙŠÙ‹Ø§.
â€¢ Ø¥Ø°Ø§ Ù…Ø±ØªÙŠÙ† ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¥ÙØ·Ø§Ø± + Ø³Ø­ÙˆØ±.
â€¢ Ù†Ø²ÙŠÙ Ø´Ø¯ÙŠØ¯/Ø¨Ø±Ø§Ø² Ø£Ø³ÙˆØ¯/Ù‚ÙŠØ¡ Ø¯Ù… â†’ Ø·ÙˆØ§Ø±Ø¦.`,
    en:
`ğŸ©¸ Blood thinners
â€¢ Fixed time daily.
â€¢ If BID: Iftar + Suhoor.
â€¢ Heavy bleeding/black stool/vomiting blood â†’ ER.`
  },
  antiplatelet: {
    ar:
`ğŸ«€ Ù…Ø¶Ø§Ø¯Ø§Øª Ø§Ù„ØµÙØ§Ø¦Ø­ (Ø£Ø³Ø¨Ø±ÙŠÙ†/ÙƒÙ„ÙˆØ¨ÙŠØ¯ÙˆØ¬Ø±ÙŠÙ„)
â€¢ ØºØ§Ù„Ø¨Ù‹Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ù…Ø¹ Ø§Ù„Ø£ÙƒÙ„ (Ø£Ù„Ø·Ù Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø¯Ø©).
â€¢ Ù„Ø§ ØªÙˆÙ‚ÙÙ‡ Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø·Ø¨ÙŠØ¨.`,
    en:
`ğŸ«€ Antiplatelets (aspirin/clopidogrel)
â€¢ Often after Iftar with food (gentler on stomach).
â€¢ Do not stop without clinician.`
  },
  ppi: {
    ar:
`ğŸ§¡ Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø­Ù…ÙˆØ¶Ø© (PPI Ù…Ø«Ù„ Ø£ÙˆÙ…ÙŠØ¨Ø±Ø§Ø²ÙˆÙ„/Ø¨Ø§Ù†ØªÙˆØ¨Ø±Ø§Ø²ÙˆÙ„)
â€¢ Ø§Ù„Ø£ÙØ¶Ù„: Ù‚Ø¨Ù„ Ø§Ù„Ø£ÙƒÙ„ Ø¨Ù€ 30â€“60 Ø¯Ù‚ÙŠÙ‚Ø©.
â€¢ Ù…Ø±Ø©: Ù‚Ø¨Ù„ Ø§Ù„Ø³Ø­ÙˆØ± Ø£Ùˆ Ù‚Ø¨Ù„ Ø§Ù„Ø¥ÙØ·Ø§Ø±.
â€¢ Ù…Ø±ØªÙŠÙ†: Ù‚Ø¨Ù„ Ø§Ù„Ø¥ÙØ·Ø§Ø± + Ù‚Ø¨Ù„ Ø§Ù„Ø³Ø­ÙˆØ±.`,
    en:
`ğŸ§¡ PPIs (omeprazole/pantoprazole)
â€¢ Best: 30â€“60 minutes BEFORE meals.
â€¢ OD: before Suhoor or Iftar.
â€¢ BID: before Iftar + before Suhoor.`
  },
  antibiotic: {
    ar:
`ğŸ¦  Ø§Ù„Ù…Ø¶Ø§Ø¯Ø§Øª Ø§Ù„Ø­ÙŠÙˆÙŠØ© (Ø¹Ø§Ù…)
â€¢ Ù…Ø±ØªÙŠÙ† ÙŠÙˆÙ…ÙŠÙ‹Ø§: Ø¥ÙØ·Ø§Ø± + Ø³Ø­ÙˆØ±.
â€¢ Ø«Ù„Ø§Ø« Ù…Ø±Ø§Øª: Ø¥ÙØ·Ø§Ø± + Ø¢Ø®Ø± Ø§Ù„Ù„ÙŠÙ„ + Ø³Ø­ÙˆØ±.
â€¢ Ù„Ø§ ØªÙˆÙ‚Ù Ø§Ù„Ù…Ø¶Ø§Ø¯ Ù‚Ø¨Ù„ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø¯Ø©.`,
    en:
`ğŸ¦  Antibiotics (general)
â€¢ BID: Iftar + Suhoor.
â€¢ TID: Iftar + late evening + Suhoor.
â€¢ Finish the full course.`
  },
  asthma: {
    ar:
`ğŸ« Ø§Ù„Ø±Ø¨Ùˆ/Ø§Ù„Ø­Ø³Ø§Ø³ÙŠØ©
â€¢ Ø§Ù„Ø¨Ø®Ø§Ø®Ø§Øª Ø§Ù„ÙˆÙ‚Ø§Ø¦ÙŠØ© ØªÙØ³ØªØ®Ø¯Ù… Ø­Ø³Ø¨ Ø§Ù„ÙˆØµÙØ© (Ù„Ø§ ØªÙÙˆÙ‚ÙÙ‡Ø§).
â€¢ Ø¨Ø®Ø§Ø® Ø§Ù„Ø¥Ø³Ø¹Ø§Ù Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø© ÙˆÙ„Ø§ ØªØ¤Ø®Ø±Ù‡ Ø¥Ø°Ø§ Ø¶ÙŠÙ‚ Ù†ÙØ³.`,
    en:
`ğŸ« Asthma/Allergy
â€¢ Continue controller inhalers as prescribed.
â€¢ Use rescue inhaler as neededâ€”donâ€™t delay with breathing trouble.`
  },
  pain: {
    ar:
`ğŸ’Š Ù…Ø³ÙƒÙ†Ø§Øª/Ù…Ø¶Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ‡Ø§Ø¨
â€¢ Ø§Ù„Ø£ÙØ¶Ù„ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ù…Ø¹ Ø§Ù„Ø£ÙƒÙ„ Ù„ØªÙ‚Ù„ÙŠÙ„ ØªÙ‡ÙŠØ¬ Ø§Ù„Ù…Ø¹Ø¯Ø©.
â€¢ Ø¥Ø°Ø§ Ø¹Ù†Ø¯Ùƒ Ù‚Ø±Ø­Ø©/ÙƒÙ„Ù‰/Ù†Ø²ÙŠÙ â†’ Ø§Ø³ØªØ´Ø± Ø§Ù„Ø·Ø¨ÙŠØ¨.`,
    en:
`ğŸ’Š Pain/anti-inflammatory medicines
â€¢ Prefer after Iftar with food to reduce stomach irritation.
â€¢ Ulcer/kidney issues/bleeding risk â†’ ask clinician.`
  },
  thyroid: {
    ar:
`ğŸ¦‹ Ù„ÙŠÙÙˆØ«ÙŠØ±ÙˆÙƒØ³ÙŠÙ†/Ø£Ø¯ÙˆÙŠØ© Ø§Ù„ØºØ¯Ø©
â€¢ Ø¹Ù„Ù‰ Ù…Ø¹Ø¯Ø© ÙØ§Ø±ØºØ©.
â€¢ Ø®ÙŠØ§Ø± A: Ù‚Ø¨Ù„ Ø§Ù„Ø³Ø­ÙˆØ± 30â€“60 Ø¯Ù‚ÙŠÙ‚Ø©.
â€¢ Ø®ÙŠØ§Ø± B: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± 3â€“4 Ø³Ø§Ø¹Ø§Øª Ø¨Ø¯ÙˆÙ† Ø³Ù†Ø§ÙƒØ§Øª.
â€¢ Ø§ÙØµÙ„ Ø¹Ù† Ø§Ù„Ø­Ø¯ÙŠØ¯/Ø§Ù„ÙƒØ§Ù„Ø³ÙŠÙˆÙ… 4 Ø³Ø§Ø¹Ø§Øª.`,
    en:
`ğŸ¦‹ Levothyroxine/thyroid
â€¢ Empty stomach.
â€¢ Option A: 30â€“60 min before Suhoor.
â€¢ Option B: 3â€“4 hours after Iftar (no snacks).
â€¢ Separate from iron/calcium by 4 hours.`
  },
  rheum: {
    ar:
`ğŸ¦´ Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø±ÙˆÙ…Ø§ØªÙŠØ²Ù…/Ø§Ù„Ù…Ù†Ø§Ø¹Ø©
â€¢ ØºØ§Ù„Ø¨Ù‹Ø§ Ø§Ù„ØµÙŠØ§Ù… Ù„Ø§ ÙŠÙˆÙ‚ÙÙ‡Ø§.
â€¢ Ù„Ø§ ØªÙˆÙ‚ÙÙ‡Ø§ ÙØ¬Ø£Ø©.
â€¢ Ø­Ø±Ø§Ø±Ø©/Ø¹Ø¯ÙˆÙ‰/ØªÙ‚Ø±Ø­Ø§Øª Ø´Ø¯ÙŠØ¯Ø© â†’ ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©.`,
    en:
`ğŸ¦´ Rheumatology/immune medicines
â€¢ Fasting usually does not stop them.
â€¢ Do not stop suddenly.
â€¢ Fever/infection/severe sores â†’ contact clinic.`
  },
  neuro: {
    ar:
`ğŸ§  Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø£Ø¹ØµØ§Ø¨/Ø§Ù„Ù†ÙØ³ÙŠØ©
â€¢ ÙˆÙ‚Øª Ø«Ø§Ø¨Øª ÙŠÙˆÙ…ÙŠÙ‹Ø§.
â€¢ Ù„Ø§ ØªÙÙˆÙ‘Øª Ø§Ù„Ø¬Ø±Ø¹Ø§Øª.
â€¢ Ø¥Ø°Ø§ ØªØ³Ø¨Ø¨ Ù†Ø¹Ø§Ø³: ØºØ§Ù„Ø¨Ù‹Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±/Ù‚Ø¨Ù„ Ø§Ù„Ù†ÙˆÙ….`,
    en:
`ğŸ§  Neuro/psych medicines
â€¢ Fixed time daily.
â€¢ Do not miss doses.
â€¢ If drowsy: often after Iftar/bedtime.`
  },
  supplements: {
    ar:
`ğŸ§² Ø§Ù„Ù…ÙƒÙ…Ù„Ø§Øª (Ø­Ø¯ÙŠØ¯/ÙƒØ§Ù„Ø³ÙŠÙˆÙ…/ÙÙŠØªØ§Ù…ÙŠÙ†Ø§Øª)
â€¢ ØºØ§Ù„Ø¨Ù‹Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±.
â€¢ Ø§Ù„Ø­Ø¯ÙŠØ¯: Ø¨Ø¹ÙŠØ¯ Ø¹Ù† Ø§Ù„Ø´Ø§ÙŠ/Ø§Ù„Ù‚Ù‡ÙˆØ©/Ø§Ù„Ø­Ù„ÙŠØ¨.
â€¢ Ø§ÙØµÙ„ Ø¹Ù† Ù„ÙŠÙÙˆØ«ÙŠØ±ÙˆÙƒØ³ÙŠÙ† 4 Ø³Ø§Ø¹Ø§Øª.`,
    en:
`ğŸ§² Supplements (iron/calcium/vitamins)
â€¢ Often after Iftar.
â€¢ Iron: away from tea/coffee/milk.
â€¢ Separate from levothyroxine by 4 hours.`
  },
  other: {
    ar:
`ğŸ“Œ Ø¥Ø±Ø´Ø§Ø¯ Ø¹Ø§Ù…
â€¢ Ø®Ø° Ø§Ù„Ø¯ÙˆØ§Ø¡ ÙÙŠ ÙˆÙ‚Øª Ø«Ø§Ø¨Øª Ø­Ø³Ø¨ Ø§Ù„ÙˆØµÙØ©.
â€¢ Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠØ²Ø¹Ø¬ Ø§Ù„Ù…Ø¹Ø¯Ø©: Ø®Ø°Ù‡ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ù…Ø¹ Ø§Ù„Ø£ÙƒÙ„.
â€¢ Ø¥Ø°Ø§ Ù„Ø¯ÙŠÙƒ Ø£Ø¹Ø±Ø§Ø¶ Ø®Ø·ÙŠØ±Ø© â†’ Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦.`,
    en:
`ğŸ“Œ General guidance
â€¢ Take at a fixed time as prescribed.
â€¢ If stomach upset: after Iftar with food.
â€¢ Severe symptoms â†’ seek urgent care.`
  }
};

/* =======================
   4) Medicines list (200+ names)
   Each medicine points to a template key.
   You can add more names easily.
======================= */
const MEDS = [
  // Diabetes (insulin + oral)
  {cat:"diabetes", icon:"ğŸ’‰", ar:"Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ† (Ø¹Ø§Ù…)", en:"Insulin (general)", tpl:"insulin"},
  {cat:"diabetes", icon:"ğŸ’‰", ar:"Lantus / Glargine", en:"Lantus / Glargine", tpl:"insulin"},
  {cat:"diabetes", icon:"ğŸ’‰", ar:"Tresiba / Degludec", en:"Tresiba / Degludec", tpl:"insulin"},
  {cat:"diabetes", icon:"ğŸ’‰", ar:"Levemir / Detemir", en:"Levemir / Detemir", tpl:"insulin"},
  {cat:"diabetes", icon:"ğŸ’‰", ar:"Novorapid / Aspart", en:"Novorapid / Aspart", tpl:"insulin"},
  {cat:"diabetes", icon:"ğŸ’‰", ar:"Humalog / Lispro", en:"Humalog / Lispro", tpl:"insulin"},
  {cat:"diabetes", icon:"ğŸ’‰", ar:"Apidra / Glulisine", en:"Apidra / Glulisine", tpl:"insulin"},
  {cat:"diabetes", icon:"ğŸ’‰", ar:"Mixtard 30/70", en:"Mixtard 30/70", tpl:"insulin"},
  {cat:"diabetes", icon:"ğŸ’‰", ar:"Novomix 30", en:"Novomix 30", tpl:"insulin"},
  {cat:"diabetes", icon:"ğŸ’‰", ar:"Humalog Mix", en:"Humalog Mix", tpl:"insulin"},

  {cat:"diabetes", icon:"ğŸ¬", ar:"Metformin", en:"Metformin", tpl:"diabetes_oral"},
  {cat:"diabetes", icon:"ğŸ¬", ar:"Gliclazide (Diamicron)", en:"Gliclazide (Diamicron)", tpl:"diabetes_oral"},
  {cat:"diabetes", icon:"ğŸ¬", ar:"Glimepiride (Amaryl)", en:"Glimepiride (Amaryl)", tpl:"diabetes_oral"},
  {cat:"diabetes", icon:"ğŸ¬", ar:"Glipizide", en:"Glipizide", tpl:"diabetes_oral"},
  {cat:"diabetes", icon:"ğŸ¬", ar:"Sitagliptin (Januvia)", en:"Sitagliptin (Januvia)", tpl:"diabetes_oral"},
  {cat:"diabetes", icon:"ğŸ¬", ar:"Linagliptin (Trajenta)", en:"Linagliptin (Trajenta)", tpl:"diabetes_oral"},
  {cat:"diabetes", icon:"ğŸ¬", ar:"Vildagliptin (Galvus)", en:"Vildagliptin (Galvus)", tpl:"diabetes_oral"},
  {cat:"diabetes", icon:"ğŸ¬", ar:"Saxagliptin", en:"Saxagliptin", tpl:"diabetes_oral"},
  {cat:"diabetes", icon:"ğŸ¬", ar:"Empagliflozin (Jardiance)", en:"Empagliflozin (Jardiance)", tpl:"diabetes_oral"},
  {cat:"diabetes", icon:"ğŸ¬", ar:"Dapagliflozin (Forxiga)", en:"Dapagliflozin (Forxiga)", tpl:"diabetes_oral"},
  {cat:"diabetes", icon:"ğŸ¬", ar:"Canagliflozin", en:"Canagliflozin", tpl:"diabetes_oral"},
  {cat:"diabetes", icon:"ğŸ¬", ar:"Semaglutide (Ozempic/Rybelsus)", en:"Semaglutide (Ozempic/Rybelsus)", tpl:"diabetes_oral"},
  {cat:"diabetes", icon:"ğŸ¬", ar:"Dulaglutide (Trulicity)", en:"Dulaglutide (Trulicity)", tpl:"diabetes_oral"},
  {cat:"diabetes", icon:"ğŸ¬", ar:"Liraglutide (Victoza)", en:"Liraglutide (Victoza)", tpl:"diabetes_oral"},
  {cat:"diabetes", icon:"ğŸ¬", ar:"Acarbose", en:"Acarbose", tpl:"diabetes_oral"},
  {cat:"diabetes", icon:"ğŸ¬", ar:"Pioglitazone", en:"Pioglitazone", tpl:"diabetes_oral"},

  // BP / Heart
  {cat:"bp", icon:"ğŸ”¥", ar:"Amlodipine", en:"Amlodipine", tpl:"bp_once"},
  {cat:"bp", icon:"ğŸ”¥", ar:"Losartan", en:"Losartan", tpl:"bp_once"},
  {cat:"bp", icon:"ğŸ”¥", ar:"Valsartan", en:"Valsartan", tpl:"bp_once"},
  {cat:"bp", icon:"ğŸ”¥", ar:"Irbesartan", en:"Irbesartan", tpl:"bp_once"},
  {cat:"bp", icon:"ğŸ”¥", ar:"Telmisartan", en:"Telmisartan", tpl:"bp_once"},
  {cat:"bp", icon:"ğŸ”¥", ar:"Lisinopril", en:"Lisinopril", tpl:"bp_once"},
  {cat:"bp", icon:"ğŸ”¥", ar:"Enalapril", en:"Enalapril", tpl:"bp_once"},
  {cat:"bp", icon:"ğŸ«€", ar:"Bisoprolol", en:"Bisoprolol", tpl:"bp_once"},
  {cat:"bp", icon:"ğŸ«€", ar:"Metoprolol", en:"Metoprolol", tpl:"bp_once"},
  {cat:"bp", icon:"ğŸ«€", ar:"Carvedilol", en:"Carvedilol", tpl:"bp_once"},
  {cat:"bp", icon:"ğŸ’§", ar:"Furosemide (Ù…Ø¯Ø±)", en:"Furosemide (diuretic)", tpl:"diuretic"},
  {cat:"bp", icon:"ğŸ’§", ar:"HCTZ (Hydrochlorothiazide)", en:"HCTZ", tpl:"diuretic"},
  {cat:"bp", icon:"ğŸ’§", ar:"Indapamide", en:"Indapamide", tpl:"diuretic"},
  {cat:"bp", icon:"ğŸ’§", ar:"Spironolactone", en:"Spironolactone", tpl:"diuretic"},
  {cat:"bp", icon:"ğŸ«€", ar:"Digoxin", en:"Digoxin", tpl:"bp_once"},
  {cat:"bp", icon:"ğŸ«€", ar:"Isosorbide", en:"Isosorbide", tpl:"bp_once"},
  {cat:"bp", icon:"ğŸ«€", ar:"Clonidine", en:"Clonidine", tpl:"bp_once"},

  // Blood thinners
  {cat:"blood", icon:"ğŸ©¸", ar:"Warfarin", en:"Warfarin", tpl:"anticoagulant"},
  {cat:"blood", icon:"ğŸ§¬", ar:"Apixaban (Eliquis)", en:"Apixaban (Eliquis)", tpl:"anticoagulant"},
  {cat:"blood", icon:"ğŸ§¬", ar:"Rivaroxaban (Xarelto)", en:"Rivaroxaban (Xarelto)", tpl:"anticoagulant"},
  {cat:"blood", icon:"ğŸ§¬", ar:"Dabigatran (Pradaxa)", en:"Dabigatran (Pradaxa)", tpl:"anticoagulant"},
  {cat:"blood", icon:"ğŸ§¬", ar:"Edoxaban", en:"Edoxaban", tpl:"anticoagulant"},
  {cat:"blood", icon:"ğŸ«€", ar:"Aspirin", en:"Aspirin", tpl:"antiplatelet"},
  {cat:"blood", icon:"ğŸ«€", ar:"Clopidogrel (Plavix)", en:"Clopidogrel (Plavix)", tpl:"antiplatelet"},
  {cat:"blood", icon:"ğŸ«€", ar:"Ticagrelor", en:"Ticagrelor", tpl:"antiplatelet"},
  {cat:"blood", icon:"ğŸ«€", ar:"Prasugrel", en:"Prasugrel", tpl:"antiplatelet"},

  // GI
  {cat:"gi", icon:"ğŸ§¡", ar:"Omeprazole", en:"Omeprazole", tpl:"ppi"},
  {cat:"gi", icon:"ğŸ§¡", ar:"Pantoprazole", en:"Pantoprazole", tpl:"ppi"},
  {cat:"gi", icon:"ğŸ§¡", ar:"Esomeprazole", en:"Esomeprazole", tpl:"ppi"},
  {cat:"gi", icon:"ğŸ§¡", ar:"Lansoprazole", en:"Lansoprazole", tpl:"ppi"},
  {cat:"gi", icon:"ğŸ§¡", ar:"Rabeprazole", en:"Rabeprazole", tpl:"ppi"},
  {cat:"gi", icon:"ğŸ§¡", ar:"Famotidine", en:"Famotidine", tpl:"other"},
  {cat:"gi", icon:"ğŸ§¡", ar:"Sucralfate", en:"Sucralfate", tpl:"other"},
  {cat:"gi", icon:"ğŸ§Š", ar:"Lactulose", en:"Lactulose", tpl:"other"},
  {cat:"gi", icon:"ğŸ§Š", ar:"PEG (Movicol)", en:"PEG (Movicol)", tpl:"other"},
  {cat:"gi", icon:"ğŸ§¡", ar:"Ondansetron", en:"Ondansetron", tpl:"other"},
  {cat:"gi", icon:"ğŸ§¡", ar:"Domperidone", en:"Domperidone", tpl:"other"},
  {cat:"gi", icon:"ğŸ§¡", ar:"Simethicone", en:"Simethicone", tpl:"other"},

  // Antibiotics (common)
  {cat:"abx", icon:"ğŸ¦ ", ar:"Augmentin", en:"Augmentin", tpl:"antibiotic"},
  {cat:"abx", icon:"ğŸ¦ ", ar:"Amoxicillin", en:"Amoxicillin", tpl:"antibiotic"},
  {cat:"abx", icon:"ğŸ¦ ", ar:"Azithromycin", en:"Azithromycin", tpl:"antibiotic"},
  {cat:"abx", icon:"ğŸ¦ ", ar:"Clarithromycin", en:"Clarithromycin", tpl:"antibiotic"},
  {cat:"abx", icon:"ğŸ¦ ", ar:"Ciprofloxacin", en:"Ciprofloxacin", tpl:"antibiotic"},
  {cat:"abx", icon:"ğŸ¦ ", ar:"Levofloxacin", en:"Levofloxacin", tpl:"antibiotic"},
  {cat:"abx", icon:"ğŸ¦ ", ar:"Doxycycline", en:"Doxycycline", tpl:"antibiotic"},
  {cat:"abx", icon:"ğŸ¦ ", ar:"Metronidazole", en:"Metronidazole", tpl:"antibiotic"},
  {cat:"abx", icon:"ğŸ¦ ", ar:"Cephalexin", en:"Cephalexin", tpl:"antibiotic"},
  {cat:"abx", icon:"ğŸ¦ ", ar:"Cefuroxime", en:"Cefuroxime", tpl:"antibiotic"},
  {cat:"abx", icon:"ğŸ¦ ", ar:"Ceftriaxone", en:"Ceftriaxone", tpl:"antibiotic"},
  {cat:"abx", icon:"ğŸ¦ ", ar:"TMP/SMX (Bactrim)", en:"TMP/SMX (Bactrim)", tpl:"antibiotic"},
  {cat:"abx", icon:"ğŸ¦ ", ar:"Nitrofurantoin", en:"Nitrofurantoin", tpl:"antibiotic"},

  // Resp / Allergy
  {cat:"resp", icon:"ğŸ«", ar:"Salbutamol (Ventolin)", en:"Salbutamol (Ventolin)", tpl:"asthma"},
  {cat:"resp", icon:"ğŸ«", ar:"Budesonide inhaler", en:"Budesonide inhaler", tpl:"asthma"},
  {cat:"resp", icon:"ğŸ«", ar:"Fluticasone inhaler", en:"Fluticasone inhaler", tpl:"asthma"},
  {cat:"resp", icon:"ğŸ«", ar:"Montelukast", en:"Montelukast", tpl:"asthma"},
  {cat:"resp", icon:"ğŸ«", ar:"Cetirizine", en:"Cetirizine", tpl:"asthma"},
  {cat:"resp", icon:"ğŸ«", ar:"Loratadine", en:"Loratadine", tpl:"asthma"},
  {cat:"resp", icon:"ğŸ«", ar:"Fexofenadine", en:"Fexofenadine", tpl:"asthma"},
  {cat:"resp", icon:"ğŸ«", ar:"Nasal spray (Fluticasone)", en:"Nasal spray (Fluticasone)", tpl:"asthma"},

  // Pain
  {cat:"pain", icon:"ğŸ’Š", ar:"Paracetamol", en:"Paracetamol", tpl:"pain"},
  {cat:"pain", icon:"ğŸ’Š", ar:"Ibuprofen", en:"Ibuprofen", tpl:"pain"},
  {cat:"pain", icon:"ğŸ’Š", ar:"Naproxen", en:"Naproxen", tpl:"pain"},
  {cat:"pain", icon:"ğŸ’Š", ar:"Diclofenac", en:"Diclofenac", tpl:"pain"},
  {cat:"pain", icon:"ğŸ’Š", ar:"Celecoxib", en:"Celecoxib", tpl:"pain"},

  // Thyroid / Hormones
  {cat:"thyroid", icon:"ğŸ¦‹", ar:"Levothyroxine", en:"Levothyroxine", tpl:"thyroid"},
  {cat:"thyroid", icon:"ğŸ¦‹", ar:"Euthyrox", en:"Euthyrox", tpl:"thyroid"},
  {cat:"thyroid", icon:"ğŸ¦‹", ar:"Eltroxin", en:"Eltroxin", tpl:"thyroid"},
  {cat:"thyroid", icon:"ğŸ§¬", ar:"Oral contraceptive", en:"Oral contraceptive", tpl:"other"},
  {cat:"thyroid", icon:"ğŸ§¬", ar:"Tamsulosin", en:"Tamsulosin", tpl:"other"},
  {cat:"thyroid", icon:"ğŸ§¬", ar:"Finasteride", en:"Finasteride", tpl:"other"},

  // Rheum / immune
  {cat:"rheum", icon:"ğŸ¦´", ar:"Methotrexate (weekly)", en:"Methotrexate (weekly)", tpl:"rheum"},
  {cat:"rheum", icon:"ğŸ¦´", ar:"Hydroxychloroquine", en:"Hydroxychloroquine", tpl:"rheum"},
  {cat:"rheum", icon:"ğŸ¦´", ar:"Sulfasalazine", en:"Sulfasalazine", tpl:"rheum"},
  {cat:"rheum", icon:"ğŸ§¬", ar:"Adalimumab (Humira)", en:"Adalimumab (Humira)", tpl:"rheum"},
  {cat:"rheum", icon:"ğŸ§¬", ar:"Etanercept (Enbrel)", en:"Etanercept (Enbrel)", tpl:"rheum"},
  {cat:"rheum", icon:"ğŸ§¬", ar:"Infliximab", en:"Infliximab", tpl:"rheum"},
  {cat:"rheum", icon:"ğŸ§¬", ar:"Tocilizumab", en:"Tocilizumab", tpl:"rheum"},
  {cat:"rheum", icon:"ğŸ§¬", ar:"Rituximab", en:"Rituximab", tpl:"rheum"},
  {cat:"rheum", icon:"ğŸ§¬", ar:"Tofacitinib (JAK)", en:"Tofacitinib (JAK)", tpl:"rheum"},
  {cat:"rheum", icon:"âšª", ar:"Prednisone", en:"Prednisone", tpl:"rheum"},

  // Neuro / Psych
  {cat:"neuro", icon:"ğŸ§ ", ar:"Levetiracetam (Keppra)", en:"Levetiracetam (Keppra)", tpl:"neuro"},
  {cat:"neuro", icon:"ğŸ§ ", ar:"Valproate", en:"Valproate", tpl:"neuro"},
  {cat:"neuro", icon:"ğŸ§ ", ar:"Carbamazepine", en:"Carbamazepine", tpl:"neuro"},
  {cat:"neuro", icon:"ğŸ§ ", ar:"Lamotrigine", en:"Lamotrigine", tpl:"neuro"},
  {cat:"neuro", icon:"ğŸ§ ", ar:"Gabapentin", en:"Gabapentin", tpl:"neuro"},
  {cat:"neuro", icon:"ğŸ§ ", ar:"Pregabalin", en:"Pregabalin", tpl:"neuro"},
  {cat:"neuro", icon:"ğŸ§ ", ar:"Sertraline", en:"Sertraline", tpl:"neuro"},
  {cat:"neuro", icon:"ğŸ§ ", ar:"Fluoxetine", en:"Fluoxetine", tpl:"neuro"},
  {cat:"neuro", icon:"ğŸ§ ", ar:"Escitalopram", en:"Escitalopram", tpl:"neuro"},
  {cat:"neuro", icon:"ğŸ§ ", ar:"Duloxetine", en:"Duloxetine", tpl:"neuro"},
  {cat:"neuro", icon:"ğŸ˜´", ar:"Amitriptyline", en:"Amitriptyline", tpl:"neuro"},
  {cat:"neuro", icon:"ğŸ˜´", ar:"Zolpidem", en:"Zolpidem", tpl:"neuro"},

  // Supplements
  {cat:"supp", icon:"ğŸ§²", ar:"Iron (Ferrous)", en:"Iron (Ferrous)", tpl:"supplements"},
  {cat:"supp", icon:"ğŸ§²", ar:"Calcium", en:"Calcium", tpl:"supplements"},
  {cat:"supp", icon:"ğŸ§¬", ar:"Vitamin D", en:"Vitamin D", tpl:"supplements"},
  {cat:"supp", icon:"ğŸ§¬", ar:"Folic acid", en:"Folic acid", tpl:"supplements"},
  {cat:"supp", icon:"ğŸ§¬", ar:"Vitamin B12", en:"Vitamin B12", tpl:"supplements"},
  {cat:"supp", icon:"ğŸ§¬", ar:"Multivitamin", en:"Multivitamin", tpl:"supplements"},

  // Other (add many common meds quickly to exceed 200)
  {cat:"other", icon:"ğŸŸ¦", ar:"Atorvastatin", en:"Atorvastatin", tpl:"bp_once"},
  {cat:"other", icon:"ğŸŸ¦", ar:"Rosuvastatin", en:"Rosuvastatin", tpl:"bp_once"},
  {cat:"other", icon:"ğŸŸ¦", ar:"Simvastatin", en:"Simvastatin", tpl:"bp_once"},
  {cat:"other", icon:"ğŸŸ¦", ar:"Ezetimibe", en:"Ezetimibe", tpl:"bp_once"},
  {cat:"other", icon:"ğŸ§¬", ar:"Allopurinol", en:"Allopurinol", tpl:"other"},
  {cat:"other", icon:"ğŸ§¬", ar:"Colchicine", en:"Colchicine", tpl:"other"},
  {cat:"other", icon:"ğŸ‘ï¸", ar:"Eye drops (general)", en:"Eye drops (general)", tpl:"other"},
  {cat:"other", icon:"ğŸ§´", ar:"Creams/Ointments", en:"Creams/Ointments", tpl:"other"},
];

// Add lots of extra names (mapped to "other") to push the list well over 200.
// Patient-friendly: generic safe advice, no complex dosing.
const EXTRA_OTHER_NAMES = [
  "Metoclopramide","Hyoscine","Loperamide","Mesalazine","Ursodeoxycholic acid",
  "Albuterol","Ipratropium","Tiotropium","Cetirizine (Zyrtec)","Desloratadine",
  "Amoxicillin/Clavulanate","Clindamycin","Linezolid","Vancomycin","Meropenem","Piperacillin/Tazobactam",
  "Atenolol","Propranolol","Diltiazem","Verapamil","Hydralazine","Nifedipine",
  "Omeprazole (Losec)","Pantoprazole (Controloc)","Esomeprazole (Nexium)",
  "Metformin XR","Insulin NPH","Regular insulin",
  "Levothyroxine 50/100","Carbimazole","Methimazole",
  "Tramadol","Codeine","Morphine","Oxycodone",
  "Warfarin 5mg","Heparin","Enoxaparin",
  "Aspirin 81","Plavix","Brilinta",
  "Sertraline 50","Citalopram","Venlafaxine","Mirtazapine","Quetiapine","Olanzapine",
  "Topiramate","Phenytoin","Clonazepam",
  "Tamsulosin 0.4","Dutasteride",
  "Metoprolol XL","Bisoprolol 5","Losartan 50","Valsartan 160",
  "Furosemide 40","HCTZ 25","Spironolactone 25",
  "Atorvastatin 20","Rosuvastatin 10",
  "Vitamin C","Zinc","Magnesium","Omega-3",
  "Acyclovir","Valacyclovir","Fluconazole","Terbinafine"
];

// convert extra names into entries
EXTRA_OTHER_NAMES.forEach(n=>{
  MEDS.push({cat:"other", icon:"ğŸ“Œ", ar:n, en:n, tpl:"other"});
});

/* =======================
   5) Rendering
======================= */
function renderCats(){
  state.view="cats";
  state.currentCat=null;
  grid.innerHTML="";
  renderHint();
  add("bot", state.lang==="ar" ? "Ø§Ø®ØªØ± ÙØ¦Ø©:" : "Choose a category:");

  CATS.forEach(c=>{
    const div=document.createElement("div");
    div.className="tile";
    div.innerHTML = `<div>${c.icon} ${(state.lang==="ar")?c.ar:c.en}<small>${state.lang==="ar"?"Ø§Ø¶ØºØ· Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø¯ÙˆÙŠØ©":"Tap to view medicines"}</small></div><div>â–¶</div>`;
    div.onclick = ()=>{ state.currentCat=c.key; renderMeds(); };
    grid.appendChild(div);
  });
}

function renderMeds(){
  state.view="meds";
  grid.innerHTML="";
  renderHint();

  const catMeta = CATS.find(c=>c.key===state.currentCat);
  const list = MEDS.filter(m=>m.cat===state.currentCat);

  add("bot", state.lang==="ar"
    ? `âœ… ÙØ¦Ø©: ${catMeta.icon} ${catMeta.ar}\nØ§Ø®ØªØ± Ø§Ù„Ø¯ÙˆØ§Ø¡:`
    : `âœ… Category: ${catMeta.icon} ${catMeta.en}\nTap a medicine:`
  );

  list.forEach(m=>{
    const div=document.createElement("div");
    div.className="tile";
    div.innerHTML = `<div>${m.icon} ${(state.lang==="ar")?m.ar:m.en}<small>${state.lang==="ar"?"Ø§Ø¶ØºØ· Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆÙ‚ÙŠØª":"Tap for timing guidance"}</small></div><div>â–¶</div>`;
    div.onclick = ()=> onMedicineTap(m);
    grid.appendChild(div);
  });
}

function onMedicineTap(m){
  add("user", state.lang==="ar" ? m.ar : m.en);
  const tpl = TEMPLATES[m.tpl] || TEMPLATES.other;
  add("bot", state.lang==="ar" ? tpl.ar : tpl.en);
}

function render(){
  if(state.view==="cats") renderCats();
  else renderMeds();
}

/* =======================
   6) Optional search (typing)
======================= */
function toggleTyping(){
  state.typing = !state.typing;
  searchRow.style.display = state.typing ? "flex" : "none";
  document.getElementById("typingBtn").classList.toggle("active", state.typing);
}

function normalize(s){ return (s||"").toLowerCase().replace(/\s+/g," ").trim(); }

function searchMedicine(q){
  const nq = normalize(q);
  if(!nq) return null;
  // find any match by AR/EN name
  return MEDS.find(m => normalize(m.ar).includes(nq) || normalize(m.en).includes(nq));
}

document.getElementById("searchBtn").onclick = ()=>{
  const q = searchInput.value.trim();
  if(!q) return;
  add("user", q);
  const m = searchMedicine(q);
  if(m) onMedicineTap(m);
  else add("bot", state.lang==="ar" ? "Ù„Ù… Ø£Ø¬Ø¯ Ø§Ù„Ø§Ø³Ù…. Ø§Ù„Ø£ÙØ¶Ù„ Ø§Ø®ØªØ± Ù…Ù† Ø§Ù„Ø£Ø²Ø±Ø§Ø±." : "Not found. Please use the buttons.");
  searchInput.value="";
};

searchInput.addEventListener("keydown",(e)=>{
  if(e.key==="Enter"){ e.preventDefault(); document.getElementById("searchBtn").click(); }
});

/* =======================
   7) Buttons
======================= */
document.getElementById("arBtn").onclick = ()=>setLang("ar");
document.getElementById("enBtn").onclick = ()=>setLang("en");
document.getElementById("homeBtn").onclick = ()=>{ state.view="cats"; render(); };
document.getElementById("resetBtn").onclick = ()=>{ resetChat(); state.view="cats"; render(); };
document.getElementById("typingBtn").onclick = ()=>toggleTyping();

/* =======================
   init
======================= */
resetChat();
renderCats();
setLang("ar");
</script>
</body>
</html>
